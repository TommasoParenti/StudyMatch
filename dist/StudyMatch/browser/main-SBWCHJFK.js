import{a as te,b as Je,c as sm,d as b,e as VC,f as Uu,g as UC,h as jC,i as BC,j as am,k as ju,l as kc,m as cm,n as Bu,o as $u,p as $C,q as lm,r as Be,s as jn,t as dr,u as zu,v as po,w as qu,x as zC,y as Bn,z as et}from"./chunk-RBUZSOFK.js";var dm=null;var um=1,qC=Symbol("SIGNAL");function $e(t){let e=dm;return dm=t,e}function HC(){return dm}var fm={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function GA(t){if(!(ym(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===um)){if(!t.producerMustRecompute(t)&&!pm(t)){t.dirty=!1,t.lastCleanEpoch=um;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=um}}function hm(t){return t&&(t.nextProducerIndex=0),$e(t)}function GC(t,e){if($e(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ym(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)gm(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function pm(t){_m(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(GA(n),r!==n.version))return!0}return!1}function mm(t){if(_m(t),ym(t))for(let e=0;e<t.producerNode.length;e++)gm(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function gm(t,e){if(WA(t),t.liveConsumerNode.length===1&&KA(t))for(let r=0;r<t.producerNode.length;r++)gm(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];_m(i),i.producerIndexOfThis[r]=e}}function ym(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _m(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function WA(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function KA(t){return t.producerNode!==void 0}function YA(){throw new Error}var QA=YA;function WC(t){QA=t}function ue(t){return typeof t=="function"}function Es(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hu=Es(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function mo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ht=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ue(r))try{r()}catch(o){e=o instanceof Hu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{KC(o)}catch(s){e=e??[],s instanceof Hu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)KC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&mo(n,e)}remove(e){let{_finalizers:n}=this;n&&mo(n,e),e instanceof t&&e._removeParent(this)}};ht.EMPTY=(()=>{let t=new ht;return t.closed=!0,t})();var vm=ht.EMPTY;function Gu(t){return t instanceof ht||t&&"closed"in t&&ue(t.remove)&&ue(t.add)&&ue(t.unsubscribe)}function KC(t){ue(t)?t():t.unsubscribe()}var $n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xs={setTimeout(t,e,...n){let{delegate:r}=xs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=xs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wu(t){xs.setTimeout(()=>{let{onUnhandledError:e}=$n;if(e)e(t);else throw t})}function $r(){}var YC=wm("C",void 0,void 0);function QC(t){return wm("E",void 0,t)}function ZC(t){return wm("N",t,void 0)}function wm(t,e,n){return{kind:t,value:e,error:n}}var go=null;function Ms(t){if($n.useDeprecatedSynchronousErrorHandling){let e=!go;if(e&&(go={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=go;if(go=null,n)throw r}}else t()}function XC(t){$n.useDeprecatedSynchronousErrorHandling&&go&&(go.errorThrown=!0,go.error=t)}var yo=class extends ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gu(e)&&e.add(this)):this.destination=JA}static create(e,n,r){return new zn(e,n,r)}next(e){this.isStopped?Cm(ZC(e),this):this._next(e)}error(e){this.isStopped?Cm(QC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cm(YC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZA=Function.prototype.bind;function bm(t,e){return ZA.call(t,e)}var Im=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ku(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ku(r)}else Ku(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ku(n)}}},zn=class extends yo{constructor(e,n,r){super();let i;if(ue(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&$n.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bm(e.next,o),error:e.error&&bm(e.error,o),complete:e.complete&&bm(e.complete,o)}):i=e}this.destination=new Im(i)}};function Ku(t){$n.useDeprecatedSynchronousErrorHandling?XC(t):Wu(t)}function XA(t){throw t}function Cm(t,e){let{onStoppedNotification:n}=$n;n&&xs.setTimeout(()=>n(t,e))}var JA={closed:!0,next:$r,error:XA,complete:$r};var Ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function tn(t){return t}function Em(...t){return xm(t)}function xm(t){return t.length===0?tn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var _e=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=tk(n)?n:new zn(n,r,i);return Ms(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=JC(r),new r((i,o)=>{let s=new zn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ts](){return this}pipe(...n){return xm(n)(this)}toPromise(n){return n=JC(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function JC(t){var e;return(e=t??$n.Promise)!==null&&e!==void 0?e:Promise}function ek(t){return t&&ue(t.next)&&ue(t.error)&&ue(t.complete)}function tk(t){return t&&t instanceof yo||ek(t)&&Gu(t)}function Mm(t){return ue(t?.lift)}function me(t){return e=>{if(Mm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(t,e,n,r,i){return new Tm(t,e,n,r,i)}var Tm=class extends yo{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ds(){return me((t,e)=>{let n=null;t._refCount++;let r=be(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var pi=class extends _e{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Mm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ht;let n=this.getSubject();e.add(this.source.subscribe(be(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ht.EMPTY)}return e}refCount(){return Ds()(this)}};var eI=Es(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=(()=>{class t extends _e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Yu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new eI}next(n){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?vm:(this.currentObservers=null,o.push(n),new ht(()=>{this.currentObservers=null,mo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new _e;return n.source=this,n}}return t.create=(e,n)=>new Yu(e,n),t})(),Yu=class extends We{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:vm}};var Ft=class extends We{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Rc={now(){return(Rc.delegate||Date).now()},delegate:void 0};var Qu=class extends We{constructor(e=1/0,n=1/0,r=Rc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Zu=class extends ht{constructor(e,n){super()}schedule(e,n=0){return this}};var Nc={setInterval(t,e,...n){let{delegate:r}=Nc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Nc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Os=class extends Zu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Nc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Nc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,mo(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ss=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ss.now=Rc.now;var Ps=class extends Ss{constructor(e,n=Ss.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fr=new Ps(Os),Dm=fr;var Xu=class extends Os{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ju=class extends Ps{};var Om=new Ju(Xu);var nn=new _e(t=>t.complete());function ed(t){return t&&ue(t.schedule)}function Sm(t){return t[t.length-1]}function tI(t){return ue(Sm(t))?t.pop():void 0}function hr(t){return ed(Sm(t))?t.pop():void 0}function nI(t,e){return typeof Sm(t)=="number"?t.pop():e}var As=t=>t&&typeof t.length=="number"&&typeof t!="function";function td(t){return ue(t?.then)}function nd(t){return ue(t[Ts])}function rd(t){return Symbol.asyncIterator&&ue(t?.[Symbol.asyncIterator])}function id(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var od=nk();function sd(t){return ue(t?.[od])}function ad(t){return UC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Uu(n.read());if(i)return yield Uu(void 0);yield yield Uu(r)}}finally{n.releaseLock()}})}function cd(t){return ue(t?.getReader)}function He(t){if(t instanceof _e)return t;if(t!=null){if(nd(t))return rk(t);if(As(t))return ik(t);if(td(t))return ok(t);if(rd(t))return rI(t);if(sd(t))return sk(t);if(cd(t))return ak(t)}throw id(t)}function rk(t){return new _e(e=>{let n=t[Ts]();if(ue(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ik(t){return new _e(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ok(t){return new _e(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wu)})}function sk(t){return new _e(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function rI(t){return new _e(e=>{ck(t,e).catch(n=>e.error(n))})}function ak(t){return rI(ad(t))}function ck(t,e){var n,r,i,o;return VC(this,void 0,void 0,function*(){try{for(n=jC(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function dn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function wn(t,e=0){return me((n,r)=>{n.subscribe(be(r,i=>dn(r,t,()=>r.next(i),e),()=>dn(r,t,()=>r.complete(),e),i=>dn(r,t,()=>r.error(i),e)))})}function qn(t,e=0){return me((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function iI(t,e){return He(t).pipe(qn(e),wn(e))}function oI(t,e){return He(t).pipe(qn(e),wn(e))}function sI(t,e){return new _e(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function aI(t,e){return new _e(n=>{let r;return dn(n,e,()=>{r=t[od](),dn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ue(r?.return)&&r.return()})}function ld(t,e){if(!t)throw new Error("Iterable cannot be null");return new _e(n=>{dn(n,e,()=>{let r=t[Symbol.asyncIterator]();dn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function cI(t,e){return ld(ad(t),e)}function lI(t,e){if(t!=null){if(nd(t))return iI(t,e);if(As(t))return sI(t,e);if(td(t))return oI(t,e);if(rd(t))return ld(t,e);if(sd(t))return aI(t,e);if(cd(t))return cI(t,e)}throw id(t)}function Te(t,e){return e?lI(t,e):He(t)}function se(...t){let e=hr(t);return Te(t,e)}function mi(t,e){let n=ue(t)?t:()=>t,r=i=>i.error(n());return new _e(e?i=>e.schedule(r,0,i):r)}function Pm(t){return!!t&&(t instanceof _e||ue(t.lift)&&ue(t.subscribe))}var Hn=Es(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function K(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new zn({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new Hn)}});t.subscribe(o)})}function uI(t){return t instanceof Date&&!isNaN(t)}function oe(t,e){return me((n,r)=>{let i=0;n.subscribe(be(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:lk}=Array;function uk(t,e){return lk(e)?t(...e):t(e)}function ud(t){return oe(e=>uk(t,e))}var{isArray:dk}=Array,{getPrototypeOf:fk,prototype:hk,keys:pk}=Object;function dI(t){if(t.length===1){let e=t[0];if(dk(e))return{args:e,keys:null};if(mk(e)){let n=pk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function mk(t){return t&&typeof t=="object"&&fk(t)===hk}function fI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Fc(...t){let e=hr(t),n=tI(t),{args:r,keys:i}=dI(t);if(r.length===0)return Te([],e);let o=new _e(gk(r,e,i?s=>fI(i,s):tn));return n?o.pipe(ud(n)):o}function gk(t,e,n=tn){return r=>{hI(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)hI(e,()=>{let u=Te(t[c],e),d=!1;u.subscribe(be(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hI(t,e,n){t?dn(n,t,e):e()}function pI(t,e,n,r,i,o,s,a){let c=[],u=0,d=0,h=!1,m=()=>{h&&!c.length&&!u&&e.complete()},y=A=>u<r?M(A):c.push(A),M=A=>{o&&e.next(A),u++;let P=!1;He(n(A,d++)).subscribe(be(e,z=>{i?.(z),o?y(z):e.next(z)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;c.length&&u<r;){let z=c.shift();s?dn(e,s,()=>M(z)):M(z)}m()}catch(z){e.error(z)}}))};return t.subscribe(be(e,y,()=>{h=!0,m()})),()=>{a?.()}}function ot(t,e,n=1/0){return ue(e)?ot((r,i)=>oe((o,s)=>e(r,o,i,s))(He(t(r,i))),n):(typeof e=="number"&&(n=e),me((r,i)=>pI(r,i,t,n)))}function gi(t=1/0){return ot(tn,t)}function mI(){return gi(1)}function pr(...t){return mI()(Te(t,hr(t)))}function _o(t){return new _e(e=>{He(t()).subscribe(e)})}var yk=["addListener","removeListener"],_k=["addEventListener","removeEventListener"],vk=["on","off"];function ks(t,e,n,r){if(ue(n)&&(r=n,n=void 0),r)return ks(t,e,n).pipe(ud(r));let[i,o]=Ck(t)?_k.map(s=>a=>t[s](e,a,n)):wk(t)?yk.map(gI(t,e)):bk(t)?vk.map(gI(t,e)):[];if(!i&&As(t))return ot(s=>ks(s,e,n))(He(t));if(!i)throw new TypeError("Invalid event target");return new _e(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function gI(t,e){return n=>r=>t[n](e,r)}function wk(t){return ue(t.addListener)&&ue(t.removeListener)}function bk(t){return ue(t.on)&&ue(t.off)}function Ck(t){return ue(t.addEventListener)&&ue(t.removeEventListener)}function yI(t=0,e,n=Dm){let r=-1;return e!=null&&(ed(e)?n=e:r=e),new _e(i=>{let o=uI(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Rs(...t){let e=hr(t),n=nI(t,1/0),r=t;return r.length?r.length===1?He(r[0]):gi(n)(Te(r,e)):nn}var vo=new _e($r);function pt(t,e){return me((n,r)=>{let i=0;n.subscribe(be(r,o=>t.call(e,o,i++)&&r.next(o)))})}function yi(t){return me((e,n)=>{let r=null,i=!1,o;r=e.subscribe(be(n,void 0,void 0,s=>{o=He(t(s,yi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function _I(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(be(s,d=>{let h=u++;c=a?t(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function wo(t,e){return ue(e)?ot(t,e,1):ot(t,1)}function vI(t){return new _e(e=>t.subscribe(e))}var Ik={connector:()=>new We};function dd(t,e=Ik){let{connector:n}=e;return me((r,i)=>{let o=n();He(t(vI(o))).subscribe(i),i.add(r.subscribe(o))})}function Am(t,e=fr){return me((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=o;o=null,r.next(u)}};function c(){let u=s+t,d=e.now();if(d<u){i=this.schedule(void 0,u-d),r.add(i);return}a()}n.subscribe(be(r,u=>{o=u,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function _i(t){return me((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Dt(t){return t<=0?()=>nn:me((e,n)=>{let r=0;e.subscribe(be(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function wI(){return me((t,e)=>{t.subscribe(be(e,$r))})}function Lc(t){return oe(()=>t)}function km(t,e){return e?n=>pr(e.pipe(Dt(1),wI()),n.pipe(km(t))):ot((n,r)=>He(t(n,r)).pipe(Dt(1),Lc(n)))}function Rm(t,e=fr){let n=yI(t,e);return km(()=>n)}function Nm(t,e=tn){return t=t??Ek,me((n,r)=>{let i,o=!0;n.subscribe(be(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function Ek(t,e){return t===e}function fd(t=xk){return me((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function xk(){return new Hn}function Vc(t){return me((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Pn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):tn,Dt(1),n?_i(e):fd(()=>new Hn))}function Ns(t){return t<=0?()=>nn:me((e,n)=>{let r=[];e.subscribe(be(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Fm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):tn,Ns(1),n?_i(e):fd(()=>new Hn))}function bI(t,e){let n=ue(t)?t:()=>t;return ue(e)?dd(e,{connector:n}):r=>new pi(r,n)}function Uc(){return me((t,e)=>{let n,r=!1;t.subscribe(be(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Lm(t){return t?e=>dd(t)(e):e=>bI(new We)(e)}function bo(t,e){return me(_I(t,e,arguments.length>=2,!0))}function CI(t={}){let{connector:e=()=>new We,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,d=!1,h=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=c=void 0,d=h=!1},M=()=>{let A=s;y(),A?.unsubscribe()};return me((A,P)=>{u++,!h&&!d&&m();let z=c=c??e();P.add(()=>{u--,u===0&&!h&&!d&&(a=Vm(M,i))}),z.subscribe(P),!s&&u>0&&(s=new zn({next:W=>z.next(W),error:W=>{h=!0,m(),a=Vm(y,n,W),z.error(W)},complete:()=>{d=!0,m(),a=Vm(y,r),z.complete()}}),He(A).subscribe(s))})(o)}}function Vm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new zn({next:()=>{r.unsubscribe(),t()}});return He(e(...n)).subscribe(r)}function hd(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,CI({connector:()=>new Qu(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Co(...t){let e=hr(t);return me((n,r)=>{(e?pr(t,n,e):pr(t,n)).subscribe(r)})}function ze(t,e){return me((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(be(r,c=>{i?.unsubscribe();let u=0,d=o++;He(t(c,d)).subscribe(i=be(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function pd(t,e){return ue(e)?ze(()=>t,e):ze(()=>t)}function Um(t){return me((e,n)=>{He(t).subscribe(be(n,()=>n.complete(),$r)),!n.closed&&e.subscribe(n)})}function mt(t,e,n){let r=ue(t)||e||n?{next:t,error:e,complete:n}:t;return r?me((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(be(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):tn}var aE="https://g.co/ng/security#xss",de=class extends Error{constructor(e,n){super(zg(e,n)),this.code=e}};function zg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Yc(t){return{toString:t}.toString()}var md="__parameters__";function Mk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function cE(t,e,n){return Yc(()=>{let r=Mk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let h=c.hasOwnProperty(md)?c[md]:Object.defineProperty(c,md,{value:[]})[md];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Kn=globalThis;function Ze(t){for(let e in t)if(t[e]===Ze)return e;throw Error("Could not find renamed property on target object.")}function pn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(pn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function II(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Tk=Ze({__forward_ref__:Ze});function lE(t){return t.__forward_ref__=lE,t.toString=function(){return pn(this())},t}function rn(t){return uE(t)?t():t}function uE(t){return typeof t=="function"&&t.hasOwnProperty(Tk)&&t.__forward_ref__===lE}function ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ae(t){return{providers:t.providers||[],imports:t.imports||[]}}function Zd(t){return EI(t,fE)||EI(t,hE)}function dE(t){return Zd(t)!==null}function EI(t,e){return t.hasOwnProperty(e)?t[e]:null}function Dk(t){let e=t&&(t[fE]||t[hE]);return e||null}function xI(t){return t&&(t.hasOwnProperty(MI)||t.hasOwnProperty(Ok))?t[MI]:null}var fE=Ze({\u0275prov:Ze}),MI=Ze({\u0275inj:Ze}),hE=Ze({ngInjectableDef:Ze}),Ok=Ze({ngInjectorDef:Ze}),ne=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pE(t){return t&&!!t.\u0275providers}var Sk=Ze({\u0275cmp:Ze}),Pk=Ze({\u0275dir:Ze}),Ak=Ze({\u0275pipe:Ze}),kk=Ze({\u0275mod:Ze}),Ed=Ze({\u0275fac:Ze}),Bc=Ze({__NG_ELEMENT_ID__:Ze}),TI=Ze({__NG_ENV_ID__:Ze});function zr(t){return typeof t=="string"?t:t==null?"":String(t)}function Rk(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():zr(t)}function Nk(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new de(-200,t)}function qg(t,e){throw new de(-201,!1)}var xe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(xe||{}),Qm;function mE(){return Qm}function fn(t){let e=Qm;return Qm=t,e}function gE(t,e,n){let r=Zd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&xe.Optional)return null;if(e!==void 0)return e;qg(t,"Injector")}var Fk={},zc=Fk,Zm="__NG_DI_FLAG__",xd="ngTempTokenPath",Lk="ngTokenPath",Vk=/\n/gm,Uk="\u0275",DI="__source",Us;function jk(){return Us}function vi(t){let e=Us;return Us=t,e}function Bk(t,e=xe.Default){if(Us===void 0)throw new de(-203,!1);return Us===null?gE(t,void 0,e):Us.get(t,e&xe.Optional?null:void 0,e)}function V(t,e=xe.Default){return(mE()||Bk)(rn(t),e)}function G(t,e=xe.Default){return V(t,Xd(e))}function Xd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Xm(t){let e=[];for(let n=0;n<t.length;n++){let r=rn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,o=xe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=$k(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(V(i,o))}else e.push(V(r))}return e}function yE(t,e){return t[Zm]=e,t.prototype[Zm]=e,t}function $k(t){return t[Zm]}function zk(t,e,n,r){let i=t[xd];throw e[DI]&&i.unshift(e[DI]),t.message=qk(`
`+t.message,i,n,r),t[Lk]=i,t[xd]=null,t}function qk(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Uk?t.slice(2):t;let i=pn(e);if(Array.isArray(e))i=e.map(pn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):pn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Vk,`
  `)}`}var Ro=yE(cE("Optional"),8);var Jd=yE(cE("SkipSelf"),4);function xo(t,e){let n=t.hasOwnProperty(Ed);return n?t[Ed]:null}function Hk(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Gk(t){return t.flat(Number.POSITIVE_INFINITY)}function Hg(t,e){t.forEach(n=>Array.isArray(n)?Hg(n,e):e(n))}function _E(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Md(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var qc={},mr=[],Bs=new ne(""),vE=new ne("",-1),wE=new ne(""),Td=class{get(e,n=zc){if(n===zc){let r=new Error(`NullInjectorError: No provider for ${pn(e)}!`);throw r.name="NullInjectorError",r}return n}},bE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(bE||{}),_r=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(_r||{}),Ci=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ci||{});function Wk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Jm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Kk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function CE(t){return t===3||t===4||t===6}function Kk(t){return t.charCodeAt(0)===64}function Gg(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?OI(t,n,i,null,e[++r]):OI(t,n,i,null,null))}}return t}function OI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var IE="ng-template";function Yk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Wk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Wg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Wg(t){return t.type===4&&t.value!==IE}function Qk(t,e,n){let r=t.type===4&&!n?IE:t.value;return e===r}function Zk(t,e,n){let r=4,i=t.attrs,o=i!==null?eR(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Gn(r)&&!Gn(c))return!1;if(s&&Gn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Qk(t,c,n)||c===""&&e.length===1){if(Gn(r))return!1;s=!0}}else if(r&8){if(i===null||!Yk(t,i,c,n)){if(Gn(r))return!1;s=!0}}else{let u=e[++a],d=Xk(c,i,Wg(t),n);if(d===-1){if(Gn(r))return!1;s=!0;continue}if(u!==""){let h;if(d>o?h="":h=i[d+1].toLowerCase(),r&2&&u!==h){if(Gn(r))return!1;s=!0}}}}return Gn(r)||s}function Gn(t){return(t&1)===0}function Xk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return tR(e,t)}function Jk(t,e,n=!1){for(let r=0;r<e.length;r++)if(Zk(t,e[r],n))return!0;return!1}function eR(t){for(let e=0;e<t.length;e++){let n=t[e];if(CE(n))return e}return t.length}function tR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function SI(t,e){return t?":not("+e.trim()+")":e}function nR(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gn(s)&&(e+=SI(o,i),i=""),r=s,o=o||!Gn(r);n++}return i!==""&&(e+=SI(o,i)),e}function rR(t){return t.map(nR).join(",")}function iR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Gn(i))break;i=o}r++}return{attrs:e,classes:n}}function pe(t){return Yc(()=>{let e=DE(t),n=Je(te({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||_r.Emulated,styles:t.styles||mr,_:null,schemas:t.schemas||null,tView:null,id:""});OE(n);let r=t.dependencies;return n.directiveDefs=AI(r,!1),n.pipeDefs=AI(r,!0),n.id=aR(n),n})}function oR(t){return Ii(t)||EE(t)}function sR(t){return t!==null}function ke(t){return Yc(()=>({type:t.type,bootstrap:t.bootstrap||mr,declarations:t.declarations||mr,imports:t.imports||mr,exports:t.exports||mr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function PI(t,e){if(t==null)return qc;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Ci.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Ci.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Di(t){return Yc(()=>{let e=DE(t);return OE(e),e})}function Kg(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ii(t){return t[Sk]||null}function EE(t){return t[Pk]||null}function xE(t){return t[Ak]||null}function ME(t){let e=Ii(t)||EE(t)||xE(t);return e!==null?e.standalone:!1}function TE(t,e){let n=t[kk]||null;if(!n&&e===!0)throw new Error(`Type ${pn(t)} does not have '\u0275mod' property.`);return n}function DE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||qc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||mr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:PI(t.inputs,e),outputs:PI(t.outputs),debugInfo:null}}function OE(t){t.features?.forEach(e=>e(t))}function AI(t,e){if(!t)return null;let n=e?xE:oR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(sR)}function aR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ef(t){return{\u0275providers:t}}function cR(...t){return{\u0275providers:SE(!0,t),\u0275fromNgModule:!0}}function SE(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Hg(e,s=>{let a=s;eg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&PE(i,o),n}function PE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Yg(i,o=>{e(o,r)})}}function eg(t,e,n,r){if(t=rn(t),!t)return!1;let i=null,o=xI(t),s=!o&&Ii(t);if(!o&&!s){let c=t.ngModule;if(o=xI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)eg(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Hg(o.imports,d=>{eg(d,e,n,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&PE(u,e)}if(!a){let u=xo(i)||(()=>new i);e({provide:i,useFactory:u,deps:mr},i),e({provide:wE,useValue:i,multi:!0},i),e({provide:Bs,useValue:()=>V(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;Yg(c,d=>{e(d,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Yg(t,e){for(let n of t)pE(n)&&(n=n.\u0275providers),Array.isArray(n)?Yg(n,e):e(n)}var lR=Ze({provide:String,useValue:Ze});function AE(t){return t!==null&&typeof t=="object"&&lR in t}function uR(t){return!!(t&&t.useExisting)}function dR(t){return!!(t&&t.useFactory)}function $s(t){return typeof t=="function"}function fR(t){return!!t.useClass}var tf=new ne(""),vd={},hR={},jm;function Qg(){return jm===void 0&&(jm=new Td),jm}var Cn=class{},Hc=class extends Cn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ng(e,s=>this.processProvider(s)),this.records.set(vE,Fs(void 0,this)),i.has("environment")&&this.records.set(Cn,Fs(void 0,this));let o=this.records.get(tf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wE,mr,xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=$e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=vi(this),r=fn(void 0),i;try{return e()}finally{vi(n),fn(r)}}get(e,n=zc,r=xe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(TI))return e[TI](this);r=Xd(r);let i,o=vi(this),s=fn(void 0);try{if(!(r&xe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=_R(e)&&Zd(e);u&&this.injectableDefInScope(u)?c=Fs(tg(e),vd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&xe.Self?Qg():this.parent;return n=r&xe.Optional&&n===zc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[xd]=a[xd]||[]).unshift(pn(e)),o)throw a;return zk(a,e,"R3InjectorError",this.source)}else throw a}finally{fn(s),vi(o)}}resolveInjectorInitializers(){let e=$e(null),n=vi(this),r=fn(void 0),i;try{let o=this.get(Bs,mr,xe.Self);for(let s of o)s()}finally{vi(n),fn(r),$e(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(pn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){e=rn(e);let n=$s(e)?e:rn(e&&e.provide),r=mR(e);if(!$s(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Fs(void 0,vd,!0),i.factory=()=>Xm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=$e(null);try{return n.value===vd&&(n.value=hR,n.value=n.factory()),typeof n.value=="object"&&n.value&&yR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{$e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=rn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function tg(t){let e=Zd(t),n=e!==null?e.factory:xo(t);if(n!==null)return n;if(t instanceof ne)throw new de(204,!1);if(t instanceof Function)return pR(t);throw new de(204,!1)}function pR(t){if(t.length>0)throw new de(204,!1);let n=Dk(t);return n!==null?()=>n.factory(t):()=>new t}function mR(t){if(AE(t))return Fs(void 0,t.useValue);{let e=kE(t);return Fs(e,vd)}}function kE(t,e,n){let r;if($s(t)){let i=rn(t);return xo(i)||tg(i)}else if(AE(t))r=()=>rn(t.useValue);else if(dR(t))r=()=>t.useFactory(...Xm(t.deps||[]));else if(uR(t))r=()=>V(rn(t.useExisting));else{let i=rn(t&&(t.useClass||t.provide));if(gR(t))r=()=>new i(...Xm(t.deps));else return xo(i)||tg(i)}return r}function Fs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gR(t){return!!t.deps}function yR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function _R(t){return typeof t=="function"||typeof t=="object"&&t instanceof ne}function ng(t,e){for(let n of t)Array.isArray(n)?ng(n,e):n&&pE(n)?ng(n.\u0275providers,e):e(n)}function Zn(t,e){t instanceof Hc&&t.assertNotDestroyed();let n,r=vi(t),i=fn(void 0);try{return e()}finally{vi(r),fn(i)}}function RE(){return mE()!==void 0||jk()!=null}function vR(t){if(!RE())throw new de(-203,!1)}function wR(t){let e=Kn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function bR(t){return typeof t=="function"}var Gr=0,Ie=1,ge=2,Gt=3,Wn=4,Xn=5,Dd=6,Od=7,Yn=8,zs=9,vr=10,At=11,Gc=12,kI=13,Qs=14,wr=15,Mo=16,Ls=17,qr=18,nf=19,NE=20,wi=21,Bm=22,An=23,Qn=25,FE=1;var To=7,Sd=8,qs=9,bn=10,Pd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Pd||{});function bi(t){return Array.isArray(t)&&typeof t[FE]=="object"}function Wr(t){return Array.isArray(t)&&t[FE]===!0}function Zg(t){return(t.flags&4)!==0}function rf(t){return t.componentOffset>-1}function of(t){return(t.flags&1)===1}function Zs(t){return!!t.template}function rg(t){return(t[ge]&512)!==0}var ig=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function LE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function No(){return VE}function VE(t){return t.type.prototype.ngOnChanges&&(t.setInput=IR),CR}No.ngInherit=!0;function CR(){let t=jE(this),e=t?.current;if(e){let n=t.previous;if(n===qc)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function IR(t,e,n,r,i){let o=this.declaredInputs[r],s=jE(t)||ER(t,{previous:qc,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new ig(u&&u.currentValue,n,c===qc),LE(t,e,i,n)}var UE="__ngSimpleChanges__";function jE(t){return t[UE]||null}function ER(t,e){return t[UE]=e}var RI=null;var gr=function(t,e,n){RI?.(t,e,n)},xR="svg",MR="math";function br(t){for(;Array.isArray(t);)t=t[Gr];return t}function TR(t,e){return br(e[t])}function kn(t,e){return br(e[t.index])}function BE(t,e){return t.data[e]}function DR(t,e){return t[e]}function Oi(t,e){let n=e[t];return bi(n)?n:n[Gr]}function OR(t){return(t[ge]&4)===4}function Xg(t){return(t[ge]&128)===128}function SR(t){return Wr(t[Gt])}function Hs(t,e){return e==null?null:t[e]}function $E(t){t[Ls]=0}function zE(t){t[ge]&1024||(t[ge]|=1024,Xg(t)&&sf(t))}function PR(t,e){for(;t>0;)e=e[Qs],t--;return e}function Wc(t){return!!(t[ge]&9216||t[An]?.dirty)}function og(t){t[vr].changeDetectionScheduler?.notify(7),t[ge]&64&&(t[ge]|=1024),Wc(t)&&sf(t)}function sf(t){t[vr].changeDetectionScheduler?.notify(0);let e=Do(t);for(;e!==null&&!(e[ge]&8192||(e[ge]|=8192,!Xg(e)));)e=Do(e)}function qE(t,e){if((t[ge]&256)===256)throw new de(911,!1);t[wi]===null&&(t[wi]=[]),t[wi].push(e)}function AR(t,e){if(t[wi]===null)return;let n=t[wi].indexOf(e);n!==-1&&t[wi].splice(n,1)}function Do(t){let e=t[Gt];return Wr(e)?e[Gt]:e}var Oe={lFrame:tx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var HE=!1;function kR(){return Oe.lFrame.elementDepthCount}function RR(){Oe.lFrame.elementDepthCount++}function NR(){Oe.lFrame.elementDepthCount--}function GE(){return Oe.bindingsEnabled}function FR(){return Oe.skipHydrationRootTNode!==null}function LR(t){return Oe.skipHydrationRootTNode===t}function VR(){Oe.skipHydrationRootTNode=null}function Ue(){return Oe.lFrame.lView}function Wt(){return Oe.lFrame.tView}function Re(t){return Oe.lFrame.contextLView=t,t[Yn]}function Ne(t){return Oe.lFrame.contextLView=null,t}function on(){let t=WE();for(;t!==null&&t.type===64;)t=t.parent;return t}function WE(){return Oe.lFrame.currentTNode}function UR(){let t=Oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Fo(t,e){let n=Oe.lFrame;n.currentTNode=t,n.isParent=e}function Jg(){return Oe.lFrame.isParent}function KE(){Oe.lFrame.isParent=!1}function YE(){return HE}function NI(t){HE=t}function ey(){let t=Oe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function QE(){return Oe.lFrame.bindingIndex}function jR(t){return Oe.lFrame.bindingIndex=t}function ty(){return Oe.lFrame.bindingIndex++}function ZE(t){let e=Oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function BR(){return Oe.lFrame.inI18n}function $R(t,e){let n=Oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,sg(e)}function zR(){return Oe.lFrame.currentDirectiveIndex}function sg(t){Oe.lFrame.currentDirectiveIndex=t}function XE(){return Oe.lFrame.currentQueryIndex}function ny(t){Oe.lFrame.currentQueryIndex=t}function qR(t){let e=t[Ie];return e.type===2?e.declTNode:e.type===1?t[Xn]:null}function JE(t,e,n){if(n&xe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&xe.Host);)if(i=qR(o),i===null||(o=o[Qs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Oe.lFrame=ex();return r.currentTNode=e,r.lView=t,!0}function ry(t){let e=ex(),n=t[Ie];Oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ex(){let t=Oe.lFrame,e=t===null?null:t.child;return e===null?tx(t):e}function tx(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function nx(){let t=Oe.lFrame;return Oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var rx=nx;function iy(){let t=nx();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function HR(t){return(Oe.lFrame.contextLView=PR(t,Oe.lFrame.contextLView))[Yn]}function Qc(){return Oe.lFrame.selectedIndex}function Oo(t){Oe.lFrame.selectedIndex=t}function oy(){let t=Oe.lFrame;return BE(t.tView,t.selectedIndex)}function GR(){return Oe.lFrame.currentNamespace}var ix=!0;function af(){return ix}function cf(t){ix=t}function WR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=VE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function lf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function wd(t,e,n){ox(t,e,3,n)}function bd(t,e,n,r){(t[ge]&3)===n&&ox(t,e,n,r)}function $m(t,e){let n=t[ge];(n&3)===e&&(n&=16383,n+=1,t[ge]=n)}function ox(t,e,n,r){let i=r!==void 0?t[Ls]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ls]+=65536),(a<o||o==-1)&&(KR(t,n,e,c),t[Ls]=(t[Ls]&4294901760)+c+2),c++}function FI(t,e){gr(4,t,e);let n=$e(null);try{e.call(t)}finally{$e(n),gr(5,t,e)}}function KR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ge]>>14<t[Ls]>>16&&(t[ge]&3)===e&&(t[ge]+=16384,FI(a,o)):FI(a,o)}var js=-1,So=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function YR(t){return t instanceof So}function QR(t){return(t.flags&8)!==0}function ZR(t){return(t.flags&16)!==0}var zm={},ag=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Xd(r);let i=this.injector.get(e,zm,r);return i!==zm||n===zm?i:this.parentInjector.get(e,n,r)}};function sx(t){return t!==js}function Ad(t){return t&32767}function XR(t){return t>>16}function kd(t,e){let n=XR(t),r=e;for(;n>0;)r=r[Qs],n--;return r}var cg=!0;function Rd(t){let e=cg;return cg=t,e}var JR=256,ax=JR-1,cx=5,eN=0,yr={};function tN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bc)&&(r=n[Bc]),r==null&&(r=n[Bc]=eN++);let i=r&ax,o=1<<i;e.data[t+(i>>cx)]|=o}function Nd(t,e){let n=lx(t,e);if(n!==-1)return n;let r=e[Ie];r.firstCreatePass&&(t.injectorIndex=e.length,qm(r.data,t),qm(e,null),qm(r.blueprint,null));let i=sy(t,e),o=t.injectorIndex;if(sx(i)){let s=Ad(i),a=kd(i,e),c=a[Ie].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function qm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function lx(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function sy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=px(i),r===null)return js;if(n++,i=i[Qs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return js}function lg(t,e,n){tN(t,e,n)}function nN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(CE(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function ux(t,e,n){if(n&xe.Optional||t!==void 0)return t;qg(e,"NodeInjector")}function dx(t,e,n,r){if(n&xe.Optional&&r===void 0&&(r=null),!(n&(xe.Self|xe.Host))){let i=t[zs],o=fn(void 0);try{return i?i.get(e,r,n&xe.Optional):gE(e,r,n&xe.Optional)}finally{fn(o)}}return ux(r,e,n)}function fx(t,e,n,r=xe.Default,i){if(t!==null){if(e[ge]&2048&&!(r&xe.Self)){let s=sN(t,e,n,r,yr);if(s!==yr)return s}let o=hx(t,e,n,r,yr);if(o!==yr)return o}return dx(e,n,r,i)}function hx(t,e,n,r,i){let o=iN(n);if(typeof o=="function"){if(!JE(e,t,r))return r&xe.Host?ux(i,n,r):dx(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&xe.Optional))qg(n);else return s}finally{rx()}}else if(typeof o=="number"){let s=null,a=lx(t,e),c=js,u=r&xe.Host?e[wr][Xn]:null;for((a===-1||r&xe.SkipSelf)&&(c=a===-1?sy(t,e):e[a+8],c===js||!VI(r,!1)?a=-1:(s=e[Ie],a=Ad(c),e=kd(c,e)));a!==-1;){let d=e[Ie];if(LI(o,a,d.data)){let h=rN(a,e,n,s,r,u);if(h!==yr)return h}c=e[a+8],c!==js&&VI(r,e[Ie].data[a+8]===u)&&LI(o,a,e)?(s=d,a=Ad(c),e=kd(c,e)):a=-1}}return i}function rN(t,e,n,r,i,o){let s=e[Ie],a=s.data[t+8],c=r==null?rf(a)&&cg:r!=s&&(a.type&3)!==0,u=i&xe.Host&&o===a,d=Cd(a,s,n,c,u);return d!==null?Po(e,s,d,a):yr}function Cd(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,d=o>>20,h=r?a:a+d,m=i?a+d:u;for(let y=h;y<m;y++){let M=s[y];if(y<c&&n===M||y>=c&&M.type===n)return y}if(i){let y=s[c];if(y&&Zs(y)&&y.type===n)return c}return null}function Po(t,e,n,r){let i=t[n],o=e.data;if(YR(i)){let s=i;s.resolving&&Nk(Rk(o[n]));let a=Rd(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?fn(s.injectImpl):null,d=JE(t,r,xe.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&WR(n,o[n],e)}finally{u!==null&&fn(u),Rd(a),s.resolving=!1,rx()}}return i}function iN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Bc)?t[Bc]:void 0;return typeof e=="number"?e>=0?e&ax:oN:e}function LI(t,e,n){let r=1<<t;return!!(n[e+(t>>cx)]&r)}function VI(t,e){return!(t&xe.Self)&&!(t&xe.Host&&e)}var Eo=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return fx(this._tNode,this._lView,e,Xd(r),n)}};function oN(){return new Eo(on(),Ue())}function ay(t){return Yc(()=>{let e=t.prototype.constructor,n=e[Ed]||ug(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ed]||ug(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ug(t){return uE(t)?()=>{let e=ug(rn(t));return e&&e()}:xo(t)}function sN(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ge]&2048&&!(s[ge]&512);){let a=hx(o,s,n,r|xe.Self,yr);if(a!==yr)return a;let c=o.parent;if(!c){let u=s[NE];if(u){let d=u.get(n,yr,r);if(d!==yr)return d}c=px(s),s=s[Qs]}o=c}return i}function px(t){let e=t[Ie],n=e.type;return n===2?e.declTNode:n===1?t[Xn]:null}function cy(t){return nN(on(),t)}function UI(t,e=null,n=null,r){let i=mx(t,e,n,r);return i.resolveInjectorInitializers(),i}function mx(t,e=null,n=null,r,i=new Set){let o=[n||mr,cR(t)];return r=r||(typeof t=="object"?void 0:pn(t)),new Hc(o,e||Qg(),r||null,i)}var Io=class Io{static create(e,n){if(Array.isArray(e))return UI({name:""},n,e,"");{let r=e.name??"";return UI({name:r},e.parent,e.providers,r)}}};Io.THROW_IF_NOT_FOUND=zc,Io.NULL=new Td,Io.\u0275prov=ee({token:Io,providedIn:"any",factory:()=>V(vE)}),Io.__NG_ELEMENT_ID__=-1;var mn=Io;var aN=new ne("");aN.__NG_ELEMENT_ID__=t=>{let e=on();if(e===null)throw new de(204,!1);if(e.type&2)return e.value;if(t&xe.Optional)return null;throw new de(204,!1)};var cN="ngOriginalError";function Hm(t){return t[cN]}var gx=!0,ly=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=lN,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),dg=class extends ly{constructor(e){super(),this._lView=e}onDestroy(e){return qE(this._lView,e),()=>AR(this._lView,e)}};function lN(){return new dg(Ue())}var Xs=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ft(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var fg=class extends We{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,RE()&&(this.destroyRef=G(ly,{optional:!0})??void 0,this.pendingTasks=G(Xs,{optional:!0})??void 0)}emit(e){let n=$e(null);try{super.next(e)}finally{$e(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ht&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},st=fg;function Fd(...t){}function yx(t){let e,n;function r(){t=Fd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function jI(t){return queueMicrotask(()=>t()),()=>{t=Fd}}var uy="isAngularZone",Ld=uy+"_ID",uN=0,De=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new st(!1),this.onMicrotaskEmpty=new st(!1),this.onStable=new st(!1),this.onError=new st(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=gx}=e;if(typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,hN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(uy)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new de(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,dN,Fd,Fd);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dN={};function dy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){yx(()=>{t.callbackScheduled=!1,hg(t),t.isCheckStableRunning=!0,dy(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),hg(t)}function hN(t){let e=()=>{fN(t)},n=uN++;t._inner=t._inner.fork({name:"angular",properties:{[uy]:!0,[Ld]:n,[Ld+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(pN(c))return r.invokeTask(o,s,a,c);try{return BI(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),$I(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return BI(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!mN(c)&&e(),$I(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,hg(t),dy(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function hg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function BI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $I(t){t._nesting--,dy(t)}var Vd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new st,this.onMicrotaskEmpty=new st,this.onStable=new st,this.onError=new st}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function pN(t){return _x(t,"__ignore_ng_zone__")}function mN(t){return _x(t,"__scheduler_tick__")}function _x(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}function gN(t="zone.js",e){return t==="noop"?new Vd:t==="zone.js"?new De(e):t}var Hr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Hm(e);for(;n&&Hm(n);)n=Hm(n);return n||null}},yN=new ne("",{providedIn:"root",factory:()=>{let t=G(De),e=G(Hr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function _N(){return Js(on(),Ue())}function Js(t,e){return new Cr(kn(t,e))}var Cr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=_N;let t=e;return t})();function vN(t){return t instanceof Cr?t.nativeElement:t}function wN(){return this._results[Symbol.iterator]()}var pg=class t{get changes(){return this._changes??=new st}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=wN)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Gk(e);(this._changesDetected=!Hk(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function vx(t){return(t.flags&128)===128}var wx=new Map,bN=0;function CN(){return bN++}function IN(t){wx.set(t[nf],t)}function EN(t){wx.delete(t[nf])}var zI="__ngContext__";function Ei(t,e){bi(e)?(t[zI]=e[nf],IN(e)):t[zI]=e}function bx(t){return Ix(t[Gc])}function Cx(t){return Ix(t[Wn])}function Ix(t){for(;t!==null&&!Wr(t);)t=t[Wn];return t}var mg;function Ex(t){mg=t}function xN(){if(mg!==void 0)return mg;if(typeof document<"u")return document;throw new de(210,!1)}var uf=new ne("",{providedIn:"root",factory:()=>MN}),MN="ng",fy=new ne(""),Ot=new ne("",{providedIn:"platform",factory:()=>"unknown"});var hy=new ne("",{providedIn:"root",factory:()=>xN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var TN="h",DN="b";var ON=()=>null;function py(t,e,n=!1){return ON(t,e,n)}var xx=!1,SN=new ne("",{providedIn:"root",factory:()=>xx});var gd;function PN(){if(gd===void 0&&(gd=null,Kn.trustedTypes))try{gd=Kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gd}function qI(t){return PN()?.createScriptURL(t)||t}var Ud=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${aE})`}};function df(t){return t instanceof Ud?t.changingThisBreaksApplicationSecurity:t}function my(t,e){let n=AN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${aE})`)}return n===e}function AN(t){return t instanceof Ud&&t.getTypeName()||null}var kN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Mx(t){return t=String(t),t.match(kN)?t:"unsafe:"+t}var ff=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ff||{});function Me(t){let e=Dx();return e?e.sanitize(ff.URL,t)||"":my(t,"URL")?df(t):Mx(zr(t))}function RN(t){let e=Dx();if(e)return qI(e.sanitize(ff.RESOURCE_URL,t)||"");if(my(t,"ResourceURL"))return qI(df(t));throw new de(904,!1)}function NN(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?RN:Me}function Tx(t,e,n){return NN(e,n)(t)}function Dx(){let t=Ue();return t&&t[vr].sanitizer}var FN=/^>|^->|<!--|-->|--!>|<!-$/g,LN=/(<|>)/g,VN="\u200B$1\u200B";function UN(t){return t.replace(FN,e=>e.replace(LN,VN))}function Ox(t){return t instanceof Function?t():t}function jN(t){return(t??G(mn)).get(Ot)==="browser"}var Si=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Si||{}),BN;function gy(t,e){return BN(t,e)}function Vs(t,e,n,r,i){if(r!=null){let o,s=!1;Wr(r)?o=r:bi(r)&&(s=!0,r=r[Gr]);let a=br(r);t===0&&n!==null?i==null?Rx(e,n,a):jd(e,n,a,i||null,!0):t===1&&n!==null?jd(e,n,a,i||null,!0):t===2?rF(e,a,s):t===3&&e.destroyNode(a),o!=null&&oF(e,t,o,n,i)}}function $N(t,e){return t.createText(e)}function zN(t,e,n){t.setValue(e,n)}function qN(t,e){return t.createComment(UN(e))}function Sx(t,e,n){return t.createElement(e,n)}function HN(t,e){Px(t,e),e[Gr]=null,e[Xn]=null}function GN(t,e,n,r,i,o){r[Gr]=i,r[Xn]=e,pf(t,r,n,1,i,o)}function Px(t,e){e[vr].changeDetectionScheduler?.notify(8),pf(t,e,e[At],2,null,null)}function WN(t){let e=t[Gc];if(!e)return Gm(t[Ie],t);for(;e;){let n=null;if(bi(e))n=e[Gc];else{let r=e[bn];r&&(n=r)}if(!n){for(;e&&!e[Wn]&&e!==t;)bi(e)&&Gm(e[Ie],e),e=e[Gt];e===null&&(e=t),bi(e)&&Gm(e[Ie],e),n=e&&e[Wn]}e=n}}function KN(t,e,n,r){let i=bn+r,o=n.length;r>0&&(n[i-1][Wn]=e),r<o-bn?(e[Wn]=n[i],_E(n,bn+r,e)):(n.push(e),e[Wn]=null),e[Gt]=n;let s=e[Mo];s!==null&&n!==s&&Ax(s,e);let a=e[qr];a!==null&&a.insertView(t),og(e),e[ge]|=128}function Ax(t,e){let n=t[qs],r=e[Gt];if(bi(r))t[ge]|=Pd.HasTransplantedViews;else{let i=r[Gt][wr];e[wr]!==i&&(t[ge]|=Pd.HasTransplantedViews)}n===null?t[qs]=[e]:n.push(e)}function yy(t,e){let n=t[qs],r=n.indexOf(e);n.splice(r,1)}function gg(t,e){if(t.length<=bn)return;let n=bn+e,r=t[n];if(r){let i=r[Mo];i!==null&&i!==t&&yy(i,r),e>0&&(t[n-1][Wn]=r[Wn]);let o=Md(t,bn+e);HN(r[Ie],r);let s=o[qr];s!==null&&s.detachView(o[Ie]),r[Gt]=null,r[Wn]=null,r[ge]&=-129}return r}function kx(t,e){if(!(e[ge]&256)){let n=e[At];n.destroyNode&&pf(t,e,n,3,null,null),WN(e)}}function Gm(t,e){if(e[ge]&256)return;let n=$e(null);try{e[ge]&=-129,e[ge]|=256,e[An]&&mm(e[An]),QN(t,e),YN(t,e),e[Ie].type===1&&e[At].destroy();let r=e[Mo];if(r!==null&&Wr(e[Gt])){r!==e[Gt]&&yy(r,e);let i=e[qr];i!==null&&i.detachView(t)}EN(e)}finally{$e(n)}}function YN(t,e){let n=t.cleanup,r=e[Od];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Od]=null);let i=e[wi];if(i!==null){e[wi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function QN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof So)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];gr(4,a,c);try{c.call(a)}finally{gr(5,a,c)}}else{gr(4,i,o);try{o.call(i)}finally{gr(5,i,o)}}}}}function ZN(t,e,n){return XN(t,e.parent,n)}function XN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Gr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===_r.None||o===_r.Emulated)return null}return kn(r,n)}}function jd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Rx(t,e,n){t.appendChild(e,n)}function HI(t,e,n,r,i){r!==null?jd(t,e,n,r,i):Rx(t,e,n)}function Nx(t,e){return t.parentNode(e)}function JN(t,e){return t.nextSibling(e)}function eF(t,e,n){return nF(t,e,n)}function tF(t,e,n){return t.type&40?kn(t,n):null}var nF=tF,GI;function hf(t,e,n,r){let i=ZN(t,r,e),o=e[At],s=r.parent||e[Xn],a=eF(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)HI(o,i,n[c],a,!1);else HI(o,i,n,a,!1);GI!==void 0&&GI(o,r,e,n,i)}function jc(t,e){if(e!==null){let n=e.type;if(n&3)return kn(e,t);if(n&4)return yg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return jc(t,r);{let i=t[e.index];return Wr(i)?yg(-1,i):br(i)}}else{if(n&128)return jc(t,e.next);if(n&32)return gy(e,t)()||br(t[e.index]);{let r=Fx(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Do(t[wr]);return jc(i,r)}else return jc(t,e.next)}}}return null}function Fx(t,e){if(e!==null){let r=t[wr][Xn],i=e.projection;return r.projection[i]}return null}function yg(t,e){let n=bn+t+1;if(n<e.length){let r=e[n],i=r[Ie].firstChild;if(i!==null)return jc(r,i)}return e[To]}function rF(t,e,n){t.removeChild(null,e,n)}function _y(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Ei(br(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)_y(t,e,n.child,r,i,o,!1),Vs(e,t,i,a,o);else if(c&32){let u=gy(n,r),d;for(;d=u();)Vs(e,t,i,d,o);Vs(e,t,i,a,o)}else c&16?iF(t,e,r,n,i,o):Vs(e,t,i,a,o);n=s?n.projectionNext:n.next}}function pf(t,e,n,r,i,o){_y(n,r,t.firstChild,e,i,o,!1)}function iF(t,e,n,r,i,o){let s=n[wr],c=s[Xn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Vs(e,t,i,d,o)}else{let u=c,d=s[Gt];vx(r)&&(u.flags|=128),_y(t,e,u,d,i,o,!0)}}function oF(t,e,n,r,i){let o=n[To],s=br(n);o!==s&&Vs(e,t,r,o,i);for(let a=bn;a<n.length;a++){let c=n[a];pf(c[Ie],c,t,e,r,o)}}function sF(t,e,n){t.setAttribute(e,"style",n)}function Lx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Vx(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Jm(t,e,r),i!==null&&Lx(t,e,i),o!==null&&sF(t,e,o)}var Ir={};function D(t=1){Ux(Wt(),Ue(),Qc()+t,!1)}function Ux(t,e,n,r){if(!r)if((e[ge]&3)===3){let o=t.preOrderCheckHooks;o!==null&&wd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&bd(e,o,0,n)}Oo(n)}function q(t,e=xe.Default){let n=Ue();if(n===null)return V(t,e);let r=on();return fx(r,n,rn(t),e)}function jx(){let t="invalid";throw new Error(t)}function Bx(t,e,n,r,i,o){let s=$e(null);try{let a=null;i&Ci.SignalBased&&(a=e[r][qC]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ci.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):LE(e,a,r,o)}finally{$e(s)}}function aF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Oo(~i);else{let o=i,s=n[++r],a=n[++r];$R(s,o);let c=e[o];a(2,c)}}}finally{Oo(-1)}}function mf(t,e,n,r,i,o,s,a,c,u,d){let h=e.blueprint.slice();return h[Gr]=i,h[ge]=r|4|128|8|64,(u!==null||t&&t[ge]&2048)&&(h[ge]|=2048),$E(h),h[Gt]=h[Qs]=t,h[Yn]=n,h[vr]=s||t&&t[vr],h[At]=a||t&&t[At],h[zs]=c||t&&t[zs]||null,h[Xn]=o,h[nf]=CN(),h[Dd]=d,h[NE]=u,h[wr]=e.type==2?t[wr]:h,h}function Zc(t,e,n,r,i){let o=t.data[e];if(o===null)o=cF(t,e,n,r,i),BR()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=UR();o.injectorIndex=s===null?-1:s.injectorIndex}return Fo(o,!0),o}function cF(t,e,n,r,i){let o=WE(),s=Jg(),a=s?o:o&&o.parent,c=t.data[e]=pF(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function $x(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function zx(t,e,n,r,i){let o=Qc(),s=r&2;try{Oo(-1),s&&e.length>Qn&&Ux(t,e,Qn,!1),gr(s?2:0,i),n(r,i)}finally{Oo(o),gr(s?3:1,i)}}function vy(t,e,n){if(Zg(e)){let r=$e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{$e(r)}}}function wy(t,e,n){GE()&&(wF(t,e,n,kn(n,e)),(n.flags&64)===64&&Wx(t,e,n))}function by(t,e,n=kn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function qx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Cy(t,e,n,r,i,o,s,a,c,u,d){let h=Qn+r,m=h+i,y=lF(h,m),M=typeof u=="function"?u():u;return y[Ie]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:M,incompleteFirstPass:!1,ssrId:d}}function lF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ir);return n}function uF(t,e,n,r){let o=r.get(SN,xx)||n===_r.ShadowDom,s=t.selectRootElement(e,o);return dF(s),s}function dF(t){fF(t)}var fF=()=>null;function hF(t,e,n,r){let i=Qx(e);i.push(n),t.firstCreatePass&&Zx(t).push(r,i.length-1)}function pF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return FR()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function WI(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Ci.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?KI(r,n,u,a,c):KI(r,n,u,a)}return r}function KI(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function mF(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let h=o[d],m=n?n.get(h):null,y=m?m.inputs:null,M=m?m.outputs:null;c=WI(0,h.inputs,d,c,y),u=WI(1,h.outputs,d,u,M);let A=c!==null&&s!==null&&!Wg(e)?PF(c,d,s):null;a.push(A)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function gF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Hx(t,e,n,r,i,o,s,a){let c=kn(e,n),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(Ey(t,n,d,r,i),rf(e)&&yF(n,e.index)):e.type&3?(r=gF(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function yF(t,e){let n=Oi(e,t);n[ge]&16||(n[ge]|=64)}function Iy(t,e,n,r){if(GE()){let i=r===null?null:{"":-1},o=CF(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Gx(t,e,n,s,i,a),i&&IF(n,r,i)}n.mergedAttrs=Gg(n.mergedAttrs,n.attrs)}function Gx(t,e,n,r,i,o){for(let u=0;u<r.length;u++)lg(Nd(n,e),t,r[u].type);xF(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=$x(t,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];n.mergedAttrs=Gg(n.mergedAttrs,d.hostAttrs),MF(t,n,e,c,d),EF(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}mF(t,n,o)}function _F(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vF(s)!=a&&s.push(a),s.push(n,r,o)}}function vF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function wF(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;rf(n)&&TF(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Nd(n,e),Ei(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=Po(e,t,a,n);if(Ei(u,e),s!==null&&SF(e,a-i,u,c,n,s),Zs(c)){let d=Oi(n.index,e);d[Yn]=Po(e,t,a,n)}}}function Wx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=zR();try{Oo(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];sg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&bF(c,u)}}finally{Oo(-1),sg(s)}}function bF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function CF(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Jk(e,s.selectors,!1))if(r||(r=[]),Zs(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;_g(t,e,c)}else r.unshift(s),_g(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _g(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function IF(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new de(-301,!1);r.push(e[i],o)}}}function EF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Zs(e)&&(n[""]=t)}}function xF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function MF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=xo(i.type,!0)),s=new So(o,Zs(i),q);t.blueprint[r]=s,n[r]=s,_F(t,e,r,$x(t,n,i.hostVars,Ir),i)}function TF(t,e,n){let r=kn(e,t),i=qx(n),o=t[vr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=gf(t,mf(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function DF(t,e,n,r,i,o){let s=kn(t,e);OF(e[At],s,o,t.value,n,r,i)}function OF(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?zr(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function SF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],h=s[a++];Bx(r,n,c,u,d,h)}}function PF(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Kx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Yx(t,e){let n=t.contentQueries;if(n!==null){let r=$e(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];ny(o),a.contentQueries(2,e[s],s)}}}finally{$e(r)}}}function gf(t,e){return t[Gc]?t[kI][Wn]=e:t[Gc]=e,t[kI]=e,e}function vg(t,e,n){ny(0);let r=$e(null);try{e(t,n)}finally{$e(r)}}function Qx(t){return t[Od]??=[]}function Zx(t){return t.cleanup??=[]}function Xx(t,e){let n=t[zs],r=n?n.get(Hr,null):null;r&&r.handleError(e)}function Ey(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],d=t.data[s];Bx(d,u,r,a,c,i)}}function xy(t,e,n){let r=TR(e,t);zN(t[At],r,n)}function AF(t,e){let n=Oi(e,t),r=n[Ie];kF(r,n);let i=n[Gr];i!==null&&n[Dd]===null&&(n[Dd]=py(i,n[zs])),My(r,n,n[Yn])}function kF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function My(t,e,n){ry(e);try{let r=t.viewQuery;r!==null&&vg(1,r,n);let i=t.template;i!==null&&zx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[qr]?.finishViewCreation(t),t.staticContentQueries&&Yx(t,e),t.staticViewQueries&&vg(2,t.viewQuery,n);let o=t.components;o!==null&&RF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ge]&=-5,iy()}}function RF(t,e){for(let n=0;n<e.length;n++)AF(t,e[n])}function NF(t,e,n,r){let i=$e(null);try{let o=e.tView,a=t[ge]&4096?4096:16,c=mf(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[Mo]=u;let d=t[qr];return d!==null&&(c[qr]=d.createEmbeddedView(o)),My(o,c,n),c}finally{$e(i)}}function YI(t,e){return!e||e.firstChild===null||vx(t)}function FF(t,e,n,r=!0){let i=e[Ie];if(KN(i,e,t,n),r){let s=yg(n,t),a=e[At],c=Nx(a,t[To]);c!==null&&GN(i,t[Xn],a,e,c,s)}let o=e[Dd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Bd(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(br(o)),Wr(o)&&LF(o,r);let s=n.type;if(s&8)Bd(t,e,n.child,r);else if(s&32){let a=gy(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Fx(e,n);if(Array.isArray(a))r.push(...a);else{let c=Do(e[wr]);Bd(c[Ie],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function LF(t,e){for(let n=bn;n<t.length;n++){let r=t[n],i=r[Ie].firstChild;i!==null&&Bd(r[Ie],r,i,e)}t[To]!==t[Gr]&&e.push(t[To])}var Jx=[];function VF(t){return t[An]??UF(t)}function UF(t){let e=Jx.pop()??Object.create(BF);return e.lView=t,e}function jF(t){t.lView[An]!==t&&(t.lView=null,Jx.push(t))}var BF=Je(te({},fm),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{sf(t.lView)},consumerOnSignalRead(){this.lView[An]=this}});function $F(t){let e=t[An]??Object.create(zF);return e.lView=t,e}var zF=Je(te({},fm),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Do(t.lView);for(;e&&!eM(e[Ie]);)e=Do(e);e&&zE(e)},consumerOnSignalRead(){this.lView[An]=this}});function eM(t){return t.type!==2}var qF=100;function tM(t,e=!0,n=0){let r=t[vr],i=r.rendererFactory,o=!1;o||i.begin?.();try{HF(t,n)}catch(s){throw e&&Xx(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function HF(t,e){let n=YE();try{NI(!0),wg(t,e);let r=0;for(;Wc(t);){if(r===qF)throw new de(103,!1);r++,wg(t,1)}}finally{NI(n)}}function GF(t,e,n,r){let i=e[ge];if((i&256)===256)return;let o=!1,s=!1;!o&&e[vr].inlineEffectRunner?.flush(),ry(e);let a=!0,c=null,u=null;o||(eM(t)?(u=VF(e),c=hm(u)):HC()===null?(a=!1,u=$F(e),c=hm(u)):e[An]&&(mm(e[An]),e[An]=null));try{$E(e),jR(t.bindingStartIndex),n!==null&&zx(t,e,n,2,r);let d=(i&3)===3;if(!o)if(d){let y=t.preOrderCheckHooks;y!==null&&wd(e,y,null)}else{let y=t.preOrderHooks;y!==null&&bd(e,y,0,null),$m(e,0)}if(s||WF(e),nM(e,0),t.contentQueries!==null&&Yx(t,e),!o)if(d){let y=t.contentCheckHooks;y!==null&&wd(e,y)}else{let y=t.contentHooks;y!==null&&bd(e,y,1),$m(e,1)}aF(t,e);let h=t.components;h!==null&&iM(e,h,0);let m=t.viewQuery;if(m!==null&&vg(2,m,r),!o)if(d){let y=t.viewCheckHooks;y!==null&&wd(e,y)}else{let y=t.viewHooks;y!==null&&bd(e,y,2),$m(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bm]){for(let y of e[Bm])y();e[Bm]=null}o||(e[ge]&=-73)}catch(d){throw o||sf(e),d}finally{u!==null&&(GC(u,c),a&&jF(u)),iy()}}function nM(t,e){for(let n=bx(t);n!==null;n=Cx(n))for(let r=bn;r<n.length;r++){let i=n[r];rM(i,e)}}function WF(t){for(let e=bx(t);e!==null;e=Cx(e)){if(!(e[ge]&Pd.HasTransplantedViews))continue;let n=e[qs];for(let r=0;r<n.length;r++){let i=n[r];zE(i)}}}function KF(t,e,n){let r=Oi(e,t);rM(r,n)}function rM(t,e){Xg(t)&&wg(t,e)}function wg(t,e){let r=t[Ie],i=t[ge],o=t[An],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&pm(o)),s||=!1,o&&(o.dirty=!1),t[ge]&=-9217,s)GF(r,t,r.template,t[Yn]);else if(i&8192){nM(t,1);let a=r.components;a!==null&&iM(t,a,1)}}function iM(t,e,n){for(let r=0;r<e.length;r++)KF(t,e[r],n)}function Ty(t,e){let n=YE()?64:1088;for(t[vr].changeDetectionScheduler?.notify(e);t;){t[ge]|=n;let r=Do(t);if(rg(t)&&!r)return t;t=r}return null}var Ao=class{get rootNodes(){let e=this._lView,n=e[Ie];return Bd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yn]}set context(e){this._lView[Yn]=e}get destroyed(){return(this._lView[ge]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Gt];if(Wr(e)){let n=e[Sd],r=n?n.indexOf(this):-1;r>-1&&(gg(e,r),Md(n,r))}this._attachedToViewContainer=!1}kx(this._lView[Ie],this._lView)}onDestroy(e){qE(this._lView,e)}markForCheck(){Ty(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){og(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,tM(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=rg(this._lView),n=this._lView[Mo];n!==null&&!e&&yy(n,this._lView),Px(this._lView[Ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e;let n=rg(this._lView),r=this._lView[Mo];r!==null&&!n&&Ax(r,this._lView),og(this._lView)}},ko=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ZF;let t=e;return t})(),YF=ko,QF=class extends YF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=NF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ao(i)}};function ZF(){return Dy(on(),Ue())}function Dy(t,e){return t.type&4?new QF(e,t,Js(t,e)):null}var GG=new RegExp(`^(\\d+)*(${DN}|${TN})*(.*)`);var XF=()=>null;function QI(t,e){return XF(t,e)}var Gs=class{},oM=new ne("",{providedIn:"root",factory:()=>!1});var sM=new ne(""),aM=new ne(""),bg=class{},$d=class{};function JF(t){let e=Error(`No component factory found for ${pn(t)}.`);return e[e2]=t,e}var e2="ngComponent";var Cg=class{resolveComponentFactory(e){throw JF(e)}},qy=class qy{};qy.NULL=new Cg;var Ws=qy,Ks=class{},Kt=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>t2();let t=e;return t})();function t2(){let t=Ue(),e=on(),n=Oi(e.index,t);return(bi(n)?n:t)[At]}var n2=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var ZI=new Set;function Oy(t){ZI.has(t)||(ZI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var hn=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(hn||{}),r2={destroy(){}};function Sy(t,e){!e&&vR(Sy);let n=e?.injector??G(mn);return jN(n)?(Oy("NgAfterNextRender"),o2(t,n,!0,e?.phase??hn.MixedReadWrite)):r2}function i2(t,e){if(t instanceof Function)switch(e){case hn.EarlyRead:return{earlyRead:t};case hn.Write:return{write:t};case hn.MixedReadWrite:return{mixedReadWrite:t};case hn.Read:return{read:t}}return t}function o2(t,e,n,r){let i=i2(t,r),o=e.get(Py),s=o.handler??=new Eg,a=[],c=[],u=()=>{for(let y of c)s.unregister(y);d()},d=e.get(ly).onDestroy(u),h=0,m=(y,M)=>{if(!M)return;let A=n?(...z)=>(h--,h<1&&u(),M(...z)):M,P=Zn(e,()=>new Ig(y,a,A));s.register(P),c.push(P),h++};return m(hn.EarlyRead,i.earlyRead),m(hn.Write,i.write),m(hn.MixedReadWrite,i.mixedReadWrite),m(hn.Read,i.read),{destroy:u}}var Ig=class{constructor(e,n,r){this.phase=e,this.pipelinedArgs=n,this.callbackFn=r,this.zone=G(De),this.errorHandler=G(Hr,{optional:!0}),G(Gs,{optional:!0})?.notify(6)}invoke(){try{let e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}},Eg=class{constructor(){this.executingCallbacks=!1,this.buckets={[hn.EarlyRead]:new Set,[hn.Write]:new Set,[hn.MixedReadWrite]:new Set,[hn.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Py=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function zd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=II(i,a);else if(o==2){let c=a,u=e[++s];r=II(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var qd=class extends Ws{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ii(e);return new Ys(n,this.ngModule)}};function XI(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Ci.None;e?n.push({propName:s,templateName:r,isSignal:(a&Ci.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function s2(t){let e=t.toLowerCase();return e==="svg"?xR:e==="math"?MR:null}var Ys=class extends $d{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=XI(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return XI(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=rR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=$e(null);try{i=i||this.ngModule;let s=i instanceof Cn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ag(e,s):e,c=a.get(Ks,null);if(c===null)throw new de(407,!1);let u=a.get(n2,null),d=a.get(Py,null),h=a.get(Gs,null),m={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:h},y=c.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",A=r?uF(y,r,this.componentDef.encapsulation,a):Sx(y,M,s2(M)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let z=null;A!==null&&(z=py(A,a,!0));let W=Cy(0,null,null,1,0,null,null,null,null,null,null),j=mf(null,W,null,P,null,null,m,y,a,null,z);ry(j);let Y,le;try{let ie=this.componentDef,x,w=null;ie.findHostDirectiveDefs?(x=[],w=new Map,ie.findHostDirectiveDefs(ie,x,w),x.push(ie)):x=[ie];let C=a2(j,A),T=c2(C,A,ie,x,j,m,y);le=BE(W,Qn),A&&d2(y,ie,A,r),n!==void 0&&f2(le,this.ngContentSelectors,n),Y=u2(T,ie,x,w,j,[h2]),My(W,j,null)}finally{iy()}return new xg(this.componentType,Y,Js(le,j),j,le)}finally{$e(o)}}},xg=class extends bg{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ao(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Ey(o[Ie],o,i,e,n),this.previousInputValues.set(e,n);let s=Oi(this._tNode.index,o);Ty(s,1)}}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function a2(t,e){let n=t[Ie],r=Qn;return t[r]=e,Zc(n,r,2,"#host",null)}function c2(t,e,n,r,i,o,s){let a=i[Ie];l2(r,t,e,s);let c=null;e!==null&&(c=py(e,i[zs]));let u=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let h=mf(i,qx(n),null,d,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&_g(a,t,r.length-1),gf(i,h),i[t.index]=h}function l2(t,e,n,r){for(let i of t)e.mergedAttrs=Gg(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(zd(e,e.mergedAttrs,!0),n!==null&&Vx(r,n,e))}function u2(t,e,n,r,i,o){let s=on(),a=i[Ie],c=kn(s,i);Gx(a,i,s,n,null,r);for(let d=0;d<n.length;d++){let h=s.directiveStart+d,m=Po(i,a,h,s);Ei(m,i)}Wx(a,i,s),c&&Ei(c,i);let u=Po(i,a,s.directiveStart+s.componentOffset,s);if(t[Yn]=i[Yn]=u,o!==null)for(let d of o)d(u,e);return vy(a,s,i),u}function d2(t,e,n,r){if(r)Jm(t,n,["ng-version","18.2.1"]);else{let{attrs:i,classes:o}=iR(e.selectors[0]);i&&Jm(t,n,i),o&&o.length>0&&Lx(t,n,o.join(" "))}}function f2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function h2(){let t=on();lf(Ue()[Ie],t)}var Pi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=p2;let t=e;return t})();function p2(){let t=on();return lM(t,Ue())}var m2=Pi,cM=class extends m2{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Js(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){let e=sy(this._hostTNode,this._hostLView);if(sx(e)){let n=kd(e,this._hostLView),r=Ad(e),i=n[Ie].data[r+8];return new Eo(i,n)}else return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=JI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-bn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=QI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,YI(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!bR(e),a;if(s)a=n;else{let M=n||{};a=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let c=s?e:new Ys(Ii(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let A=(s?u:this.parentInjector).get(Cn,null);A&&(o=A)}let d=Ii(c.componentType??{}),h=QI(this._lContainer,d?.id??null),m=h?.firstChild??null,y=c.create(u,i,m,o);return this.insertImpl(y.hostView,a,YI(this._hostTNode,h)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(SR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Gt],u=new cM(c,c[Xn],c[Gt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return FF(s,i,o,r),e.attachToViewContainerRef(),_E(Wm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=JI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=gg(this._lContainer,n);r&&(Md(Wm(this._lContainer),n),kx(r[Ie],r))}detach(e){let n=this._adjustIndex(e,-1),r=gg(this._lContainer,n);return r&&Md(Wm(this._lContainer),n)!=null?new Ao(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function JI(t){return t[Sd]}function Wm(t){return t[Sd]||(t[Sd]=[])}function lM(t,e){let n,r=e[t.index];return Wr(r)?n=r:(n=Kx(r,e,null,t),e[t.index]=n,gf(e,n)),y2(n,e,t,r),new cM(n,t,e)}function g2(t,e){let n=t[At],r=n.createComment(""),i=kn(e,t),o=Nx(n,i);return jd(n,o,r,JN(n,i),!1),r}var y2=w2,_2=()=>!1;function v2(t,e,n){return _2(t,e,n)}function w2(t,e,n,r){if(t[To])return;let i;n.type&8?i=br(r):i=g2(e,n),t[To]=i}var Mg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Tg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Ay(e,n).matches!==null&&this.queries[n].setDirty()}},Dg=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=D2(e):this.predicate=e}},Og=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Sg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,b2(n,o)),this.matchTNodeWithReadOption(e,n,Cd(n,e,o,!1,!1))}else r===ko?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Cd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Cr||i===Pi||i===ko&&n.type&4)this.addMatch(n.index,-2);else{let o=Cd(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function b2(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function C2(t,e){return t.type&11?Js(t,e):t.type&4?Dy(t,e):null}function I2(t,e,n,r){return n===-1?C2(e,t):n===-2?E2(t,e,r):Po(t,t[Ie],n,e)}function E2(t,e,n){if(n===Cr)return Js(e,t);if(n===ko)return Dy(e,t);if(n===Pi)return lM(e,t)}function uM(t,e,n,r){let i=e[qr].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(I2(e,d,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Pg(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=uM(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let h=bn;h<d.length;h++){let m=d[h];m[Mo]===m[Gt]&&Pg(m[Ie],m,u,r)}if(d[qs]!==null){let h=d[qs];for(let m=0;m<h.length;m++){let y=h[m];Pg(y[Ie],y,u,r)}}}}}return r}function x2(t,e){return t[qr].queries[e].queryList}function M2(t,e,n){let r=new pg((n&4)===4);return hF(t,e,r,r.destroy),(e[qr]??=new Tg).queries.push(new Mg(r))-1}function T2(t,e,n){let r=Wt();return r.firstCreatePass&&(O2(r,new Dg(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),M2(r,Ue(),e)}function D2(t){return t.split(",").map(e=>e.trim())}function O2(t,e,n){t.queries===null&&(t.queries=new Og),t.queries.track(new Sg(e,n))}function Ay(t,e){return t.queries.getByIndex(e)}function S2(t,e){let n=t[Ie],r=Ay(n,e);return r.crossesNgTemplate?Pg(n,t,e,[]):uM(n,t,r,e)}function P2(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(N2))}return o}return Hd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,m)=>{a.push(""),s.push(r(h).then(y=>{a[u+m]=y,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>F2(o));e.push(c)}),k2(),Promise.all(e).then(()=>{})}var Hd=new Map,A2=new Set;function k2(){let t=Hd;return Hd=new Map,t}function R2(){return Hd.size===0}function N2(t){return typeof t=="string"?t:t.text()}function F2(t){A2.delete(t)}function ky(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var xi=class{},Kc=class{};var Gd=class extends xi{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qd(this);let o=TE(e);this._bootstrapComponents=Ox(o.bootstrap),this._r3Injector=mx(e,n,[{provide:xi,useValue:this},{provide:Ws,useValue:this.componentFactoryResolver},...r],pn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wd=class extends Kc{constructor(e){super(),this.moduleType=e}create(e){return new Gd(this.moduleType,e,[])}};function L2(t,e,n){return new Gd(t,e,n,!1)}var Ag=class extends xi{constructor(e){super(),this.componentFactoryResolver=new qd(this),this.instance=null;let n=new Hc([...e.providers,{provide:xi,useValue:this},{provide:Ws,useValue:this.componentFactoryResolver}],e.parent||Qg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function yf(t,e,n=null){return new Ag({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function dM(t){return Ry(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function V2(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Ry(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function fM(t,e,n){return t[e]=n}function U2(t,e){return t[e]}function Mi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Kd(t,e,n,r){let i=Mi(t,e,n);return Mi(t,e+1,r)||i}function j2(t,e,n,r,i){let o=Kd(t,e,n,r);return Mi(t,e+2,i)||o}function B2(t,e,n,r,i,o){let s=Kd(t,e,n,r);return Kd(t,e+2,i,o)||s}function $2(t){return(t.flags&32)===32}function z2(t,e,n,r,i,o,s,a,c){let u=e.consts,d=Zc(e,t,4,s||null,a||null);Iy(e,n,d,Hs(u,c)),lf(e,d);let h=d.tView=Cy(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function q2(t,e,n,r,i,o,s,a,c,u){let d=n+Qn,h=e.firstCreatePass?z2(d,e,t,r,i,o,s,a,c):e.data[d];Fo(h,!1);let m=H2(e,t,h,n);af()&&hf(e,t,m,h),Ei(m,t);let y=Kx(m,t,m,h);return t[d]=y,gf(t,y),v2(y,h,t),of(h)&&wy(e,t,h),c!=null&&by(t,h,u),h}function ae(t,e,n,r,i,o,s,a){let c=Ue(),u=Wt(),d=Hs(u.consts,o);return q2(c,u,t,e,n,r,i,d,s,a),ae}var H2=G2;function G2(t,e,n,r){return cf(!0),e[At].createComment("")}function Ny(t,e,n,r){let i=Ue(),o=ty();if(Mi(i,o,e)){let s=Wt(),a=oy();DF(a,i,t,e,n,r)}return Ny}function hM(t,e,n,r){return Mi(t,ty(),n)?e+zr(n)+r:Ir}function W2(t,e,n,r,i,o){let s=QE(),a=Kd(t,s,n,i);return ZE(2),a?e+zr(n)+r+zr(i)+o:Ir}function K2(t,e,n,r,i,o,s,a){let c=QE(),u=j2(t,c,n,i,s);return ZE(3),u?e+zr(n)+r+zr(i)+o+zr(s)+a:Ir}function L(t,e,n){let r=Ue(),i=ty();if(Mi(r,i,e)){let o=Wt(),s=oy();Hx(o,s,r,t,e,r[At],n,!1)}return L}function eE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Ey(t,n,o[s],s,r)}function Y2(t,e,n,r,i,o){let s=e.consts,a=Hs(s,i),c=Zc(e,t,2,r,a);return Iy(e,n,c,Hs(s,o)),c.attrs!==null&&zd(c,c.attrs,!1),c.mergedAttrs!==null&&zd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function v(t,e,n,r){let i=Ue(),o=Wt(),s=Qn+t,a=i[At],c=o.firstCreatePass?Y2(s,o,i,e,n,r):o.data[s],u=Q2(o,i,c,a,e,t);i[s]=u;let d=of(c);return Fo(c,!0),Vx(a,u,c),!$2(c)&&af()&&hf(o,i,u,c),kR()===0&&Ei(u,i),RR(),d&&(wy(o,i,c),vy(o,c,i)),r!==null&&by(i,c),v}function _(){let t=on();Jg()?KE():(t=t.parent,Fo(t,!1));let e=t;LR(e)&&VR(),NR();let n=Wt();return n.firstCreatePass&&(lf(n,t),Zg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&QR(e)&&eE(n,e,Ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ZR(e)&&eE(n,e,Ue(),e.stylesWithoutHost,!1),_}function U(t,e,n,r){return v(t,e,n,r),_(),U}var Q2=(t,e,n,r,i,o)=>(cf(!0),Sx(r,i,GR()));function Z2(t,e,n,r,i){let o=e.consts,s=Hs(o,r),a=Zc(e,t,8,"ng-container",s);s!==null&&zd(a,s,!0);let c=Hs(o,i);return Iy(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Jn(t,e,n){let r=Ue(),i=Wt(),o=t+Qn,s=i.firstCreatePass?Z2(o,i,r,e,n):i.data[o];Fo(s,!0);let a=X2(i,r,s,t);return r[o]=a,af()&&hf(i,r,a,s),Ei(a,r),of(s)&&(wy(i,r,s),vy(i,s,r)),n!=null&&by(r,s),Jn}function er(){let t=on(),e=Wt();return Jg()?KE():(t=t.parent,Fo(t,!1)),e.firstCreatePass&&(lf(e,t),Zg(t)&&e.queries.elementEnd(t)),er}var X2=(t,e,n,r)=>(cf(!0),qN(e[At],""));function at(){return Ue()}var Yd="en-US";var J2=Yd;function eL(t){typeof t=="string"&&(J2=t.toLowerCase().replace(/_/g,"-"))}var tL=(t,e,n)=>{};function Q(t,e,n,r){let i=Ue(),o=Wt(),s=on();return rL(o,i,i[At],s,t,e,r),Q}function nL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Od],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function rL(t,e,n,r,i,o,s){let a=of(r),u=t.firstCreatePass&&Zx(t),d=e[Yn],h=Qx(e),m=!0;if(r.type&3||s){let A=kn(r,e),P=s?s(A):A,z=h.length,W=s?Y=>s(br(Y[r.index])):r.index,j=null;if(!s&&a&&(j=nL(t,e,i,r.index)),j!==null){let Y=j.__ngLastListenerFn__||j;Y.__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,m=!1}else{o=nE(r,e,d,o),tL(A,i,o);let Y=n.listen(P,i,o);h.push(o,Y),u&&u.push(i,W,z,z+1)}}else o=nE(r,e,d,o);let y=r.outputs,M;if(m&&y!==null&&(M=y[i])){let A=M.length;if(A)for(let P=0;P<A;P+=2){let z=M[P],W=M[P+1],le=e[z][W].subscribe(o),ie=h.length;h.push(o,le),u&&u.push(i,r.index,ie,-(ie+1))}}}function tE(t,e,n,r){let i=$e(null);try{return gr(6,e,n),n(r)!==!1}catch(o){return Xx(t,o),!1}finally{gr(7,e,n),$e(i)}}function nE(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Oi(t.index,e):e;Ty(s,5);let a=tE(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=tE(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Z(t=1){return HR(t)}function Ai(t,e,n){return pM(t,"",e,"",n),Ai}function pM(t,e,n,r,i){let o=Ue(),s=hM(o,e,n,r);if(s!==Ir){let a=Wt(),c=oy();Hx(a,c,o,t,s,o[At],i,!1)}return pM}function Lo(t,e,n){T2(t,e,n)}function ki(t){let e=Ue(),n=Wt(),r=XE();ny(r+1);let i=Ay(n,r);if(t.dirty&&OR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=S2(e,r);t.reset(o,vN),t.notifyOnChanges()}return!0}return!1}function Ri(){return x2(Ue(),XE())}function iL(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function E(t,e=""){let n=Ue(),r=Wt(),i=t+Qn,o=r.firstCreatePass?Zc(r,i,1,e,null):r.data[i],s=oL(r,n,o,e,t);n[i]=s,af()&&hf(r,n,s,o),Fo(o,!1)}var oL=(t,e,n,r,i)=>(cf(!0),$N(e[At],r));function he(t){return tt("",t,""),he}function tt(t,e,n){let r=Ue(),i=hM(r,t,e,n);return i!==Ir&&xy(r,Qc(),i),tt}function Lt(t,e,n,r,i){let o=Ue(),s=W2(o,t,e,n,r,i);return s!==Ir&&xy(o,Qc(),s),Lt}function In(t,e,n,r,i,o,s){let a=Ue(),c=K2(a,t,e,n,r,i,o,s);return c!==Ir&&xy(a,Qc(),c),In}function sL(t,e,n){let r=Wt();if(r.firstCreatePass){let i=Zs(t);kg(n,r.data,r.blueprint,i,!0),kg(e,r.data,r.blueprint,i,!1)}}function kg(t,e,n,r,i){if(t=rn(t),Array.isArray(t))for(let o=0;o<t.length;o++)kg(t[o],e,n,r,i);else{let o=Wt(),s=Ue(),a=on(),c=$s(t)?t:rn(t.provide),u=kE(t),d=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if($s(t)||!t.multi){let y=new So(u,i,q),M=Ym(c,e,i?d:d+m,h);M===-1?(lg(Nd(a,s),o,c),Km(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[M]=y,s[M]=y)}else{let y=Ym(c,e,d+m,h),M=Ym(c,e,d,d+m),A=y>=0&&n[y],P=M>=0&&n[M];if(i&&!P||!i&&!A){lg(Nd(a,s),o,c);let z=lL(i?cL:aL,n.length,i,r,u);!i&&P&&(n[M].providerFactory=z),Km(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(z),s.push(z)}else{let z=mM(n[i?M:y],u,!i&&r);Km(o,t,y>-1?y:M,z)}!i&&r&&P&&n[M].componentProviders++}}}function Km(t,e,n,r){let i=$s(e),o=fR(e);if(i||o){let c=(o?rn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(n);d===-1?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function mM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ym(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function aL(t,e,n,r){return Rg(this.multi,[])}function cL(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Po(n,n[Ie],this.providerFactory.index,r);o=a.slice(0,s),Rg(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Rg(i,o);return o}function Rg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function lL(t,e,n,r,i){let o=new So(t,n,q);return o.multi=[],o.index=e,o.componentProviders=0,mM(o,i,r&&!n),o}function gM(t,e=[]){return n=>{n.providersResolver=(r,i)=>sL(r,i?i(t):t,e)}}var uL=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=SE(!1,r.type),o=i.length>0?yf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ee({token:e,providedIn:"environment",factory:()=>new e(V(Cn))});let t=e;return t})();function yM(t){Oy("NgStandalone"),t.getStandaloneInjector=e=>e.get(uL).getOrCreateStandaloneInjector(t)}function _M(t,e,n,r){return vM(Ue(),ey(),t,e,n,r)}function _f(t,e,n,r,i,o,s,a){let c=ey()+t,u=Ue(),d=B2(u,c,n,r,i,o);return Mi(u,c+4,s)||d?fM(u,c+5,a?e.call(a,n,r,i,o,s):e(n,r,i,o,s)):U2(u,c+5)}function dL(t,e){let n=t[e];return n===Ir?void 0:n}function vM(t,e,n,r,i,o){let s=e+n;return Mi(t,s,i)?fM(t,s+1,o?r.call(o,i):r(i)):dL(t,s+1)}function ea(t,e){let n=Wt(),r,i=t+Qn;n.firstCreatePass?(r=fL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=xo(r.type,!0)),s,a=fn(q);try{let c=Rd(!1),u=o();return Rd(c),iL(n,Ue(),i,u),u}finally{fn(a)}}function fL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ta(t,e,n){let r=t+Qn,i=Ue(),o=DR(i,r);return hL(i,r)?vM(i,ey(),e,o.transform,n,o):o.transform(n)}function hL(t,e){return t[Ie].data[e].pure}var yd=null;function pL(t){yd!==null&&(t.defaultEncapsulation!==yd.defaultEncapsulation||t.preserveWhitespaces!==yd.preserveWhitespaces)||(yd=t)}var Ti=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},wM=new Ti("18.2.1");var vf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Fy=new ne(""),Xc=new ne(""),wf=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Ly||(mL(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(V(De),V(bf),V(Xc))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),bf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Ly?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function mL(t){Ly=t}var Ly;function Jc(t){return!!t&&typeof t.then=="function"}function bM(t){return!!t&&typeof t.subscribe=="function"}var na=new ne(""),CM=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=G(na,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Jc(s))r.push(s);else if(bM(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vy=new ne("");function gL(){WC(()=>{throw new de(600,!1)})}function yL(t){return t.isBoundToModule}var _L=10;function vL(t,e,n){try{let r=n();return Jc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function IM(t,e){return Array.isArray(e)?e.reduce(IM,t):te(te({},t),e)}var tr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(yN),this.afterRenderEffectManager=G(Py),this.zonelessEnabled=G(oM),this.externalTestViews=new Set,this.beforeRender=new We,this.afterTick=new We,this.componentTypes=[],this.components=[],this.isStable=G(Xs).hasPendingTasks.pipe(oe(r=>!r)),this._injector=G(Cn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof $d;if(!this._injector.get(CM).done){let y=!o&&ME(r),M=!1;throw new de(405,M)}let a;o?a=r:a=this._injector.get(Ws).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=yL(a)?void 0:this._injector.get(xi),u=i||a.selector,d=a.create(mn.NULL,[],u,c),h=d.location.nativeElement,m=d.injector.get(Fy,null);return m?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Id(this.components,d),m?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new de(101,!1);let i=$e(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,$e(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Ks,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<_L;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)wL(c,u,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Wc(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>Wc(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Id(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Vy,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Id(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new de(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Id(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function wL(t,e,n,r){if(!n&&!Wc(t))return;tM(t,e,n&&!r?0:1)}var Ng=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Cf=(()=>{let e=class e{compileModuleSync(r){return new Wd(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=TE(r),s=Ox(o.declarations).reduce((a,c)=>{let u=Ii(c);return u&&a.push(new Ys(u)),a},[]);return new Ng(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bL=new ne("");function CL(t,e,n){let r=new Wd(n);return Promise.resolve(r)}function rE(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var IL=(()=>{let e=class e{constructor(){this.zone=G(De),this.changeDetectionScheduler=G(Gs),this.applicationRef=G(tr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EL({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new De(Je(te({},EM()),{scheduleInRootZone:n})),[{provide:De,useFactory:t},{provide:Bs,multi:!0,useFactory:()=>{let r=G(IL,{optional:!0});return()=>r.initialize()}},{provide:Bs,multi:!0,useFactory:()=>{let r=G(xL);return()=>{r.initialize()}}},e===!0?{provide:sM,useValue:!0}:[],{provide:aM,useValue:n??gx}]}function EM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var xL=(()=>{let e=class e{constructor(){this.subscription=new ht,this.initialized=!1,this.zone=G(De),this.pendingTasks=G(Xs)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ML=(()=>{let e=class e{constructor(){this.appRef=G(tr),this.taskService=G(Xs),this.ngZone=G(De),this.zonelessEnabled=G(oM),this.disableScheduling=G(sM,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ht,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ld):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(aM,{optional:!0})??!1),this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Vd||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?jI:yx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick(this.shouldRefreshViews))):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick(this.shouldRefreshViews)))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ld+this.angularZoneId))}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,jI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TL(){return typeof $localize<"u"&&$localize.locale||Yd}var Uy=new ne("",{providedIn:"root",factory:()=>G(Uy,xe.Optional|xe.SkipSelf)||TL()});var jy=new ne("");function _d(t){return!!t.platformInjector}function DL(t){let e=_d(t)?t.r3Injector:t.moduleRef.injector,n=e.get(De);return n.run(()=>{_d(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Hr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),_d(t)){let o=()=>e.destroy(),s=t.platformInjector.get(jy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else t.moduleRef.onDestroy(()=>{Id(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return vL(r,n,()=>{let o=e.get(CM);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Uy,Yd);if(eL(s||Yd),_d(t)){let a=e.get(tr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return OL(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function OL(t,e){let n=t.injector.get(tr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new de(-403,!1);e.push(t)}var xM=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=i?.scheduleInRootZone,s=()=>gN(i?.ngZone,Je(te({},EM({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:o})),a=i?.ignoreChangesOutsideZone,c=[EL({ngZoneFactory:s,ignoreChangesOutsideZone:a}),{provide:Gs,useExisting:ML}],u=L2(r.moduleType,this.injector,c);return DL({moduleRef:u,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let o=IM({},i);return CL(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(jy,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(V(mn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),$c=null,MM=new ne("");function SL(t){if($c&&!$c.get(MM,!1))throw new de(400,!1);gL(),$c=t;let e=t.get(xM);return kL(t),e}function By(t,e,n=[]){let r=`Platform: ${e}`,i=new ne(r);return(o=[])=>{let s=TM();if(!s||s.injector.get(MM,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):SL(PL(a,r))}return AL(i)}}function PL(t=[],e){return mn.create({name:e,providers:[{provide:tf,useValue:"platform"},{provide:jy,useValue:new Set([()=>$c=null])},...t]})}function AL(t){let e=TM();if(!e)throw new de(401,!1);return e}function TM(){return $c?.get(xM)??null}function kL(t){t.get(fy,null)?.forEach(n=>n())}function $y(){return!1}var ra=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=RL;let t=e;return t})();function RL(t){return NL(on(),Ue(),(t&16)===16)}function NL(t,e,n){if(rf(t)&&!n){let r=Oi(t.index,e);return new Ao(r,r)}else if(t.type&175){let r=e[wr];return new Ao(r,e)}return null}var Fg=class{constructor(){}supports(e){return dM(e)}create(e){return new Lg(e)}},FL=(t,e)=>e,Lg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||FL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<iE(r,i,o)?n:r,a=iE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let y=m<o.length?o[m]:o[m]=0,M=y+m;d<=M&&M<u&&(o[m]=y+1)}let h=s.previousIndex;o[h]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!dM(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,V2(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Vg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Vg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ug=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Qd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Ug,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function iE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var jg=class{constructor(){}supports(e){return e instanceof Map||Ry(e)}create(){return new Bg}},Bg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Ry(e)))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new $g(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},$g=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function oE(){return new zy([new Fg])}var zy=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||oE()),deps:[[e,new Jd,new Ro]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new de(901,!1)}};e.\u0275prov=ee({token:e,providedIn:"root",factory:oE});let t=e;return t})();function sE(){return new If([new jg])}var If=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||sE()),deps:[[e,new Jd,new Ro]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i)return i;throw new de(901,!1)}};e.\u0275prov=ee({token:e,providedIn:"root",factory:sE});let t=e;return t})();var DM=By(null,"core",[]),OM=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(V(tr))},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({});let t=e;return t})();var SM=new ne("");function el(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function PM(t){let e=Ii(t);if(!e)return null;let n=new Ys(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var VM=null;function Vo(){return VM}function UM(t){VM??=t}var Ef=class{};var sn=new ne(""),Qy=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>G(LL),providedIn:"platform"});let t=e;return t})(),jM=new ne(""),LL=(()=>{let e=class e extends Qy{constructor(){super(),this._doc=G(sn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vo().getBaseHref(this._doc)}onPopState(r){let i=Vo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Vo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Zy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function AM(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Kr(t){return t&&t[0]!=="?"?"?"+t:t}var Yr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>G(Xy),providedIn:"root"});let t=e;return t})(),BM=new ne(""),Xy=(()=>{let e=class e extends Yr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??G(sn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Zy(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Kr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Kr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Kr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(Qy),V(BM,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$M=(()=>{let e=class e extends Yr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Zy(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Kr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Kr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(Qy),V(BM,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),Ni=(()=>{let e=class e{constructor(r){this._subject=new st,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=jL(AM(kM(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Kr(i))}normalize(r){return e.stripTrailingSlash(UL(this._basePath,kM(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Kr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Kr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Kr,e.joinWithSlash=Zy,e.stripTrailingSlash=AM,e.\u0275fac=function(i){return new(i||e)(V(Yr))},e.\u0275prov=ee({token:e,factory:()=>VL(),providedIn:"root"});let t=e;return t})();function VL(){return new Ni(V(Yr))}function UL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function kM(t){return t.replace(/\/index.html$/,"")}function jL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function zM(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Hy=/\s+/,RM=[],Mf=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=RM,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Hy):RM}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Hy):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Hy).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(q(Cr),q(Kt))},e.\u0275dir=Di({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Gy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},kt=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Gy(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),NM(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);NM(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(Pi),q(ko),q(zy))},e.\u0275dir=Di({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function NM(t,e){t.context.$implicit=e.item}var Ke=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Wy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){FM("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){FM("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(Pi),q(ko))},e.\u0275dir=Di({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Wy=class{constructor(){this.$implicit=null,this.ngIf=null}};function FM(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${pn(e)}'.`)}var qM=(()=>{let e=class e{constructor(r,i,o){this._ngEl=r,this._differs=i,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[o,s]=r.split("."),a=o.indexOf("-")===-1?void 0:Si.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${i}${s}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(q(Cr),q(If),q(Kt))},e.\u0275dir=Di({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})();function BL(t,e){return{key:t,value:e}}var ia=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=LM}transform(r,i=LM){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let o=this.differ.diff(r),s=i!==this.compareFn;return o&&(this.keyValues=[],o.forEachItem(a=>{this.keyValues.push(BL(a.key,a.currentValue))})),(o||s)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)(q(If,16))},e.\u0275pipe=Kg({name:"keyvalue",type:e,pure:!1,standalone:!0});let t=e;return t})();function LM(t,e){let n=t.key,r=e.key;if(n===r)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(n===null)return 1;if(r===null)return-1;if(typeof n=="string"&&typeof r=="string")return n<r?-1:1;if(typeof n=="number"&&typeof r=="number")return n-r;if(typeof n=="boolean"&&typeof r=="boolean")return n<r?-1:1;let i=String(n),o=String(r);return i==o?0:i<o?-1:1}var HM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({});let t=e;return t})(),Jy="browser",$L="server";function Tf(t){return t===Jy}function Uo(t){return t===$L}var GM=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>Tf(G(Ot))?new Ky(G(sn),window):new Yy});let t=e;return t})(),Ky=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=zL(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function zL(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Yy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},xf=class{};var n0=class extends Ef{constructor(){super(...arguments),this.supportsDOMEvents=!0}},r0=class t extends n0{static makeCurrent(){UM(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=qL();return n==null?null:HL(n)}resetBaseElement(){tl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zM(document.cookie,e)}},tl=null;function qL(){return tl=tl||document.querySelector("base"),tl?tl.getAttribute("href"):null}function HL(t){return new URL(t,document.baseURI).pathname}var i0=class{addToWindow(e){Kn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new de(5103,!1);return o},Kn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kn.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Kn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Kn.frameworkStabilizers||(Kn.frameworkStabilizers=[]),Kn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Vo().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},GL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),Df=new ne(""),QM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new de(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(V(Df),V(De))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),nl=class{constructor(e){this._doc=e}},e0="ng-app-id",ZM=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Uo(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${e0}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(e0),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(e0,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(V(sn),V(uf),V(hy,8),V(Ot))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),t0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},s0=/%COMP%/g,XM="%COMP%",WL=`_nghost-${XM}`,KL=`_ngcontent-${XM}`,YL=!0,QL=new ne("",{providedIn:"root",factory:()=>YL});function ZL(t){return KL.replace(s0,t)}function XL(t){return WL.replace(s0,t)}function JM(t,e){return e.map(n=>n.replace(s0,t))}var WM=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Uo(c),this.defaultRenderer=new rl(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===_r.ShadowDom&&(i=Je(te({},i),{encapsulation:_r.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Of?o.applyToHost(r):o instanceof il&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case _r.Emulated:s=new Of(u,d,i,this.appId,h,a,c,m);break;case _r.ShadowDom:return new o0(u,d,r,i,a,c,this.nonce,m);default:s=new il(u,d,i,h,a,c,m);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(V(QM),V(ZM),V(uf),V(QL),V(sn),V(Ot),V(De),V(hy))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),rl=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(t0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(KM(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(KM(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=t0[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=t0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Si.DashCase|Si.Important)?e.style.setProperty(n,r,i&Si.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Si.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Vo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function KM(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var o0=class extends rl{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=JM(i.id,i.styles);for(let d of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},il=class extends rl{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?JM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Of=class extends il{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=ZL(u),this.hostAttr=XL(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},JL=(()=>{let e=class e extends nl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(V(sn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),eV=(()=>{let e=class e extends nl{constructor(r){super(r),this.delegate=G(SM,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(V(sn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),YM=["alt","control","meta","shift"],tV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rV=(()=>{let e=class e extends nl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vo().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),YM.forEach(d=>{let h=i.indexOf(d);h>-1&&(i.splice(h,1),a+=d+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=tV[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),YM.forEach(a=>{if(a!==o){let c=nV[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(V(sn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function iV(){r0.makeCurrent()}function oV(){return new Hr}function sV(){return Ex(document),document}var aV=[{provide:Ot,useValue:Jy},{provide:fy,useValue:iV,multi:!0},{provide:sn,useFactory:sV,deps:[]}],eT=By(DM,"browser",aV),cV=new ne(""),lV=[{provide:Xc,useClass:i0,deps:[]},{provide:Fy,useClass:wf,deps:[De,bf,Xc]},{provide:wf,useClass:wf,deps:[De,bf,Xc]}],uV=[{provide:tf,useValue:"root"},{provide:Hr,useFactory:oV,deps:[]},{provide:Df,useClass:JL,multi:!0,deps:[sn,De,Ot]},{provide:Df,useClass:rV,multi:!0,deps:[sn]},{provide:Df,useClass:eV,multi:!0},WM,ZM,QM,{provide:Ks,useExisting:WM},{provide:xf,useClass:GL,deps:[]},[]],gn=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:uf,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(V(cV,12))},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({providers:[...uV,...lV],imports:[HM,OM]});let t=e;return t})();var tT=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(V(sn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ee="primary",_l=Symbol("RouteTitle"),d0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ua(t){return new d0(t)}function dV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function fV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Er(t[n],e[n]))return!1;return!0}function Er(t,e){let n=t?f0(t):void 0,r=e?f0(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!hT(t[i],e[i]))return!1;return!0}function f0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function hT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function pT(t){return t.length>0?t[t.length-1]:null}function Vi(t){return Pm(t)?t:Jc(t)?Te(Promise.resolve(t)):se(t)}var hV={exact:gT,subset:yT},mT={exact:pV,subset:mV,ignored:()=>!0};function rT(t,e,n){return hV[n.paths](t.root,e.root,n.matrixParams)&&mT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function pV(t,e){return Er(t,e)}function gT(t,e,n){if(!Bo(t.segments,e.segments)||!Af(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!gT(t.children[r],e.children[r],n))return!1;return!0}function mV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>hT(t[n],e[n]))}function yT(t,e,n){return _T(t,e,e.segments,n)}function _T(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Bo(i,n)||e.hasChildren()||!Af(i,n,r))}else if(t.segments.length===n.length){if(!Bo(t.segments,n)||!Af(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!yT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Bo(t.segments,i)||!Af(t.segments,i,r)||!t.children[Ee]?!1:_T(t.children[Ee],e,o,r)}}function Af(t,e,n){return e.every((r,i)=>mT[n](t[i].parameters,r.parameters))}var Zr=class{constructor(e=new qe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ua(this.queryParams),this._queryParamMap}toString(){return _V.serialize(this)}},qe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kf(this)}},jo=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ua(this.parameters),this._parameterMap}toString(){return wT(this)}};function gV(t,e){return Bo(t,e)&&t.every((n,r)=>Er(n.parameters,e[r].parameters))}function Bo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function yV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ee&&(n=n.concat(e(i,r)))}),n}var vl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>new da,providedIn:"root"});let t=e;return t})(),da=class{parse(e){let n=new p0(e);return new Zr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ol(e.root,!0)}`,r=bV(e.queryParams),i=typeof e.fragment=="string"?`#${vV(e.fragment)}`:"";return`${n}${r}${i}`}},_V=new da;function kf(t){return t.segments.map(e=>wT(e)).join("/")}function ol(t,e){if(!t.hasChildren())return kf(t);if(e){let n=t.children[Ee]?ol(t.children[Ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${ol(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=yV(t,(r,i)=>i===Ee?[ol(t.children[Ee],!1)]:[`${i}:${ol(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ee]!=null?`${kf(t)}/${n[0]}`:`${kf(t)}/(${n.join("//")})`}}function vT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sf(t){return vT(t).replace(/%3B/gi,";")}function vV(t){return encodeURI(t)}function h0(t){return vT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rf(t){return decodeURIComponent(t)}function iT(t){return Rf(t.replace(/\+/g,"%20"))}function wT(t){return`${h0(t.path)}${wV(t.parameters)}`}function wV(t){return Object.entries(t).map(([e,n])=>`;${h0(e)}=${h0(n)}`).join("")}function bV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Sf(n)}=${Sf(i)}`).join("&"):`${Sf(n)}=${Sf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var CV=/^[^\/()?;#]+/;function a0(t){let e=t.match(CV);return e?e[0]:""}var IV=/^[^\/()?;=#]+/;function EV(t){let e=t.match(IV);return e?e[0]:""}var xV=/^[^=?&#]+/;function MV(t){let e=t.match(xV);return e?e[0]:""}var TV=/^[^&#]+/;function DV(t){let e=t.match(TV);return e?e[0]:""}var p0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ee]=new qe(e,n)),r}parseSegment(){let e=a0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new jo(Rf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=EV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=a0(this.remaining);i&&(r=i,this.capture(r))}e[Rf(n)]=Rf(r)}parseQueryParam(e){let n=MV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=DV(this.remaining);s&&(r=s,this.capture(r))}let i=iT(n),o=iT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=a0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new de(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Ee]:new qe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}};function bT(t){return t.segments.length>0?new qe([],{[Ee]:t}):t}function CT(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=CT(i);if(r===Ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new qe(t.segments,e);return OV(n)}function OV(t){if(t.numberOfChildren===1&&t.children[Ee]){let e=t.children[Ee];return new qe(t.segments.concat(e.segments),e.children)}return t}function $o(t){return t instanceof Zr}function SV(t,e,n=null,r=null){let i=IT(t);return ET(i,e,n,r)}function IT(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new qe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=bT(r);return e??i}function ET(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return c0(i,i,i,n,r);let o=PV(e);if(o.toRoot())return c0(i,i,new qe([],{}),n,r);let s=AV(o,i,t),a=s.processChildren?cl(s.segmentGroup,s.index,o.commands):MT(s.segmentGroup,s.index,o.commands);return c0(i,s.segmentGroup,a,n,r)}function Nf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function dl(t){return typeof t=="object"&&t!=null&&t.outlets}function c0(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;t===e?s=n:s=xT(t,e,n);let a=bT(CT(s));return new Zr(a,o,i)}function xT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=xT(o,e,n)}),new qe(t.segments,r)}var Ff=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Nf(r[0]))throw new de(4003,!1);let i=r.find(dl);if(i&&i!==pT(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function PV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ff(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ff(n,e,r)}var aa=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function AV(t,e,n){if(t.isAbsolute)return new aa(e,!0,0);if(!n)return new aa(e,!1,NaN);if(n.parent===null)return new aa(n,!0,0);let r=Nf(t.commands[0])?0:1,i=n.segments.length-1+r;return kV(n,i,t.numberOfDoubleDots)}function kV(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new aa(r,!1,i-o)}function RV(t){return dl(t[0])?t[0].outlets:{[Ee]:t}}function MT(t,e,n){if(t??=new qe([],{}),t.segments.length===0&&t.hasChildren())return cl(t,e,n);let r=NV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new qe(t.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new qe(t.segments.slice(r.pathIndex),t.children),cl(o,0,i)}else return r.match&&i.length===0?new qe(t.segments,{}):r.match&&!t.hasChildren()?m0(t,e,n):r.match?cl(t,0,i):m0(t,e,n)}function cl(t,e,n){if(n.length===0)return new qe(t.segments,{});{let r=RV(n),i={};if(Object.keys(r).some(o=>o!==Ee)&&t.children[Ee]&&t.numberOfChildren===1&&t.children[Ee].segments.length===0){let o=cl(t.children[Ee],e,n);return new qe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=MT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new qe(t.segments,i)}}function NV(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(dl(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!sT(c,u,s))return o;r+=2}else{if(!sT(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function m0(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(dl(o)){let c=FV(o.outlets);return new qe(r,c)}if(i===0&&Nf(n[0])){let c=t.segments[e];r.push(new jo(c.path,oT(n[0]))),i++;continue}let s=dl(o)?o.outlets[Ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Nf(a)?(r.push(new jo(s,oT(a))),i+=2):(r.push(new jo(s,{})),i++)}return new qe(r,{})}function FV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=m0(new qe([],{}),0,r))}),e}function oT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function sT(t,e,n){return t==n.path&&Er(e,n.parameters)}var ll="imperative",Rt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Rt||{}),Rn=class{constructor(e,n){this.id=e,this.url=n}},Fi=class extends Rn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Rt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xr=class extends Rn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Rt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},xn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(xn||{}),Lf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Lf||{}),Qr=class extends Rn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Rt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Li=class extends Rn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Rt.NavigationSkipped}},fl=class extends Rn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Rt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vf=class extends Rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Rt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g0=class extends Rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Rt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y0=class extends Rn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Rt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_0=class extends Rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Rt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v0=class extends Rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Rt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},w0=class{constructor(e){this.route=e,this.type=Rt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},b0=class{constructor(e){this.route=e,this.type=Rt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},C0=class{constructor(e){this.snapshot=e,this.type=Rt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},I0=class{constructor(e){this.snapshot=e,this.type=Rt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E0=class{constructor(e){this.snapshot=e,this.type=Rt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x0=class{constructor(e){this.snapshot=e,this.type=Rt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uf=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Rt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},hl=class{},fa=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function LV(t,e){return t.providers&&!t._injector&&(t._injector=yf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function nr(t){return t.outlet||Ee}function VV(t,e){let n=t.filter(r=>nr(r)===e);return n.push(...t.filter(r=>nr(r)!==e)),n}function wl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var M0=class{get injector(){return wl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new bl(this.rootInjector),this.attachRef=null}},bl=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new M0(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(V(Cn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=T0(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=T0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=D0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return D0(e,this._root).map(n=>n.value)}};function T0(t,e){if(t===e.value)return e;for(let n of e.children){let r=T0(t,n);if(r)return r}return null}function D0(t,e){if(t===e.value)return[e];for(let n of e.children){let r=D0(t,n);if(r.length)return r.unshift(e),r}return[]}var En=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function sa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Bf=class extends jf{constructor(e,n){super(e),this.snapshot=n,L0(this,e)}toString(){return this.snapshot.toString()}};function TT(t){let e=UV(t),n=new Ft([new jo("",{})]),r=new Ft({}),i=new Ft({}),o=new Ft({}),s=new Ft(""),a=new rr(n,r,o,s,i,Ee,t,e.root);return a.snapshot=e.root,new Bf(new En(a,[]),e)}function UV(t){let e={},n={},r={},i="",o=new ca([],e,r,i,n,Ee,t,null,{});return new zf("",new En(o,[]))}var rr=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(u=>u[_l]))??se(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>ua(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>ua(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $f(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:te(te({},e.params),t.params),data:te(te({},e.data),t.data),resolve:te(te(te(te({},t.data),e.data),i?.data),t._resolvedData)}:r={params:te({},t.params),data:te({},t.data),resolve:te(te({},t.data),t._resolvedData??{})},i&&OT(i)&&(r.resolve[_l]=i.title),r}var ca=class{get title(){return this.data?.[_l]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ua(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ua(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},zf=class extends jf{constructor(e,n){super(n),this.url=e,L0(this,n)}toString(){return DT(this._root)}};function L0(t,e){e.value._routerState=t,e.children.forEach(n=>L0(t,n))}function DT(t){let e=t.children.length>0?` { ${t.children.map(DT).join(", ")} } `:"";return`${t.value}${e}`}function l0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Er(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Er(e.params,n.params)||t.paramsSubject.next(n.params),fV(e.url,n.url)||t.urlSubject.next(n.url),Er(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function O0(t,e){let n=Er(t.params,e.params)&&gV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||O0(t.parent,e.parent))}function OT(t){return typeof t.title=="string"||t.title===null}var ir=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ee,this.activateEvents=new st,this.deactivateEvents=new st,this.attachEvents=new st,this.detachEvents=new st,this.parentContexts=G(bl),this.location=G(Pi),this.changeDetector=G(ra),this.inputBinder=G(Kf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new S0(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Di({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[No]});let t=e;return t})(),S0=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===rr?this.route:e===bl?this.childContexts:this.parent.get(e,n)}},Kf=new ne(""),aT=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Fc([i.queryParams,i.params,i.data]).pipe(ze(([s,a,c],u)=>(c=te(te(te({},s),a),c),u===0?se(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=PM(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function jV(t,e,n){let r=pl(t,e._root,n?n._root:void 0);return new Bf(r,e)}function pl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=BV(t,e,n);return new En(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pl(t,a)),s}}let r=$V(e.value),i=e.children.map(o=>pl(t,o));return new En(r,i)}}function BV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return pl(t,r,i);return pl(t,r)})}function $V(t){return new rr(new Ft(t.url),new Ft(t.params),new Ft(t.queryParams),new Ft(t.fragment),new Ft(t.data),t.outlet,t.component,t)}var ml=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},ST="ngNavigationCancelingError";function qf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=$o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PT(!1,xn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function PT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ST]=!0,n.cancellationCode=e,n}function zV(t){return AT(t)&&$o(t.url)}function AT(t){return!!t&&t[ST]}var qV=(t,e,n,r)=>oe(i=>(new P0(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),P0=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),l0(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=sa(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=sa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=sa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=sa(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new x0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new I0(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(l0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),l0(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Hf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},la=class{constructor(e,n){this.component=e,this.route=n}};function HV(t,e,n){let r=t._root,i=e?e._root:null;return sl(r,i,n,[r.value])}function GV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function pa(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!dE(t)?t:e.get(t):r}function sl(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=sa(e);return t.children.forEach(s=>{WV(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ul(a,n.getContext(s),i)),i}function WV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=KV(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Hf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?sl(t,e,a?a.children:null,r,i):sl(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new la(a.outlet.component,s))}else s&&ul(e,a,i),i.canActivateChecks.push(new Hf(r)),o.component?sl(t,null,a?a.children:null,r,i):sl(t,null,n,r,i);return i}function KV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Bo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Bo(t.url,e.url)||!Er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!O0(t,e)||!Er(t.queryParams,e.queryParams);case"paramsChange":default:return!O0(t,e)}}function ul(t,e,n){let r=sa(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ul(s,e.children.getContext(o),n):ul(s,null,n):ul(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new la(e.outlet.component,i)):n.canDeactivateChecks.push(new la(null,i)):n.canDeactivateChecks.push(new la(null,i))}function Cl(t){return typeof t=="function"}function YV(t){return typeof t=="boolean"}function QV(t){return t&&Cl(t.canLoad)}function ZV(t){return t&&Cl(t.canActivate)}function XV(t){return t&&Cl(t.canActivateChild)}function JV(t){return t&&Cl(t.canDeactivate)}function eU(t){return t&&Cl(t.canMatch)}function kT(t){return t instanceof Hn||t?.name==="EmptyError"}var Pf=Symbol("INITIAL_VALUE");function ha(){return ze(t=>Fc(t.map(e=>e.pipe(Dt(1),Co(Pf)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===Pf)return Pf;if(n===!1||tU(n))return n}return!0}),pt(e=>e!==Pf),Dt(1)))}function tU(t){return $o(t)||t instanceof ml}function nU(t,e){return ot(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?se(Je(te({},n),{guardsResult:!0})):rU(s,r,i,t).pipe(ot(a=>a&&YV(a)?iU(r,o,t,e):se(a)),oe(a=>Je(te({},n),{guardsResult:a})))})}function rU(t,e,n,r){return Te(t).pipe(ot(i=>lU(i.component,i.route,n,e,r)),Pn(i=>i!==!0,!0))}function iU(t,e,n,r){return Te(e).pipe(wo(i=>pr(sU(i.route.parent,r),oU(i.route,r),cU(t,i.path,n),aU(t,i.route,n))),Pn(i=>i!==!0,!0))}function oU(t,e){return t!==null&&e&&e(new E0(t)),se(!0)}function sU(t,e){return t!==null&&e&&e(new C0(t)),se(!0)}function aU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>_o(()=>{let s=wl(e)??n,a=pa(o,s),c=ZV(a)?a.canActivate(e,t):Zn(s,()=>a(e,t));return Vi(c).pipe(Pn())}));return se(i).pipe(ha())}function cU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>GV(s)).filter(s=>s!==null).map(s=>_o(()=>{let a=s.guards.map(c=>{let u=wl(s.node)??n,d=pa(c,u),h=XV(d)?d.canActivateChild(r,t):Zn(u,()=>d(r,t));return Vi(h).pipe(Pn())});return se(a).pipe(ha())}));return se(o).pipe(ha())}function lU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let c=wl(e)??i,u=pa(a,c),d=JV(u)?u.canDeactivate(t,e,n,r):Zn(c,()=>u(t,e,n,r));return Vi(d).pipe(Pn())});return se(s).pipe(ha())}function uU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=pa(s,t),c=QV(a)?a.canLoad(e,n):Zn(t,()=>a(e,n));return Vi(c)});return se(o).pipe(ha(),RT(r))}function RT(t){return Em(mt(e=>{if(typeof e!="boolean")throw qf(t,e)}),oe(e=>e===!0))}function dU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=pa(s,t),c=eU(a)?a.canMatch(e,n):Zn(t,()=>a(e,n));return Vi(c)});return se(o).pipe(ha(),RT(r))}var gl=class{constructor(e){this.segmentGroup=e||null}},yl=class extends Error{constructor(e){super(),this.urlTree=e}};function oa(t){return mi(new gl(t))}function fU(t){return mi(new de(4e3,!1))}function hU(t){return mi(PT(!1,xn.GuardRejected))}var A0=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[Ee])return fU(`${e.redirectTo}`);i=i.children[Ee]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:u,routeConfig:d,url:h,outlet:m,params:y,data:M,title:A}=i,P=Zn(o,()=>a({params:y,data:M,queryParams:c,fragment:u,routeConfig:d,url:h,outlet:m,title:A}));if(P instanceof Zr)throw new yl(P);n=P}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new yl(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Zr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new qe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},k0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pU(t,e,n,r,i){let o=V0(t,e,n);return o.matched?(r=LV(e,r),dU(r,e,n,i).pipe(oe(s=>s===!0?o:te({},k0)))):se(o)}function V0(t,e,n){if(e.path==="**")return mU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?te({},k0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dV)(n,t,e);if(!i)return te({},k0);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?te(te({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function mU(t){return{matched:!0,parameters:t.length>0?pT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function cT(t,e,n,r){return n.length>0&&_U(t,n,r)?{segmentGroup:new qe(e,yU(r,new qe(n,t.children))),slicedSegments:[]}:n.length===0&&vU(t,n,r)?{segmentGroup:new qe(t.segments,gU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new qe(t.segments,t.children),slicedSegments:n}}function gU(t,e,n,r){let i={};for(let o of n)if(Yf(t,e,o)&&!r[nr(o)]){let s=new qe([],{});i[nr(o)]=s}return te(te({},r),i)}function yU(t,e){let n={};n[Ee]=e;for(let r of t)if(r.path===""&&nr(r)!==Ee){let i=new qe([],{});n[nr(r)]=i}return n}function _U(t,e,n){return n.some(r=>Yf(t,e,r)&&nr(r)!==Ee)}function vU(t,e,n){return n.some(r=>Yf(t,e,r))}function Yf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function wU(t,e,n,r){return nr(t)!==r&&(r===Ee||!Yf(e,n,t))?!1:V0(e,t,n).matched}function bU(t,e,n){return e.length===0&&!t.children[n]}var R0=class{};function CU(t,e,n,r,i,o,s="emptyOnly"){return new N0(t,e,n,r,i,s,o).recognize()}var IU=31,N0=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new A0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new de(4002,`'${e.segmentGroup}'`)}recognize(){let e=cT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:n,rootSnapshot:r})=>{let i=new En(r,n),o=new zf("",i),s=SV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new ca([],Object.freeze({}),Object.freeze(te({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,n).pipe(oe(r=>({children:r,rootSnapshot:n})),yi(r=>{if(r instanceof yl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof gl?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(oe(s=>s instanceof En?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Te(o).pipe(wo(s=>{let a=r.children[s],c=VV(n,s);return this.processSegmentGroup(e,c,a,s,i)}),bo((s,a)=>(s.push(...a),s)),_i(null),Fm(),ot(s=>{if(s===null)return oa(r);let a=NT(s);return EU(a),se(a)}))}processSegment(e,n,r,i,o,s,a){return Te(n).pipe(wo(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(yi(u=>{if(u instanceof gl)return se(null);throw u}))),Pn(c=>!!c),yi(c=>{if(kT(c))return bU(r,i,o)?se(new R0):oa(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return wU(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):oa(i):oa(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:m}=V0(n,i,o);if(!c)return oa(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>IU&&(this.allowRedirects=!1));let y=new ca(o,u,Object.freeze(te({},this.urlTree.queryParams)),this.urlTree.fragment,lT(i),nr(i),i.component??i._loadedComponent??null,i,uT(i)),M=$f(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(M.params),y.data=Object.freeze(M.data);let A=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(ot(P=>this.processSegment(e,r,n,P.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=pU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ze(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ze(({routes:u})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:y}=c,M=new ca(m,h,Object.freeze(te({},this.urlTree.queryParams)),this.urlTree.fragment,lT(r),nr(r),r.component??r._loadedComponent??null,r,uT(r)),A=$f(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(A.params),M.data=Object.freeze(A.data);let{segmentGroup:P,slicedSegments:z}=cT(n,m,y,u);if(z.length===0&&P.hasChildren())return this.processChildren(d,u,P,M).pipe(oe(j=>new En(M,j)));if(u.length===0&&z.length===0)return se(new En(M,[]));let W=nr(r)===o;return this.processSegment(d,u,P,z,W?Ee:o,!0,M).pipe(oe(j=>new En(M,j instanceof En?[j]:[])))}))):oa(n)))}getChildConfig(e,n,r){return n.children?se({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?se({routes:n._loadedRoutes,injector:n._loadedInjector}):uU(e,n,r,this.urlSerializer).pipe(ot(i=>i?this.configLoader.loadChildren(e,n).pipe(mt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):hU(n))):se({routes:[],injector:e})}};function EU(t){t.sort((e,n)=>e.value.outlet===Ee?-1:n.value.outlet===Ee?1:e.value.outlet.localeCompare(n.value.outlet))}function xU(t){let e=t.value.routeConfig;return e&&e.path===""}function NT(t){let e=[],n=new Set;for(let r of t){if(!xU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=NT(r.children);e.push(new En(r.value,i))}return e.filter(r=>!n.has(r))}function lT(t){return t.data||{}}function uT(t){return t.resolve||{}}function MU(t,e,n,r,i,o){return ot(s=>CU(t,e,n,r,s.extractedUrl,i,o).pipe(oe(({state:a,tree:c})=>Je(te({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function TU(t,e){return ot(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return se(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of FT(c))s.add(u);let a=0;return Te(s).pipe(wo(c=>o.has(c)?DU(c,r,t,e):(c.data=$f(c,c.parent,t).resolve,se(void 0))),mt(()=>a++),Ns(1),ot(c=>a===s.size?se(n):nn))})}function FT(t){let e=t.children.map(n=>FT(n)).flat();return[t,...e]}function DU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!OT(i)&&(o[_l]=i.title),OU(o,t,e,r).pipe(oe(s=>(t._resolvedData=s,t.data=$f(t,t.parent,n).resolve,null)))}function OU(t,e,n,r){let i=f0(t);if(i.length===0)return se({});let o={};return Te(i).pipe(ot(s=>SU(t[s],e,n,r).pipe(Pn(),mt(a=>{if(a instanceof ml)throw qf(new da,a);o[s]=a}))),Ns(1),Lc(o),yi(s=>kT(s)?nn:mi(s)))}function SU(t,e,n,r){let i=wl(e)??r,o=pa(t,i),s=o.resolve?o.resolve(e,n):Zn(i,()=>o(e,n));return Vi(s)}function u0(t){return ze(e=>{let n=t(e);return n?Te(n).pipe(oe(()=>e)):se(e)})}var LT=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===Ee);return i}getResolvedTitleForRoute(r){return r.data[_l]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>G(PU),providedIn:"root"});let t=e;return t})(),PU=(()=>{let e=class e extends LT{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(V(tT))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Il=new ne("",{providedIn:"root",factory:()=>({})}),AU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=pe({type:e,selectors:[["ng-component"]],standalone:!0,features:[yM],decls:1,vars:0,template:function(i,o){i&1&&U(0,"router-outlet")},dependencies:[ir],encapsulation:2});let t=e;return t})();function U0(t){let e=t.children&&t.children.map(U0),n=e?Je(te({},t),{children:e}):te({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ee&&(n.component=AU),n}var Gf=new ne(""),j0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(Cf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Vi(r.loadComponent()).pipe(oe(VT),mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Vc(()=>{this.componentLoaders.delete(r)})),o=new pi(i,()=>new We).pipe(Ds());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=kU(i,this.compiler,r,this.onLoadEndListener).pipe(Vc(()=>{this.childrenLoaders.delete(i)})),a=new pi(s,()=>new We).pipe(Ds());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kU(t,e,n,r){return Vi(t.loadChildren()).pipe(oe(VT),ot(i=>i instanceof Kc||Array.isArray(i)?se(i):Te(e.compileModuleAsync(i))),oe(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Gf,[],{optional:!0,self:!0}).flat()),{routes:s.map(U0),injector:o}}))}function RU(t){return t&&typeof t=="object"&&"default"in t}function VT(t){return RU(t)?t.default:t}var B0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>G(NU),providedIn:"root"});let t=e;return t})(),NU=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),UT=new ne(""),jT=new ne("");function FU(t,e,n){let r=t.get(jT),i=t.get(sn);return t.get(De).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),LU(t))),{onViewTransitionCreated:c}=r;return c&&Zn(t,()=>c({transition:a,from:e,to:n})),s})}function LU(t){return new Promise(e=>{Sy({read:()=>setTimeout(e)},{injector:t})})}var VU=new ne(""),$0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new We,this.transitionAbortSubject=new We,this.configLoader=G(j0),this.environmentInjector=G(Cn),this.urlSerializer=G(vl),this.rootContexts=G(bl),this.location=G(Ni),this.inputBindingEnabled=G(Kf,{optional:!0})!==null,this.titleStrategy=G(LT),this.options=G(Il,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(B0),this.createViewTransition=G(UT,{optional:!0}),this.navigationErrorHandler=G(VU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let r=o=>this.events.next(new w0(o)),i=o=>this.events.next(new b0(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Je(te(te({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ft({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ll,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(s=>s.id!==0),oe(s=>Je(te({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ze(s=>{let a=!1,c=!1;return se(s).pipe(ze(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",xn.SupersededByNewNavigation),nn;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Je(te({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&h!=="reload"){let m="";return this.events.next(new Li(u.id,this.urlSerializer.serialize(u.rawUrl),m,Lf.IgnoredSameUrlNavigation)),u.resolve(!1),nn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return se(u).pipe(ze(m=>{let y=this.transitions?.getValue();return this.events.next(new Fi(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?nn:Promise.resolve(m)}),MU(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),mt(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Je(te({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new Vf(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:y,source:M,restoredState:A,extras:P}=u,z=new Fi(m,this.urlSerializer.serialize(y),M,A);this.events.next(z);let W=TT(this.rootComponentType).snapshot;return this.currentTransition=s=Je(te({},u),{targetSnapshot:W,urlAfterRedirects:y,extras:Je(te({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,se(s)}else{let m="";return this.events.next(new Li(u.id,this.urlSerializer.serialize(u.extractedUrl),m,Lf.IgnoredByUrlHandlingStrategy)),u.resolve(!1),nn}}),mt(u=>{let d=new g0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),oe(u=>(this.currentTransition=s=Je(te({},u),{guards:HV(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),nU(this.environmentInjector,u=>this.events.next(u)),mt(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw qf(this.urlSerializer,u.guardsResult);let d=new y0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),pt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",xn.GuardRejected),!1)),u0(u=>{if(u.guards.canActivateChecks.length)return se(u).pipe(mt(d=>{let h=new _0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),ze(d=>{let h=!1;return se(d).pipe(TU(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",xn.NoDataFromResolver)}}))}),mt(d=>{let h=new v0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),u0(u=>{let d=h=>{let m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(mt(y=>{h.component=y}),oe(()=>{})));for(let y of h.children)m.push(...d(y));return m};return Fc(d(u.targetSnapshot.root)).pipe(_i(null),Dt(1))}),u0(()=>this.afterPreactivation()),ze(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return h?Te(h).pipe(oe(()=>s)):se(s)}),oe(u=>{let d=jV(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Je(te({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),mt(()=>{this.events.next(new hl)}),qV(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Dt(1),mt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Um(this.transitionAbortSubject.pipe(mt(u=>{throw u}))),Vc(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",xn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),yi(u=>{if(c=!0,AT(u))this.events.next(new Qr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),zV(u)?this.events.next(new fa(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let d=new fl(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=Zn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof ml){let{message:m,cancellationCode:y}=qf(this.urlSerializer,h);this.events.next(new Qr(s.id,this.urlSerializer.serialize(s.extractedUrl),m,y)),this.events.next(new fa(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let m=r.errorHandler(u);s.resolve(!!m)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return nn}))}))}cancelNavigationTransition(r,i,o){let s=new Qr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UU(t){return t!==ll}var jU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>G(BU),providedIn:"root"});let t=e;return t})(),F0=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},BU=(()=>{let e=class e extends F0{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ay(e)))(o||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>G($U),providedIn:"root"});let t=e;return t})(),$U=(()=>{let e=class e extends BT{constructor(){super(...arguments),this.location=G(Ni),this.urlSerializer=G(vl),this.options=G(Il,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(B0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Zr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=TT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Fi)this.stateMemento=this.createStateMemento();else if(r instanceof Li)this.rawUrlTree=i.initialUrl;else if(r instanceof Vf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof hl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Qr&&(r.code===xn.GuardRejected||r.code===xn.NoDataFromResolver)?this.restoreHistory(i):r instanceof fl?this.restoreHistory(i,!0):r instanceof xr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof Zr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=te(te({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=te(te({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ay(e)))(o||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),al=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(al||{});function $T(t,e){t.events.pipe(pt(n=>n instanceof xr||n instanceof Qr||n instanceof fl||n instanceof Li),oe(n=>n instanceof xr||n instanceof Li?al.COMPLETE:(n instanceof Qr?n.code===xn.Redirect||n.code===xn.SupersededByNewNavigation:!1)?al.REDIRECTING:al.FAILED),pt(n=>n!==al.REDIRECTING),Dt(1)).subscribe(()=>{e()})}function zU(t){throw t}var qU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ve=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(vf),this.stateManager=G(BT),this.options=G(Il,{optional:!0})||{},this.pendingTasks=G(Xs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G($0),this.urlSerializer=G(vl),this.location=G(Ni),this.urlHandlingStrategy=G(B0),this._events=new We,this.errorHandler=this.options.errorHandler||zU,this.navigated=!1,this.routeReuseStrategy=G(jU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(Gf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(Kf,{optional:!0}),this.eventsSubscription=new ht,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Qr&&i.code!==xn.Redirect&&i.code!==xn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof xr)this.navigated=!0;else if(i instanceof fa){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u=te({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UU(o.source)},a);this.scheduleNavigation(c,ll,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}WU(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ll,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=te({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(U0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,d=u?this.currentUrlTree.fragment:a,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=te(te({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let y=o?o.snapshot:this.routerState.snapshot.root;m=IT(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),m=this.currentUrlTree.root}return ET(m,r,h,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=$o(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ll,null,i)}navigate(r,i={skipLocationChange:!1}){return GU(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=te({},qU):i===!1?o=te({},HU):o=i,$o(r))return rT(this.currentUrlTree,r,o);let s=this.parseUrl(r);return rT(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((m,y)=>{c=m,u=y});let h=this.pendingTasks.add();return $T(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new de(4008,!1)}function WU(t){return!(t instanceof hl)&&!(t instanceof fa)}var ma=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new We,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof xr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):($o(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Tx(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.routerLinkInput===null?null:$o(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(rr),cy("tabindex"),q(Kt),q(Cr),q(Yr))},e.\u0275dir=Di({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Q("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Ny("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",el],skipLocationChange:[2,"skipLocationChange","skipLocationChange",el],replaceUrl:[2,"replaceUrl","replaceUrl",el],routerLink:"routerLink"},standalone:!0,features:[ky,No]});let t=e;return t})();var Wf=class{};var KU=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(pt(r=>r instanceof xr),wo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=yf(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Te(o).pipe(gi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=se(null);let s=o.pipe(ot(a=>a===null?se(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Te([s,a]).pipe(gi())}else return s})}};e.\u0275fac=function(i){return new(i||e)(V(ve),V(Cf),V(Cn),V(Wf),V(j0))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),zT=new ne(""),YU=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Fi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof xr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Li&&r.code===Lf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Uf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){jx()},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function QU(t){return t.routerState.root}function El(t,e){return{\u0275kind:t,\u0275providers:e}}function ZU(){let t=G(mn);return e=>{let n=t.get(tr);if(e!==n.components[0])return;let r=t.get(ve),i=t.get(qT);t.get(z0)===1&&r.initialNavigation(),t.get(HT,null,xe.Optional)?.setUpPreloading(),t.get(zT,null,xe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qT=new ne("",{factory:()=>new We}),z0=new ne("",{providedIn:"root",factory:()=>1});function XU(){return El(2,[{provide:z0,useValue:0},{provide:na,multi:!0,deps:[mn],useFactory:e=>{let n=e.get(jM,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ve),o=e.get(qT);$T(i,()=>{r(!0)}),e.get($0).afterPreactivation=()=>(r(!0),o.closed?se(void 0):o),i.initialNavigation()}))}}])}function JU(){return El(3,[{provide:na,multi:!0,useFactory:()=>{let e=G(ve);return()=>{e.setUpLocationChangeListener()}}},{provide:z0,useValue:2}])}var HT=new ne("");function ej(t){return El(0,[{provide:HT,useExisting:KU},{provide:Wf,useExisting:t}])}function tj(){return El(8,[aT,{provide:Kf,useExisting:aT}])}function nj(t){let e=[{provide:UT,useValue:FU},{provide:jT,useValue:te({skipNextTransition:!!t?.skipInitialTransition},t)}];return El(9,e)}var dT=new ne("ROUTER_FORROOT_GUARD"),rj=[Ni,{provide:vl,useClass:da},ve,bl,{provide:rr,useFactory:QU,deps:[ve]},j0,[]],q0=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[rj,[],{provide:Gf,multi:!0,useValue:r},{provide:dT,useFactory:aj,deps:[[ve,new Ro,new Jd]]},{provide:Il,useValue:i||{}},i?.useHash?oj():sj(),ij(),i?.preloadingStrategy?ej(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?cj(i):[],i?.bindToComponentInputs?tj().\u0275providers:[],i?.enableViewTransitions?nj().\u0275providers:[],lj()]}}static forChild(r){return{ngModule:e,providers:[{provide:Gf,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(V(dT,8))},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({});let t=e;return t})();function ij(){return{provide:zT,useFactory:()=>{let t=G(GM),e=G(De),n=G(Il),r=G($0),i=G(vl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new YU(i,r,t,e,n)}}}function oj(){return{provide:Yr,useClass:$M}}function sj(){return{provide:Yr,useClass:Xy}}function aj(t){return"guarded"}function cj(t){return[t.initialNavigation==="disabled"?JU().\u0275providers:[],t.initialNavigation==="enabledBlocking"?XU().\u0275providers:[]]}var fT=new ne("");function lj(){return[{provide:fT,useFactory:ZU},{provide:Vy,multi:!0,useExisting:fT}]}var Qf=(()=>{let e=class e{constructor(r){this.router=r,r.events.forEach(i=>{i instanceof Fi&&setTimeout(()=>{if(window.location.pathname=="/access/register"||window.location.pathname=="/access/register/complete-profile"||window.location.pathname=="/access/register/end-complete-profile"){let o=document.getElementById("label-two-1"),s=document.getElementById("label-two-2");s.classList.add("move-left"),s.classList.remove("move-right"),this.background!="#EEEEEE"&&(s.style.color="white",o.style.color="black"),s.style.fontWeight="400",o.style.fontWeight="600"}else if(window.location.pathname=="/access/login"){let o=document.getElementById("label-two-1"),s=document.getElementById("label-two-2");s.classList.remove("move-left"),s.classList.add("move-right"),this.background!="#EEEEEE"&&(o.style.color="white",s.style.color="black"),o.style.fontWeight="400",s.style.fontWeight="600"}},250)})}ngOnInit(){document.getElementById("segmented-controls").style.backgroundColor=this.background;let r=document.getElementById("label-two-2"),i=document.getElementById("label-two-1");this.router.url.includes(this.toFirst)&&!r.classList.contains("move-left")?(r.classList.add("move-left"),r.classList.remove("move-right"),this.background!="#EEEEEE"&&(r.style.color="white",i.style.color="black"),r.style.fontWeight="400",i.style.fontWeight="600"):this.background!="#EEEEEE"&&(i.style.color="white",r.style.color="black")}slide(r){let i=document.getElementById("label-two-1"),o=document.getElementById("label-two-2");if(this.reset(),r.target.id==="two-1"){o.classList.add("move-left"),o.classList.remove("move-right"),this.background!="#EEEEEE"&&(o.style.color="white",i.style.color="black");var s=document.documentElement.scrollTop?document.documentElement:document.body;s.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>this.router.navigateByUrl(this.toFirst),350)}else{o.classList.add("move-right"),o.classList.remove("move-left"),this.background!="#EEEEEE"&&(i.style.color="white",o.style.color="black");var s=document.documentElement.scrollTop?document.documentElement:document.body;s.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>this.router.navigateByUrl(this.toSecond),350)}}reset(){let r=document.getElementById("label-two-2"),i=document.getElementById("label-two-1");r.style.color="",r.style.fontWeight="",i.style.color="",i.style.fontWeight=""}};e.\u0275fac=function(i){return new(i||e)(q(ve))},e.\u0275cmp=pe({type:e,selectors:[["app-segmented-control"]],inputs:{textOne:"textOne",textTwo:"textTwo",toFirst:"toFirst",toSecond:"toSecond",background:"background"},decls:7,vars:2,consts:[["id","segmented-controls",1,"segmented-controls"],["id","two-1","name","two","type","radio",3,"click"],["id","label-two-1","for","two-1"],["id","two-2","name","two","type","radio","checked","",3,"click"],["id","label-two-2","for","two-2"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"input",1),Q("click",function(a){return o.slide(a)}),_(),v(2,"label",2),E(3),_(),v(4,"input",3),Q("click",function(a){return o.slide(a)}),_(),v(5,"label",4),E(6),_()()),i&2&&(D(3),he(o.textOne),D(3),he(o.textTwo))},styles:['.segmented-controls[_ngcontent-%COMP%]{display:flex;position:relative;overflow:hidden;transition:all .3s ease;border-radius:.5rem;height:1.5rem;width:100%;padding:.125rem}.segmented-controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);white-space:nowrap}.segmented-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{grid-row:1;display:flex;justify-content:center;align-items:center;text-align:center;cursor:pointer;flex:1 1 0px;position:relative;z-index:2;transition:inherit;font-size:.8125rem;font-weight:400;line-height:1;color:#000}.segmented-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:last-of-type{z-index:1}.segmented-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:last-of-type:after{content:"";position:absolute;inset:0;z-index:-2;background-color:#000;transition:inherit;background:#fff;border-radius:.4275rem;border:.5px solid rgba(0,0,0,.04);box-shadow:0 3px 1px #0000000a,0 3px 8px #0000001f}.segmented-controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{font-weight:600;color:#000}.move-right[_ngcontent-%COMP%]:after{transform:translate(0)}.move-left[_ngcontent-%COMP%]:after{transform:translate(-100%)}']});let t=e;return t})();var WT=(()=>{let e=class e{constructor(){this.imageurl="assets/mockup.svg"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=pe({type:e,selectors:[["app-access"]],features:[gM([])],decls:9,vars:1,consts:[[1,"right-box","prevent-select"],["textOne","Registrati","textTwo","Accedi","toFirst","/access/register","toSecond","/access/login","background","#007aff"],[1,"left-text"],[1,"right-text"],[1,"image"],[3,"src"]],template:function(i,o){i&1&&(v(0,"div",0),U(1,"app-segmented-control",1),v(2,"h1",2),E(3,"Studia in compagnia."),_(),v(4,"h1",3),E(5,"Trova gruppi studio."),_(),v(6,"div",4),U(7,"img",5),_()(),U(8,"router-outlet")),i&2&&(D(7),L("src",o.imageurl,Me))},dependencies:[ir,Qf],styles:[".right-box[_ngcontent-%COMP%]{position:absolute;right:2%;top:50%;transform:translateY(-50%);height:95vh;width:63%;border-radius:19px;background:#82beff;background:linear-gradient(54deg,#82beff 0,#007aff)}.left-text[_ngcontent-%COMP%], .right-text[_ngcontent-%COMP%]{position:absolute;color:#fff;font-weight:600;font-size:5vw;z-index:0}.left-text[_ngcontent-%COMP%]{top:5%;left:1%}.right-text[_ngcontent-%COMP%]{float:right;top:67%;right:1%}.image[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}img[_ngcontent-%COMP%]{position:relative;width:70%;height:auto;min-width:700px;z-index:100}app-segmented-control[_ngcontent-%COMP%]{display:block;width:30%;position:relative;top:1rem;left:1rem}.prevent-select[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none}@media all and (min-width:1620px) and (max-width:1910px){.left-text[_ngcontent-%COMP%]{top:5%}}@media all and (min-width:1320px) and (max-width:1620px){.left-text[_ngcontent-%COMP%]{top:9%}}@media all and (min-width:1024px) and (max-width:1320px){.left-text[_ngcontent-%COMP%]{top:10%}}@media all and (min-width:768px) and (max-width:1070px){.right-box[_ngcontent-%COMP%]{display:none}}@media all and (min-width:480px) and (max-width:768px){.right-box[_ngcontent-%COMP%]{display:none}}@media all and (max-width:480px){.right-box[_ngcontent-%COMP%]{display:none}}@media all and (max-height:500px){img[_ngcontent-%COMP%]{display:none}}"]});let t=e;return t})();var uj="firebase",dj="10.12.5";et.registerVersion(uj,dj,"app-compat");var fj="firebase",hj="10.12.5";Bn(fj,hj,"app");var Jr=new Ti("ANGULARFIRE2_VERSION");var pj=(t,e)=>{let n=e?[e]:zC(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Xr=class{constructor(){return pj(mj)}},mj="app-check";function H0(){}var Zf=class{zone;delegate;constructor(e,n=Om){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},G0=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",H0,{},H0,H0)),n.pipe(mt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ga=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Zf(Zone.current)),this.insideAngular=n.run(()=>new Zf(Zone.current,fr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(V(De))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function KT(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function W0(t){return t.pipe(wn(KT().outsideAngular))}function Vt(t){return gj(KT())(t)}function gj(t){return function(n){return n=n.lift(new G0(t.ngZone)),n.pipe(qn(t.outsideAngular),wn(t.insideAngular))}}var yj=new Map,_j={activated:!1,tokenObservers:[]},vj={initialized:!1,enabled:!1};function or(t){return yj.get(t)||Object.assign({},_j)}function t1(){return vj}var wj="https://content-firebaseappcheck.googleapis.com/v1";var bj="exchangeDebugToken",YT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},EK=24*60*60*1e3;var Q0=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new am,this.pending.promise.catch(n=>{}),yield Cj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new am,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Cj(t){return new Promise(e=>{setTimeout(e,t)})}var Ij={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ui=new $C("appCheck","AppCheck",Ij);function n1(t){if(!or(t).activated)throw Ui.create("use-before-activation",{appName:t.name})}function r1(r,i){return b(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(y){throw Ui.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Ui.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(y){throw Ui.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let h=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+h,issuedAtTimeMillis:m}})}function i1(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${wj}/projects/${n}/apps/${r}:${bj}?key=${i}`,body:{debug_token:e}}}var Ej="firebase-app-check-database",xj=1,Z0="firebase-app-check-store";var Xf=null;function Mj(){return Xf||(Xf=new Promise((t,e)=>{try{let n=indexedDB.open(Ej,xj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ui.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Z0,{keyPath:"compositeKey"})}}}catch(n){e(Ui.create("storage-open",{originalErrorMessage:n?.message}))}}),Xf)}function Tj(t,e){return Dj(Oj(t),e)}function Dj(t,e){return b(this,null,function*(){let r=(yield Mj()).transaction(Z0,"readwrite"),o=r.objectStore(Z0).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Ui.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function Oj(t){return`${t.options.appId}-${t.name}`}var X0=new zu("@firebase/app-check");function Y0(t,e){return Bu()?Tj(t,e).catch(n=>{X0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function o1(){return t1().enabled}function s1(){return b(this,null,function*(){let t=t1();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Sj={error:"UNKNOWN_ERROR"};function Pj(t){return BC.encodeString(JSON.stringify(t),!1)}function J0(t,e=!1){return b(this,null,function*(){let n=t.app;n1(n);let r=or(n),i=r.token,o;if(i&&!xl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(xl(c)?i=c:yield Y0(n,void 0))}if(!e&&i&&xl(i))return{token:i.token};let s=!1;if(o1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=r1(i1(n,yield s1()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Y0(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield or(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?X0.warn(c.message):X0.error(c),o=c}let a;return i?o?xl(i)?a={token:i.token,internalError:o}:a=ZT(o):(a={token:i.token},r.token=i,yield Y0(n,i)):a=ZT(o),s&&Nj(n,a),a})}function Aj(t){return b(this,null,function*(){let e=t.app;n1(e);let{provider:n}=or(e);if(o1()){let r=yield s1(),{token:i}=yield r1(i1(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function kj(t,e,n,r){let{app:i}=t,o=or(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&xl(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),QT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>QT(t))}function a1(t,e){let n=or(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function QT(t){let{app:e}=t,n=or(e),r=n.tokenRefresher;r||(r=Rj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Rj(t){let{app:e}=t;return new Q0(()=>b(this,null,function*(){let n=or(e),r;if(n.token?r=yield J0(t,!0):r=yield J0(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=or(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},YT.RETRIAL_MIN_WAIT,YT.RETRIAL_MAX_WAIT)}function Nj(t,e){let n=or(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function xl(t){return t.expireTimeMillis-Date.now()>0}function ZT(t){return{token:Pj(Sj),error:t}}var e_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=or(this.app);for(let n of e)a1(this.app,n.next);return Promise.resolve()}};function Fj(t,e){return new e_(t,e)}function Lj(t){return{getToken:e=>J0(t,e),getLimitedUseToken:()=>Aj(t),addTokenListener:e=>kj(t,"INTERNAL",e),removeTokenListener:e=>a1(t.app,e)}}var Vj="@firebase/app-check",Uj="0.8.7";var jj="app-check",XT="app-check-internal";function Bj(){po(new jn(jj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Fj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(XT).initialize()})),po(new jn(XT,t=>{let e=t.getProvider("app-check").getImmediate();return Lj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Bn(Vj,Uj)}Bj();var $j=["localhost","0.0.0.0","127.0.0.1"],FK=typeof window<"u"&&$j.includes(window.location.hostname);var zj=["ngOnDestroy"],l1=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(zj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(d=>{let h=d?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,h),h})})})});var Jf=class{constructor(e){return e}},ji=new ne("angularfire2.app.options"),Bi=new ne("angularfire2.app.name");function zo(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=et.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>et.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;qj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Jf(s)}var qj=(t,...e)=>{$y()&&typeof console<"u"&&console[t](...e)},Hj={provide:Jf,useFactory:zo,deps:[ji,De,[new Ro,Bi]]},u1=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:ji,useValue:n},{provide:Bi,useValue:r}]}}constructor(n){et.registerVersion("angularfire",Jr.full,"core"),et.registerVersion("angularfire",Jr.full,"app-compat"),et.registerVersion("angular",wM.full,n.toString())}static \u0275fac=function(r){return new(r||t)(V(Ot))};static \u0275mod=ke({type:t});static \u0275inj=Ae({providers:[Hj]})}return t})();function ya(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return Gj(i,s)||(c1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Wj?" You may need to reload as Firebase is not HMR aware.":""}`),c1("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function Gj(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Wj=typeof module<"u"&&!!module.hot,c1=(t,...e)=>{$y()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var n_=new ne("angularfire2.auth.use-emulator"),r_=new ne("angularfire2.auth.settings"),i_=new ne("angularfire2.auth.tenant-id"),o_=new ne("angularfire2.auth.langugage-code"),s_=new ne("angularfire2.auth.use-device-language"),a_=new ne("angularfire.auth.persistence"),c_=(t,e,n,r,i,o,s,a)=>ya(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))c.settings[u]=d;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),qo=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,u,d,h,m,y){let M=new We,A=se(void 0).pipe(wn(s.outsideAngular),ze(()=>o.runOutsideAngular(()=>import("./chunk-AVF2RFYO.js"))),oe(()=>zo(n,o,r)),oe(P=>c_(P,o,a,u,d,h,c,m)),hd({bufferSize:1,refCount:!1}));if(Uo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=se(null);else{A.pipe(Pn()).subscribe();let P=A.pipe(ze(j=>j.getRedirectResult().then(Y=>Y,()=>null)),Vt,hd({bufferSize:1,refCount:!1})),z=A.pipe(ze(j=>new _e(Y=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(le=>Y.next(le),le=>Y.error(le),()=>Y.complete()))})))),W=A.pipe(ze(j=>new _e(Y=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(le=>Y.next(le),le=>Y.error(le),()=>Y.complete()))}))));this.authState=P.pipe(pd(z),qn(s.outsideAngular),wn(s.insideAngular)),this.user=P.pipe(pd(W),qn(s.outsideAngular),wn(s.insideAngular)),this.idToken=this.user.pipe(ze(j=>j?Te(j.getIdToken()):se(null))),this.idTokenResult=this.user.pipe(ze(j=>j?Te(j.getIdTokenResult()):se(null))),this.credential=Rs(P,M,this.authState.pipe(pt(j=>!j))).pipe(oe(j=>j?.user?j:null),qn(s.outsideAngular),wn(s.insideAngular))}return l1(this,A,o,{spy:{apply:(P,z,W)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&W.then(j=>M.next(j))}}})}static \u0275fac=function(r){return new(r||t)(V(ji),V(Bi,8),V(Ot),V(De),V(ga),V(n_,8),V(r_,8),V(i_,8),V(o_,8),V(s_,8),V(a_,8),V(Xr,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),d1=(()=>{class t{constructor(){et.registerVersion("angularfire",Jr.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ke({type:t});static \u0275inj=Ae({providers:[qo]})}return t})();var f1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h1={};var $i,u_;(function(){var t;function e(x,w){function C(){}C.prototype=w.prototype,x.D=w.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(T,O,k){for(var I=Array(arguments.length-2),Ur=2;Ur<arguments.length;Ur++)I[Ur-2]=arguments[Ur];return w.prototype[O].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,C){C||(C=0);var T=Array(16);if(typeof w=="string")for(var O=0;16>O;++O)T[O]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(O=0;16>O;++O)T[O]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=x.g[0],C=x.g[1],O=x.g[2];var k=x.g[3],I=w+(k^C&(O^k))+T[0]+3614090360&4294967295;w=C+(I<<7&4294967295|I>>>25),I=k+(O^w&(C^O))+T[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=O+(C^k&(w^C))+T[2]+606105819&4294967295,O=k+(I<<17&4294967295|I>>>15),I=C+(w^O&(k^w))+T[3]+3250441966&4294967295,C=O+(I<<22&4294967295|I>>>10),I=w+(k^C&(O^k))+T[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(O^w&(C^O))+T[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=O+(C^k&(w^C))+T[6]+2821735955&4294967295,O=k+(I<<17&4294967295|I>>>15),I=C+(w^O&(k^w))+T[7]+4249261313&4294967295,C=O+(I<<22&4294967295|I>>>10),I=w+(k^C&(O^k))+T[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(O^w&(C^O))+T[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=O+(C^k&(w^C))+T[10]+4294925233&4294967295,O=k+(I<<17&4294967295|I>>>15),I=C+(w^O&(k^w))+T[11]+2304563134&4294967295,C=O+(I<<22&4294967295|I>>>10),I=w+(k^C&(O^k))+T[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(O^w&(C^O))+T[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=O+(C^k&(w^C))+T[14]+2792965006&4294967295,O=k+(I<<17&4294967295|I>>>15),I=C+(w^O&(k^w))+T[15]+1236535329&4294967295,C=O+(I<<22&4294967295|I>>>10),I=w+(O^k&(C^O))+T[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^O&(w^C))+T[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=O+(w^C&(k^w))+T[11]+643717713&4294967295,O=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(O^k))+T[0]+3921069994&4294967295,C=O+(I<<20&4294967295|I>>>12),I=w+(O^k&(C^O))+T[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^O&(w^C))+T[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=O+(w^C&(k^w))+T[15]+3634488961&4294967295,O=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(O^k))+T[4]+3889429448&4294967295,C=O+(I<<20&4294967295|I>>>12),I=w+(O^k&(C^O))+T[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^O&(w^C))+T[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=O+(w^C&(k^w))+T[3]+4107603335&4294967295,O=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(O^k))+T[8]+1163531501&4294967295,C=O+(I<<20&4294967295|I>>>12),I=w+(O^k&(C^O))+T[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^O&(w^C))+T[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=O+(w^C&(k^w))+T[7]+1735328473&4294967295,O=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(O^k))+T[12]+2368359562&4294967295,C=O+(I<<20&4294967295|I>>>12),I=w+(C^O^k)+T[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^O)+T[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=O+(k^w^C)+T[11]+1839030562&4294967295,O=k+(I<<16&4294967295|I>>>16),I=C+(O^k^w)+T[14]+4259657740&4294967295,C=O+(I<<23&4294967295|I>>>9),I=w+(C^O^k)+T[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^O)+T[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=O+(k^w^C)+T[7]+4139469664&4294967295,O=k+(I<<16&4294967295|I>>>16),I=C+(O^k^w)+T[10]+3200236656&4294967295,C=O+(I<<23&4294967295|I>>>9),I=w+(C^O^k)+T[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^O)+T[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=O+(k^w^C)+T[3]+3572445317&4294967295,O=k+(I<<16&4294967295|I>>>16),I=C+(O^k^w)+T[6]+76029189&4294967295,C=O+(I<<23&4294967295|I>>>9),I=w+(C^O^k)+T[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^O)+T[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=O+(k^w^C)+T[15]+530742520&4294967295,O=k+(I<<16&4294967295|I>>>16),I=C+(O^k^w)+T[2]+3299628645&4294967295,C=O+(I<<23&4294967295|I>>>9),I=w+(O^(C|~k))+T[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~O))+T[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=O+(w^(k|~C))+T[14]+2878612391&4294967295,O=k+(I<<15&4294967295|I>>>17),I=C+(k^(O|~w))+T[5]+4237533241&4294967295,C=O+(I<<21&4294967295|I>>>11),I=w+(O^(C|~k))+T[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~O))+T[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=O+(w^(k|~C))+T[10]+4293915773&4294967295,O=k+(I<<15&4294967295|I>>>17),I=C+(k^(O|~w))+T[1]+2240044497&4294967295,C=O+(I<<21&4294967295|I>>>11),I=w+(O^(C|~k))+T[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~O))+T[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=O+(w^(k|~C))+T[6]+2734768916&4294967295,O=k+(I<<15&4294967295|I>>>17),I=C+(k^(O|~w))+T[13]+1309151649&4294967295,C=O+(I<<21&4294967295|I>>>11),I=w+(O^(C|~k))+T[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~O))+T[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=O+(w^(k|~C))+T[2]+718787259&4294967295,O=k+(I<<15&4294967295|I>>>17),I=C+(k^(O|~w))+T[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+k&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var C=w-this.blockSize,T=this.B,O=this.h,k=0;k<w;){if(O==0)for(;k<=C;)i(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<w;)if(T[O++]=x.charCodeAt(k++),O==this.blockSize){i(this,T),O=0;break}}else for(;k<w;)if(T[O++]=x[k++],O==this.blockSize){i(this,T),O=0;break}}this.h=O,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var C=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=C&255,C/=256;for(this.u(x),x=Array(16),w=C=0;4>w;++w)for(var T=0;32>T;T+=8)x[C++]=this.g[w]>>>T&255;return x};function o(x,w){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=w(x)}function s(x,w){this.h=w;for(var C=[],T=!0,O=x.length-1;0<=O;O--){var k=x[O]|0;T&&k==w||(C[O]=k,T=!1)}this.g=C}var a={};function c(x){return-128<=x&&128>x?o(x,function(w){return new s([w|0],0>w?-1:0)}):new s([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return P(u(-x));for(var w=[],C=1,T=0;x>=C;T++)w[T]=x/C|0,C*=4294967296;return new s(w,0)}function d(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return P(d(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(w,8)),T=h,O=0;O<x.length;O+=8){var k=Math.min(8,x.length-O),I=parseInt(x.substring(O,O+k),w);8>k?(k=u(Math.pow(w,k)),T=T.j(k).add(u(I))):(T=T.j(C),T=T.add(u(I)))}return T}var h=c(0),m=c(1),y=c(16777216);t=s.prototype,t.m=function(){if(A(this))return-P(this).m();for(var x=0,w=1,C=0;C<this.g.length;C++){var T=this.i(C);x+=(0<=T?T:4294967296+T)*w,w*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M(this))return"0";if(A(this))return"-"+P(this).toString(x);for(var w=u(Math.pow(x,6)),C=this,T="";;){var O=Y(C,w).g;C=z(C,O.j(w));var k=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=O,M(C))return k+T;for(;6>k.length;)k="0"+k;T=k+T}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function M(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function A(x){return x.h==-1}t.l=function(x){return x=z(this,x),A(x)?-1:M(x)?0:1};function P(x){for(var w=x.g.length,C=[],T=0;T<w;T++)C[T]=~x.g[T];return new s(C,~x.h).add(m)}t.abs=function(){return A(this)?P(this):this},t.add=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],T=0,O=0;O<=w;O++){var k=T+(this.i(O)&65535)+(x.i(O)&65535),I=(k>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);T=I>>>16,k&=65535,I&=65535,C[O]=I<<16|k}return new s(C,C[C.length-1]&-2147483648?-1:0)};function z(x,w){return x.add(P(w))}t.j=function(x){if(M(this)||M(x))return h;if(A(this))return A(x)?P(this).j(P(x)):P(P(this).j(x));if(A(x))return P(this.j(P(x)));if(0>this.l(y)&&0>x.l(y))return u(this.m()*x.m());for(var w=this.g.length+x.g.length,C=[],T=0;T<2*w;T++)C[T]=0;for(T=0;T<this.g.length;T++)for(var O=0;O<x.g.length;O++){var k=this.i(T)>>>16,I=this.i(T)&65535,Ur=x.i(O)>>>16,pc=x.i(O)&65535;C[2*T+2*O]+=I*pc,W(C,2*T+2*O),C[2*T+2*O+1]+=k*pc,W(C,2*T+2*O+1),C[2*T+2*O+1]+=I*Ur,W(C,2*T+2*O+1),C[2*T+2*O+2]+=k*Ur,W(C,2*T+2*O+2)}for(T=0;T<w;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=w;T<2*w;T++)C[T]=0;return new s(C,0)};function W(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function j(x,w){this.g=x,this.h=w}function Y(x,w){if(M(w))throw Error("division by zero");if(M(x))return new j(h,h);if(A(x))return w=Y(P(x),w),new j(P(w.g),P(w.h));if(A(w))return w=Y(x,P(w)),new j(P(w.g),w.h);if(30<x.g.length){if(A(x)||A(w))throw Error("slowDivide_ only works with positive integers.");for(var C=m,T=w;0>=T.l(x);)C=le(C),T=le(T);var O=ie(C,1),k=ie(T,1);for(T=ie(T,2),C=ie(C,2);!M(T);){var I=k.add(T);0>=I.l(x)&&(O=O.add(C),k=I),T=ie(T,1),C=ie(C,1)}return w=z(x,O.j(w)),new j(O,w)}for(O=h;0<=x.l(w);){for(C=Math.max(1,Math.floor(x.m()/w.m())),T=Math.ceil(Math.log(C)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),k=u(C),I=k.j(w);A(I)||0<I.l(x);)C-=T,k=u(C),I=k.j(w);M(k)&&(k=m),O=O.add(k),x=z(x,I)}return new j(O,x)}t.A=function(x){return Y(this,x).h},t.and=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],T=0;T<w;T++)C[T]=this.i(T)&x.i(T);return new s(C,this.h&x.h)},t.or=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],T=0;T<w;T++)C[T]=this.i(T)|x.i(T);return new s(C,this.h|x.h)},t.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],T=0;T<w;T++)C[T]=this.i(T)^x.i(T);return new s(C,this.h^x.h)};function le(x){for(var w=x.g.length+1,C=[],T=0;T<w;T++)C[T]=x.i(T)<<1|x.i(T-1)>>>31;return new s(C,x.h)}function ie(x,w){var C=w>>5;w%=32;for(var T=x.g.length-C,O=[],k=0;k<T;k++)O[k]=0<w?x.i(k+C)>>>w|x.i(k+C+1)<<32-w:x.i(k+C);return new s(O,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,u_=h1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,$i=h1.Integer=s}).apply(typeof f1<"u"?f1:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ei={};var d_,f_,_a,h_,Ml,th,p_,m_,g_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,p){return l==Array.prototype||l==Object.prototype||(l[f]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var f=0;f<l.length;++f){var p=l[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var p=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var S=l[g];if(!(S in p))break e;p=p[S]}l=l[l.length-1],g=p[l],f=f(g),f!=g&&f!=null&&e(p,l,{configurable:!0,writable:!0,value:f})}}function o(l,f){l instanceof String&&(l+="");var p=0,g=!1,S={next:function(){if(!g&&p<l.length){var F=p++;return{value:f(F,l[F]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(l){return l||function(){return o(this,function(f,p){return p})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,p){return l.call.apply(l.bind,arguments)}function h(l,f,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),l.apply(f,S)}}return function(){return l.apply(f,arguments)}}function m(l,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function y(l,f){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function M(l,f){function p(){}p.prototype=f.prototype,l.aa=f.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,S,F){for(var H=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)H[Qe-2]=arguments[Qe];return f.prototype[S].apply(g,H)}}function A(l){let f=l.length;if(0<f){let p=Array(f);for(let g=0;g<f;g++)p[g]=l[g];return p}return[]}function P(l,f){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let S=l.length||0,F=g.length||0;l.length=S+F;for(let H=0;H<F;H++)l[S+H]=g[H]}else l.push(g)}}class z{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function W(l){return/^[\s\xa0]*$/.test(l)}function j(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function Y(l){return Y[" "](l),l}Y[" "]=function(){};var le=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ie(l,f,p){for(let g in l)f.call(p,l[g],g,l)}function x(l,f){for(let p in l)f.call(void 0,l[p],p,l)}function w(l){let f={};for(let p in l)f[p]=l[p];return f}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,f){let p,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(p in g)l[p]=g[p];for(let F=0;F<C.length;F++)p=C[F],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function O(l){var f=1;l=l.split(":");let p=[];for(;0<f&&l.length;)p.push(l.shift()),f--;return l.length&&p.push(l.join(":")),p}function k(l){a.setTimeout(()=>{throw l},0)}function I(){var l=Np;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ur{constructor(){this.h=this.g=null}add(f,p){let g=pc.get();g.set(f,p),this.h?this.h.next=g:this.g=g,this.h=g}}var pc=new z(()=>new fA,l=>l.reset());class fA{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let mc,gc=!1,Np=new Ur,Lb=()=>{let l=a.Promise.resolve(void 0);mc=()=>{l.then(hA)}};var hA=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(p){k(p)}var f=pc;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}gc=!1};function ui(){this.s=this.s,this.C=this.C}ui.prototype.s=!1,ui.prototype.ma=function(){this.s||(this.s=!0,this.N())},ui.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $t(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};var pA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return l}();function yc(l,f){if($t.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(le){e:{try{Y(f.nodeName);var S=!0;break e}catch{}S=!1}S||(f=null)}}else p=="mouseover"?f=l.fromElement:p=="mouseout"&&(f=l.toElement);this.relatedTarget=f,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:mA[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&yc.aa.h.call(this)}}M(yc,$t);var mA={2:"touch",3:"pen",4:"mouse"};yc.prototype.h=function(){yc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var _c="closure_listenable_"+(1e6*Math.random()|0),gA=0;function yA(l,f,p,g,S){this.listener=l,this.proxy=null,this.src=f,this.type=p,this.capture=!!g,this.ha=S,this.key=++gA,this.da=this.fa=!1}function Cu(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Iu(l){this.src=l,this.g={},this.h=0}Iu.prototype.add=function(l,f,p,g,S){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var H=Lp(l,f,g,S);return-1<H?(f=l[H],p||(f.fa=!1)):(f=new yA(f,this.src,F,!!g,S),f.fa=p,l.push(f)),f};function Fp(l,f){var p=f.type;if(p in l.g){var g=l.g[p],S=Array.prototype.indexOf.call(g,f,void 0),F;(F=0<=S)&&Array.prototype.splice.call(g,S,1),F&&(Cu(f),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Lp(l,f,p,g){for(var S=0;S<l.length;++S){var F=l[S];if(!F.da&&F.listener==f&&F.capture==!!p&&F.ha==g)return S}return-1}var Vp="closure_lm_"+(1e6*Math.random()|0),Up={};function Vb(l,f,p,g,S){if(g&&g.once)return jb(l,f,p,g,S);if(Array.isArray(f)){for(var F=0;F<f.length;F++)Vb(l,f[F],p,g,S);return null}return p=zp(p),l&&l[_c]?l.K(f,p,u(g)?!!g.capture:!!g,S):Ub(l,f,p,!1,g,S)}function Ub(l,f,p,g,S,F){if(!f)throw Error("Invalid event type");var H=u(S)?!!S.capture:!!S,Qe=Bp(l);if(Qe||(l[Vp]=Qe=new Iu(l)),p=Qe.add(f,p,g,H,F),p.proxy)return p;if(g=_A(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)pA||(S=H),S===void 0&&(S=!1),l.addEventListener(f.toString(),g,S);else if(l.attachEvent)l.attachEvent($b(f.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function _A(){function l(p){return f.call(l.src,l.listener,p)}let f=vA;return l}function jb(l,f,p,g,S){if(Array.isArray(f)){for(var F=0;F<f.length;F++)jb(l,f[F],p,g,S);return null}return p=zp(p),l&&l[_c]?l.L(f,p,u(g)?!!g.capture:!!g,S):Ub(l,f,p,!0,g,S)}function Bb(l,f,p,g,S){if(Array.isArray(f))for(var F=0;F<f.length;F++)Bb(l,f[F],p,g,S);else g=u(g)?!!g.capture:!!g,p=zp(p),l&&l[_c]?(l=l.i,f=String(f).toString(),f in l.g&&(F=l.g[f],p=Lp(F,p,g,S),-1<p&&(Cu(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete l.g[f],l.h--)))):l&&(l=Bp(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Lp(f,p,g,S)),(p=-1<l?f[l]:null)&&jp(p))}function jp(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[_c])Fp(f.i,l);else{var p=l.type,g=l.proxy;f.removeEventListener?f.removeEventListener(p,g,l.capture):f.detachEvent?f.detachEvent($b(p),g):f.addListener&&f.removeListener&&f.removeListener(g),(p=Bp(f))?(Fp(p,l),p.h==0&&(p.src=null,f[Vp]=null)):Cu(l)}}}function $b(l){return l in Up?Up[l]:Up[l]="on"+l}function vA(l,f){if(l.da)l=!0;else{f=new yc(f,this);var p=l.listener,g=l.ha||l.src;l.fa&&jp(l),l=p.call(g,f)}return l}function Bp(l){return l=l[Vp],l instanceof Iu?l:null}var $p="__closure_events_fn_"+(1e9*Math.random()>>>0);function zp(l){return typeof l=="function"?l:(l[$p]||(l[$p]=function(f){return l.handleEvent(f)}),l[$p])}function zt(){ui.call(this),this.i=new Iu(this),this.M=this,this.F=null}M(zt,ui),zt.prototype[_c]=!0,zt.prototype.removeEventListener=function(l,f,p,g){Bb(this,l,f,p,g)};function Jt(l,f){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=f.type||f,typeof f=="string")f=new $t(f,l);else if(f instanceof $t)f.target=f.target||l;else{var S=f;f=new $t(g,l),T(f,S)}if(S=!0,p)for(var F=p.length-1;0<=F;F--){var H=f.g=p[F];S=Eu(H,g,!0,f)&&S}if(H=f.g=l,S=Eu(H,g,!0,f)&&S,S=Eu(H,g,!1,f)&&S,p)for(F=0;F<p.length;F++)H=f.g=p[F],S=Eu(H,g,!1,f)&&S}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var p=l.g[f],g=0;g<p.length;g++)Cu(p[g]);delete l.g[f],l.h--}}this.F=null},zt.prototype.K=function(l,f,p,g){return this.i.add(String(l),f,!1,p,g)},zt.prototype.L=function(l,f,p,g){return this.i.add(String(l),f,!0,p,g)};function Eu(l,f,p,g){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var S=!0,F=0;F<f.length;++F){var H=f[F];if(H&&!H.da&&H.capture==p){var Qe=H.listener,Nt=H.ha||H.src;H.fa&&Fp(l.i,H),S=Qe.call(Nt,g)!==!1&&S}}return S&&!g.defaultPrevented}function zb(l,f,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function qb(l){l.g=zb(()=>{l.g=null,l.i&&(l.i=!1,qb(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class wA extends ui{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:qb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vc(l){ui.call(this),this.h=l,this.g={}}M(vc,ui);var Hb=[];function Gb(l){ie(l.g,function(f,p){this.g.hasOwnProperty(p)&&jp(f)},l),l.g={}}vc.prototype.N=function(){vc.aa.N.call(this),Gb(this)},vc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qp=a.JSON.stringify,bA=a.JSON.parse,CA=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Hp(){}Hp.prototype.h=null;function Wb(l){return l.h||(l.h=l.i())}function Kb(){}var wc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gp(){$t.call(this,"d")}M(Gp,$t);function Wp(){$t.call(this,"c")}M(Wp,$t);var lo={},Yb=null;function xu(){return Yb=Yb||new zt}lo.La="serverreachability";function Qb(l){$t.call(this,lo.La,l)}M(Qb,$t);function bc(l){let f=xu();Jt(f,new Qb(f))}lo.STAT_EVENT="statevent";function Zb(l,f){$t.call(this,lo.STAT_EVENT,l),this.stat=f}M(Zb,$t);function en(l){let f=xu();Jt(f,new Zb(f,l))}lo.Ma="timingevent";function Xb(l,f){$t.call(this,lo.Ma,l),this.size=f}M(Xb,$t);function Cc(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Ic(){this.g=!0}Ic.prototype.xa=function(){this.g=!1};function IA(l,f,p,g,S,F){l.info(function(){if(l.g)if(F)for(var H="",Qe=F.split("&"),Nt=0;Nt<Qe.length;Nt++){var je=Qe[Nt].split("=");if(1<je.length){var qt=je[0];je=je[1];var Ht=qt.split("_");H=2<=Ht.length&&Ht[1]=="type"?H+(qt+"="+je+"&"):H+(qt+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+f+`
`+p+`
`+H})}function EA(l,f,p,g,S,F,H){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+f+`
`+p+`
`+F+" "+H})}function ws(l,f,p,g){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+MA(l,p)+(g?" "+g:"")})}function xA(l,f){l.info(function(){return"TIMEOUT: "+f})}Ic.prototype.info=function(){};function MA(l,f){if(!l.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<S.length;H++)S[H]=""}}}}return qp(p)}catch{return f}}var Mu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kp;function Tu(){}M(Tu,Hp),Tu.prototype.g=function(){return new XMLHttpRequest},Tu.prototype.i=function(){return{}},Kp=new Tu;function di(l,f,p,g){this.j=l,this.i=f,this.l=p,this.R=g||1,this.U=new vc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eC}function eC(){this.i=null,this.g="",this.h=!1}var tC={},Yp={};function Qp(l,f,p){l.L=1,l.v=Pu(jr(f)),l.m=p,l.P=!0,nC(l,null)}function nC(l,f){l.F=Date.now(),Du(l),l.A=jr(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),gC(p.i,"t",g),l.C=0,p=l.j.J,l.h=new eC,l.g=RC(l.j,p?f:null,!l.m),0<l.O&&(l.M=new wA(m(l.Y,l,l.g),l.O)),f=l.U,p=l.g,g=l.ca;var S="readystatechange";Array.isArray(S)||(S&&(Hb[0]=S.toString()),S=Hb);for(var F=0;F<S.length;F++){var H=Vb(p,S[F],g||f.handleEvent,!1,f.h||f);if(!H)break;f.g[H.key]=H}f=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),bc(),IA(l.i,l.u,l.A,l.l,l.R,l.m)}di.prototype.ca=function(l){l=l.target;let f=this.M;f&&Br(l)==3?f.j():this.Y(l)},di.prototype.Y=function(l){try{if(l==this.g)e:{let Ht=Br(this.g);var f=this.g.Ba();let Is=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||IC(this.g)))){this.J||Ht!=4||f==7||(f==8||0>=Is?bc(3):bc(2)),Zp(this);var p=this.g.Z();this.X=p;t:if(rC(this)){var g=IC(this.g);l="";var S=g.length,F=Br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){uo(this),Ec(this);var H="";break t}this.h.i=new a.TextDecoder}for(f=0;f<S;f++)this.h.h=!0,l+=this.h.i.decode(g[f],{stream:!(F&&f==S-1)});g.length=0,this.h.g+=l,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,EA(this.i,this.u,this.A,this.l,this.R,Ht,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Nt=this.g;if((Qe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Qe)){var je=Qe;break t}}je=null}if(p=je)ws(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xp(this,p);else{this.o=!1,this.s=3,en(12),uo(this),Ec(this);break e}}if(this.P){p=!0;let Un;for(;!this.J&&this.C<H.length;)if(Un=TA(this,H),Un==Yp){Ht==4&&(this.s=4,en(14),p=!1),ws(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==tC){this.s=4,en(15),ws(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else ws(this.i,this.l,Un,null),Xp(this,Un);if(rC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||H.length!=0||this.h.h||(this.s=1,en(16),p=!1),this.o=this.o&&p,!p)ws(this.i,this.l,H,"[Invalid Chunked Response]"),uo(this),Ec(this);else if(0<H.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),im(qt),qt.M=!0,en(11))}}else ws(this.i,this.l,H,null),Xp(this,H);Ht==4&&uo(this),this.o&&!this.J&&(Ht==4?SC(this.j,this):(this.o=!1,Du(this)))}else qA(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),uo(this),Ec(this)}}}catch{}finally{}};function rC(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function TA(l,f){var p=l.C,g=f.indexOf(`
`,p);return g==-1?Yp:(p=Number(f.substring(p,g)),isNaN(p)?tC:(g+=1,g+p>f.length?Yp:(f=f.slice(g,g+p),l.C=g+p,f)))}di.prototype.cancel=function(){this.J=!0,uo(this)};function Du(l){l.S=Date.now()+l.I,iC(l,l.I)}function iC(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Cc(m(l.ba,l),f)}function Zp(l){l.B&&(a.clearTimeout(l.B),l.B=null)}di.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(xA(this.i,this.A),this.L!=2&&(bc(),en(17)),uo(this),this.s=2,Ec(this)):iC(this,this.S-l)};function Ec(l){l.j.G==0||l.J||SC(l.j,l)}function uo(l){Zp(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Gb(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Xp(l,f){try{var p=l.j;if(p.G!=0&&(p.g==l||Jp(p.h,l))){if(!l.K&&Jp(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(f)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Fu(p),Ru(p);else break e;rm(p),en(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=Cc(m(p.Za,p),6e3));if(1>=aC(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ho(p,11)}else if((l.K||p.g==l)&&Fu(p),!W(f))for(S=p.Da.g.parse(f),f=0;f<S.length;f++){let je=S[f];if(p.T=je[0],je=je[1],p.G==2)if(je[0]=="c"){p.K=je[1],p.ia=je[2];let qt=je[3];qt!=null&&(p.la=qt,p.j.info("VER="+p.la));let Ht=je[4];Ht!=null&&(p.Aa=Ht,p.j.info("SVER="+p.Aa));let Is=je[5];Is!=null&&typeof Is=="number"&&0<Is&&(g=1.5*Is,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Un=l.g;if(Un){let Vu=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vu){var F=g.h;F.g||Vu.indexOf("spdy")==-1&&Vu.indexOf("quic")==-1&&Vu.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(em(F,F.h),F.h=null))}if(g.D){let om=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(g.ya=om,rt(g.I,g.D,om))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var H=l;if(g.qa=kC(g,g.J?g.ia:null,g.W),H.K){cC(g.h,H);var Qe=H,Nt=g.L;Nt&&(Qe.I=Nt),Qe.B&&(Zp(Qe),Du(Qe)),g.g=H}else DC(g);0<p.i.length&&Nu(p)}else je[0]!="stop"&&je[0]!="close"||ho(p,7);else p.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?ho(p,7):nm(p):je[0]!="noop"&&p.l&&p.l.ta(je),p.v=0)}}bc(4)}catch{}}var DA=class{constructor(l,f){this.g=l,this.map=f}};function oC(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sC(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function aC(l){return l.h?1:l.g?l.g.size:0}function Jp(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function em(l,f){l.g?l.g.add(f):l.h=f}function cC(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}oC.prototype.cancel=function(){if(this.i=lC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function lC(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let p of l.g.values())f=f.concat(p.D);return f}return A(l.i)}function OA(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],p=l.length,g=0;g<p;g++)f.push(l[g]);return f}f=[],p=0;for(g in l)f[p++]=l[g];return f}function SA(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var p=0;p<l;p++)f.push(p);return f}f=[],p=0;for(let g in l)f[p++]=g;return f}}}function uC(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var p=SA(l),g=OA(l),S=g.length,F=0;F<S;F++)f.call(void 0,g[F],p&&p[F],l)}var dC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PA(l,f){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),S=null;if(0<=g){var F=l[p].substring(0,g);S=l[p].substring(g+1)}else F=l[p];f(F,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function fo(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof fo){this.h=l.h,Ou(this,l.j),this.o=l.o,this.g=l.g,Su(this,l.s),this.l=l.l;var f=l.i,p=new Tc;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),fC(this,p),this.m=l.m}else l&&(f=String(l).match(dC))?(this.h=!1,Ou(this,f[1]||"",!0),this.o=xc(f[2]||""),this.g=xc(f[3]||"",!0),Su(this,f[4]),this.l=xc(f[5]||"",!0),fC(this,f[6]||"",!0),this.m=xc(f[7]||"")):(this.h=!1,this.i=new Tc(null,this.h))}fo.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Mc(f,hC,!0),":");var p=this.g;return(p||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Mc(f,hC,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Mc(p,p.charAt(0)=="/"?RA:kA,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Mc(p,FA)),l.join("")};function jr(l){return new fo(l)}function Ou(l,f,p){l.j=p?xc(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Su(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function fC(l,f,p){f instanceof Tc?(l.i=f,LA(l.i,l.h)):(p||(f=Mc(f,NA)),l.i=new Tc(f,l.h))}function rt(l,f,p){l.i.set(f,p)}function Pu(l){return rt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function xc(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Mc(l,f,p){return typeof l=="string"?(l=encodeURI(l).replace(f,AA),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function AA(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var hC=/[#\/\?@]/g,kA=/[#\?:]/g,RA=/[#\?]/g,NA=/[#\?@]/g,FA=/#/g;function Tc(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function fi(l){l.g||(l.g=new Map,l.h=0,l.i&&PA(l.i,function(f,p){l.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Tc.prototype,t.add=function(l,f){fi(this),this.i=null,l=bs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(f),this.h+=1,this};function pC(l,f){fi(l),f=bs(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function mC(l,f){return fi(l),f=bs(l,f),l.g.has(f)}t.forEach=function(l,f){fi(this),this.g.forEach(function(p,g){p.forEach(function(S){l.call(f,S,g,this)},this)},this)},t.na=function(){fi(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let g=0;g<f.length;g++){let S=l[g];for(let F=0;F<S.length;F++)p.push(f[g])}return p},t.V=function(l){fi(this);let f=[];if(typeof l=="string")mC(this,l)&&(f=f.concat(this.g.get(bs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)f=f.concat(l[p])}return f},t.set=function(l,f){return fi(this),this.i=null,l=bs(this,l),mC(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function gC(l,f,p){pC(l,f),0<p.length&&(l.i=null,l.g.set(bs(l,f),A(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var g=f[p];let F=encodeURIComponent(String(g)),H=this.V(g);for(g=0;g<H.length;g++){var S=F;H[g]!==""&&(S+="="+encodeURIComponent(String(H[g]))),l.push(S)}}return this.i=l.join("&")};function bs(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function LA(l,f){f&&!l.j&&(fi(l),l.i=null,l.g.forEach(function(p,g){var S=g.toLowerCase();g!=S&&(pC(this,g),gC(this,S,p))},l)),l.j=f}function VA(l,f){let p=new Ic;if(a.Image){let g=new Image;g.onload=y(hi,p,"TestLoadImage: loaded",!0,f,g),g.onerror=y(hi,p,"TestLoadImage: error",!1,f,g),g.onabort=y(hi,p,"TestLoadImage: abort",!1,f,g),g.ontimeout=y(hi,p,"TestLoadImage: timeout",!1,f,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else f(!1)}function UA(l,f){let p=new Ic,g=new AbortController,S=setTimeout(()=>{g.abort(),hi(p,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:g.signal}).then(F=>{clearTimeout(S),F.ok?hi(p,"TestPingServer: ok",!0,f):hi(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(S),hi(p,"TestPingServer: error",!1,f)})}function hi(l,f,p,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(p)}catch{}}function jA(){this.g=new CA}function BA(l,f,p){let g=p||"";try{uC(l,function(S,F){let H=S;u(S)&&(H=qp(S)),f.push(g+F+"="+encodeURIComponent(H))})}catch(S){throw f.push(g+"type="+encodeURIComponent("_badmap")),S}}function Dc(l){this.l=l.Ub||null,this.j=l.eb||!1}M(Dc,Hp),Dc.prototype.g=function(){return new Au(this.l,this.j)},Dc.prototype.i=function(l){return function(){return l}}({});function Au(l,f){zt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Au,zt),t=Au.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Sc(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Sc(this)),this.g&&(this.readyState=3,Sc(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yC(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function yC(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Oc(this):Sc(this),this.readyState==3&&yC(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Oc(this))},t.Qa=function(l){this.g&&(this.response=l,Oc(this))},t.ga=function(){this.g&&Oc(this)};function Oc(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Sc(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=f.next();return l.join(`\r
`)};function Sc(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _C(l){let f="";return ie(l,function(p,g){f+=g,f+=":",f+=p,f+=`\r
`}),f}function tm(l,f,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=_C(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):rt(l,f,p))}function ft(l){zt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(ft,zt);var $A=/^https?$/i,zA=["POST","PUT"];t=ft.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kp.g(),this.v=this.o?Wb(this.o):Wb(Kp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(F){vC(this,F);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)p.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let F of g.keys())p.set(F,g.get(F));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),S=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zA,f,void 0))||g||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,H]of p)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{CC(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){vC(this,F)}};function vC(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,wC(l),ku(l)}function wC(l){l.A||(l.A=!0,Jt(l,"complete"),Jt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Jt(this,"complete"),Jt(this,"abort"),ku(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ku(this,!0)),ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bC(this):this.bb())},t.bb=function(){bC(this)};function bC(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Br(l)!=4||l.Z()!=2)){if(l.u&&Br(l)==4)zb(l.Ea,0,l);else if(Jt(l,"readystatechange"),Br(l)==4){l.h=!1;try{let H=l.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var g;if(g=H===0){var S=String(l.D).match(dC)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),g=!$A.test(S?S.toLowerCase():"")}p=g}if(p)Jt(l,"complete"),Jt(l,"success");else{l.m=6;try{var F=2<Br(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",wC(l)}}finally{ku(l)}}}}function ku(l,f){if(l.g){CC(l);let p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Jt(l,"ready");try{p.onreadystatechange=g}catch{}}}function CC(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Br(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),bA(f)}};function IC(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function qA(l){let f={};l=(l.g&&2<=Br(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(W(l[g]))continue;var p=O(l[g]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let F=f[S]||[];f[S]=F,F.push(p)}x(f,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pc(l,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||f}function EC(l){this.Aa=0,this.i=[],this.j=new Ic,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pc("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pc("baseRetryDelayMs",5e3,l),this.cb=Pc("retryDelaySeedMs",1e4,l),this.Wa=Pc("forwardChannelMaxRetries",2,l),this.wa=Pc("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new oC(l&&l.concurrentRequestLimit),this.Da=new jA,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=EC.prototype,t.la=8,t.G=1,t.connect=function(l,f,p,g){en(0),this.W=l,this.H=f||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=kC(this,null,this.W),Nu(this)};function nm(l){if(xC(l),l.G==3){var f=l.U++,p=jr(l.I);if(rt(p,"SID",l.K),rt(p,"RID",f),rt(p,"TYPE","terminate"),Ac(l,p),f=new di(l,l.j,f),f.L=2,f.v=Pu(jr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=RC(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Du(f)}AC(l)}function Ru(l){l.g&&(im(l),l.g.cancel(),l.g=null)}function xC(l){Ru(l),l.u&&(a.clearTimeout(l.u),l.u=null),Fu(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Nu(l){if(!sC(l.h)&&!l.s){l.s=!0;var f=l.Ga;mc||Lb(),gc||(mc(),gc=!0),Np.add(f,l),l.B=0}}function HA(l,f){return aC(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Cc(m(l.Ga,l,f),PC(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let S=new di(this,this.j,l),F=this.o;if(this.S&&(F?(F=w(F),T(F,this.S)):F=this.S),this.m!==null||this.O||(S.H=F,F=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(f+=g,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=TC(this,S,f),p=jr(this.I),rt(p,"RID",l),rt(p,"CVER",22),this.D&&rt(p,"X-HTTP-Session-Id",this.D),Ac(this,p),F&&(this.O?f="headers="+encodeURIComponent(String(_C(F)))+"&"+f:this.m&&tm(p,this.m,F)),em(this.h,S),this.Ua&&rt(p,"TYPE","init"),this.P?(rt(p,"$req",f),rt(p,"SID","null"),S.T=!0,Qp(S,p,null)):Qp(S,p,f),this.G=2}}else this.G==3&&(l?MC(this,l):this.i.length==0||sC(this.h)||MC(this))};function MC(l,f){var p;f?p=f.l:p=l.U++;let g=jr(l.I);rt(g,"SID",l.K),rt(g,"RID",p),rt(g,"AID",l.T),Ac(l,g),l.m&&l.o&&tm(g,l.m,l.o),p=new di(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),f&&(l.i=f.D.concat(l.i)),f=TC(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),em(l.h,p),Qp(p,g,f)}function Ac(l,f){l.H&&ie(l.H,function(p,g){rt(f,g,p)}),l.l&&uC({},function(p,g){rt(f,g,p)})}function TC(l,f,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var S=l.i;let F=-1;for(;;){let H=["count="+p];F==-1?0<p?(F=S[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let Qe=!0;for(let Nt=0;Nt<p;Nt++){let je=S[Nt].g,qt=S[Nt].map;if(je-=F,0>je)F=Math.max(0,S[Nt].g-100),Qe=!1;else try{BA(qt,H,"req"+je+"_")}catch{g&&g(qt)}}if(Qe){g=H.join("&");break e}}}return l=l.i.splice(0,p),f.D=l,g}function DC(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;mc||Lb(),gc||(mc(),gc=!0),Np.add(f,l),l.v=0}}function rm(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Cc(m(l.Fa,l),PC(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,OC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Cc(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),Ru(this),OC(this))};function im(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function OC(l){l.g=new di(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=jr(l.qa);rt(f,"RID","rpc"),rt(f,"SID",l.K),rt(f,"AID",l.T),rt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&rt(f,"TO",l.ja),rt(f,"TYPE","xmlhttp"),Ac(l,f),l.m&&l.o&&tm(f,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Pu(jr(f)),p.m=null,p.P=!0,nC(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Ru(this),rm(this),en(19))};function Fu(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function SC(l,f){var p=null;if(l.g==f){Fu(l),im(l),l.g=null;var g=2}else if(Jp(l.h,f))p=f.D,cC(l.h,f),g=1;else return;if(l.G!=0){if(f.o)if(g==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var S=l.B;g=xu(),Jt(g,new Xb(g,p)),Nu(l)}else DC(l);else if(S=f.s,S==3||S==0&&0<f.X||!(g==1&&HA(l,f)||g==2&&rm(l)))switch(p&&0<p.length&&(f=l.h,f.i=f.i.concat(p)),S){case 1:ho(l,5);break;case 4:ho(l,10);break;case 3:ho(l,6);break;default:ho(l,2)}}}function PC(l,f){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*f}function ho(l,f){if(l.j.info("Error code "+f),f==2){var p=m(l.fb,l),g=l.Xa;let S=!g;g=new fo(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ou(g,"https"),Pu(g),S?VA(g.toString(),p):UA(g.toString(),p)}else en(2);l.G=0,l.l&&l.l.sa(f),AC(l),xC(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function AC(l){if(l.G=0,l.ka=[],l.l){let f=lC(l.h);(f.length!=0||l.i.length!=0)&&(P(l.ka,f),P(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function kC(l,f,p){var g=p instanceof fo?jr(p):new fo(p);if(g.g!="")f&&(g.g=f+"."+g.g),Su(g,g.s);else{var S=a.location;g=S.protocol,f=f?f+"."+S.hostname:S.hostname,S=+S.port;var F=new fo(null);g&&Ou(F,g),f&&(F.g=f),S&&Su(F,S),p&&(F.l=p),g=F}return p=l.D,f=l.ya,p&&f&&rt(g,p,f),rt(g,"VER",l.la),Ac(l,g),g}function RC(l,f,p){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new ft(new Dc({eb:p})):new ft(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function NC(){}t=NC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lu(){}Lu.prototype.g=function(l,f){return new vn(l,f)};function vn(l,f){zt.call(this),this.g=new EC(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!W(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!W(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Cs(this)}M(vn,zt),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){nm(this.g)},vn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=qp(l),l=p);f.i.push(new DA(f.Ya++,l)),f.G==3&&Nu(f)},vn.prototype.N=function(){this.g.l=null,delete this.j,nm(this.g),delete this.g,vn.aa.N.call(this)};function FC(l){Gp.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let p in f){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}M(FC,Gp);function LC(){Wp.call(this),this.status=1}M(LC,Wp);function Cs(l){this.g=l}M(Cs,NC),Cs.prototype.ua=function(){Jt(this.g,"a")},Cs.prototype.ta=function(l){Jt(this.g,new FC(l))},Cs.prototype.sa=function(l){Jt(this.g,new LC)},Cs.prototype.ra=function(){Jt(this.g,"b")},Lu.prototype.createWebChannel=Lu.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,g_=ei.createWebChannelTransport=function(){return new Lu},m_=ei.getStatEventTarget=function(){return xu()},p_=ei.Event=lo,th=ei.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mu.NO_ERROR=0,Mu.TIMEOUT=8,Mu.HTTP_ERROR=6,Ml=ei.ErrorCode=Mu,Jb.COMPLETE="complete",h_=ei.EventType=Jb,Kb.EventType=wc,wc.OPEN="a",wc.CLOSE="b",wc.ERROR="c",wc.MESSAGE="d",zt.prototype.listen=zt.prototype.K,_a=ei.WebChannel=Kb,f_=ei.FetchXmlHttpFactory=Dc,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,d_=ei.XhrIo=ft}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});var p1="@firebase/firestore";var xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");var Ya="10.12.5";var Yi=new zu("@firebase/firestore");function Ia(){return Yi.logLevel}function mD(t){Yi.setLogLevel(t)}function $(t,...e){if(Yi.logLevel<=dr.DEBUG){let n=e.map(bw);Yi.debug(`Firestore (${Ya}): ${t}`,...n)}}function _t(t,...e){if(Yi.logLevel<=dr.ERROR){let n=e.map(bw);Yi.error(`Firestore (${Ya}): ${t}`,...n)}}function Fn(t,...e){if(Yi.logLevel<=dr.WARN){let n=e.map(bw);Yi.warn(`Firestore (${Ya}): ${t}`,...n)}}function bw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function re(t="Unexpected state"){let e=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: `+t;throw _t(e),new Error(e)}function ce(t,e){t||re()}function gD(t,e){t||re()}function X(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends $u{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var fh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},b_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}},C_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},I_=class{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Mt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new fh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new xt(e)}},E_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},x_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new E_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},M_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},T_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new M_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Yj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var hh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Yj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function we(t,e){return t<e?-1:t>e?1:0}function Aa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function yD(t){return t+"\0"}var ut=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ut(0,0))}static max(){return new t(new ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ph=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Le=class t extends ph{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Qj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vt=class t extends ph{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Qj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var J=class t{constructor(e){this.path=e}static fromPath(e){return new t(Le.fromString(e))}static fromName(e){return new t(Le.fromString(e).popFirst(5))}static empty(){return new t(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Le(e.slice()))}};var ka=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function D_(t){return t.fields.find(e=>e.kind===2)}function Go(t){return t.fields.filter(e=>e.kind!==2)}ka.UNKNOWN_ID=-1;var Oa=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Vl=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Ln.min())}};function _D(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new Ln(i,J.empty(),e)}function vD(t){return new Ln(t.readTime,t.key,-1)}var Ln=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(fe.min(),J.empty(),-1)}static max(){return new t(fe.max(),J.empty(),-1)}};function Cw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}var wD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",mh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function oo(t){return b(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==wD)throw t;$("LocalStore","Unexpectedly lost primary lease")})}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var gh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Mt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Xo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Iw(r.target.error);this.V.reject(new Xo(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Xo(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new S_(n)}},Qi=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(kc())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),Wo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Bu())return!1;if(t.C())return!0;let e=kc(),n=t.S(e),r=0<n&&n<10,i=bD(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return b(this,null,function*(){return this.db||($("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Xo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new B(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new B(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Xo(e,s))},i.onupgradeneeded=o=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return b(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=gh.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),R.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if($("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function bD(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var O_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Wo(this.B.delete())}},Xo=class extends B{constructor(e,n){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function so(t){return t.name==="IndexedDbTransactionError"}var S_=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wo(r)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),Wo(this.store.add(e))}get(e){return Wo(this.store.get(e)).next(n=>(n===void 0&&(n=null),$("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),Wo(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),Wo(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new R((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new R((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){$("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new R((r,i)=>{n.onerror=o=>{let s=Iw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new R((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new O_(a),u=n(a.primaryKey,a.value,c);if(u instanceof R){let d=u.catch(h=>(c.done(),R.reject(h)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>R.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Wo(t){return new R((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Iw(r.target.error);n(i)}})}var m1=!1;function Iw(t){let e=Qi.S(kc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m1||(m1=!0,setTimeout(()=>{throw r},0)),r}}return t}var P_=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){$("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>b(this,null,function*(){this.task=null;try{$("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){so(n)?$("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield oo(n)}yield this.X(6e4)}))}},A_=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return b(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return R.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return $("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>($("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=vD(o);Cw(s,r)>0&&(r=s)}),new Ln(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Mn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function su(t){return t==null}function Ul(t){return t===0&&1/t==-1/0}function CD(t){return typeof t=="number"&&Number.isInteger(t)&&!Ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function an(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=g1(e)),e=Zj(t.get(n),e);return g1(e)}function Zj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function g1(t){return t+""}function Mr(t){let e=t.length;if(ce(e>=2),e===2)return ce(t.charAt(0)===""&&t.charAt(1)===""),Le.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&re(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:re()}o=s+2}return new Le(r)}var y1=["userId","batchId"];function sh(t,e){return[t,an(e)]}function ID(t,e,n){return[t,an(e),n]}var Xj={},Jj=["prefixPath","collectionGroup","readTime","documentId"],eB=["prefixPath","collectionGroup","documentId"],tB=["collectionGroup","readTime","prefixPath","documentId"],nB=["canonicalId","targetId"],rB=["targetId","path"],iB=["path","targetId"],oB=["collectionId","parent"],sB=["indexId","uid"],aB=["uid","sequenceNumber"],cB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lB=["indexId","uid","orderedDocumentKey"],uB=["userId","collectionPath","documentId"],dB=["userId","collectionPath","largestBatchId"],fB=["userId","collectionGroup","largestBatchId"],ED=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hB=[...ED,"documentOverlays"],xD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MD=xD,Ew=[...MD,"indexConfiguration","indexState","indexEntries"],pB=Ew,mB=[...Ew,"globals"];var jl=class extends mh{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function St(t,e){let n=X(t);return Qi.F(n._e,e)}function _1(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function us(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var it=class t{constructor(e,n){this.comparator=e,this.root=n||Dr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Da(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Da(this.root,e,this.comparator,!1)}getReverseIterator(){return new Da(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Da(this.root,e,this.comparator,!0)}},Da=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1;Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Dr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class t{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yh(this.data.getIterator())}getIteratorFrom(e){return new yh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},yh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function va(t){return t.hasNext()?t.getNext():void 0}var Tn=class t{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Xe(vt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var _h=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function DD(){return typeof atob<"u"}var bt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _h("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bt.EMPTY_BYTE_STRING=new bt("");var gB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(ce(!!t),typeof t=="string"){let e=0,n=gB.exec(t);if(ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zi(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}function cp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xw(t){let e=t.mapValue.fields.__previous_value__;return cp(e)?xw(e):e}function Bl(t){let e=ri(t.mapValue.fields.__local_write_time__.timestampValue);return new ut(e.seconds,e.nanos)}var k_=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Xi=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ah={nullValue:"NULL_VALUE"};function Jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cp(t)?4:OD(t)?9007199254740991:10:re()}function Pr(t,e){if(t===e)return!0;let n=Jo(t);if(n!==Jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bl(t).isEqual(Bl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ri(i.timestampValue),a=ri(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Zi(i.bytesValue).isEqual(Zi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return gt(i.geoPointValue.latitude)===gt(o.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return gt(i.integerValue)===gt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=gt(i.doubleValue),a=gt(o.doubleValue);return s===a?Ul(s)===Ul(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Aa(t.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(_1(s)!==_1(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Pr(s[c],a[c])))return!1;return!0}(t,e);default:return re()}}function $l(t,e){return(t.values||[]).find(n=>Pr(n,e))!==void 0}function Ji(t,e){if(t===e)return 0;let n=Jo(t),r=Jo(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=gt(o.integerValue||o.doubleValue),c=gt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return v1(t.timestampValue,e.timestampValue);case 4:return v1(Bl(t),Bl(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Zi(o),c=Zi(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=we(a[u],c[u]);if(d!==0)return d}return we(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=we(gt(o.latitude),gt(s.latitude));return a!==0?a:we(gt(o.longitude),gt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let d=Ji(a[u],c[u]);if(d)return d}return we(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Wi.mapValue&&s===Wi.mapValue)return 0;if(o===Wi.mapValue)return 1;if(s===Wi.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let m=we(c[h],d[h]);if(m!==0)return m;let y=Ji(a[c[h]],u[d[h]]);if(y!==0)return y}return we(c.length,d.length)}(t.mapValue,e.mapValue);default:throw re()}}function v1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);let n=ri(t),r=ri(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function Ra(t){return R_(t)}function R_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=R_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${R_(n.fields[s])}`;return i+"}"}(t.mapValue):re()}function es(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function N_(t){return!!t&&"integerValue"in t}function zl(t){return!!t&&"arrayValue"in t}function w1(t){return!!t&&"nullValue"in t}function b1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ch(t){return!!t&&"mapValue"in t}function kl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=kl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function yB(t){return"nullValue"in t?ah:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?es(Xi.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:re()}function _B(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?es(Xi.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Wi:re()}function C1(t,e){let n=Ji(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function I1(t,e){let n=Ji(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Zt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=vt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=kl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ch(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){us(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(kl(this.value))}};function SD(t){let e=[];return us(t.fields,(n,r)=>{let i=new vt([n]);if(ch(r)){let o=SD(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Tn(e)}var Tt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,fe.min(),fe.min(),fe.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,fe.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,fe.min(),fe.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,fe.min(),fe.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ar=class{constructor(e,n){this.position=e,this.inclusive=n}};function E1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=J.comparator(J.fromName(s.referenceValue),n.key):r=Ji(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function x1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pr(t.position[n],e.position[n]))return!1;return!0}var ts=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function vB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vh=class{},Se=class t extends vh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new V_(e,n,r):n==="array-contains"?new B_(e,r):n==="in"?new wh(e,r):n==="not-in"?new $_(e,r):n==="array-contains-any"?new z_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new U_(e,r):new j_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ji(n,this.value)):n!==null&&Jo(this.value)===Jo(n)&&this.matchesComparison(Ji(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ge=class t extends vh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Na(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Na(t){return t.op==="and"}function F_(t){return t.op==="or"}function Mw(t){return PD(t)&&Na(t)}function PD(t){for(let e of t.filters)if(e instanceof Ge)return!1;return!0}function L_(t){if(t instanceof Se)return t.field.canonicalString()+t.op.toString()+Ra(t.value);if(Mw(t))return t.filters.map(e=>L_(e)).join(",");{let e=t.filters.map(n=>L_(n)).join(",");return`${t.op}(${e})`}}function AD(t,e){return t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&Pr(r.value,i.value)}(t,e):t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&AD(s,i.filters[a]),!0):!1}(t,e):void re()}function kD(t,e){let n=t.filters.concat(e);return Ge.create(n,t.op)}function RD(t){return t instanceof Se?function(n){return`${n.field.canonicalString()} ${n.op} ${Ra(n.value)}`}(t):t instanceof Ge?function(n){return n.op.toString()+" {"+n.getFilters().map(RD).join(" ,")+"}"}(t):"Filter"}var V_=class extends Se{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){let n=J.comparator(e.key,this.key);return this.matchesComparison(n)}},U_=class extends Se{constructor(e,n){super(e,"in",n),this.keys=ND("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},j_=class extends Se{constructor(e,n){super(e,"not-in",n),this.keys=ND("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ND(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}var B_=class extends Se{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return zl(n)&&$l(n.arrayValue,this.value)}},wh=class extends Se{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&$l(this.value.arrayValue,n)}},$_=class extends Se{constructor(e,n){super(e,"not-in",n)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!$l(this.value.arrayValue,n)}},z_=class extends Se{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!zl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$l(this.value.arrayValue,r))}};var q_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function H_(t,e=null,n=[],r=[],i=null,o=null,s=null){return new q_(t,e,n,r,i,o,s)}function ns(t){let e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>L_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ra(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ra(r)).join(",")),e.ue=n}return e.ue}function au(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x1(t.startAt,e.startAt)&&x1(t.endAt,e.endAt)}function bh(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ch(t,e){return t.filters.filter(n=>n instanceof Se&&n.field.isEqual(e))}function M1(t,e,n){let r=ah,i=!0;for(let o of Ch(t,e)){let s=ah,a=!0;switch(o.op){case"<":case"<=":s=yB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ah}C1({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];C1({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function T1(t,e,n){let r=Wi,i=!0;for(let o of Ch(t,e)){let s=Wi,a=!0;switch(o.op){case">=":case">":s=_B(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Wi}I1({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];I1({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var sr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function FD(t,e,n,r,i,o,s,a){return new sr(t,e,n,r,i,o,s,a)}function Qa(t){return new sr(t)}function D1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tw(t){return t.collectionGroup!==null}function Sa(t){let e=X(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Xe(vt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ts(o,r))}),n.has(vt.keyField().canonicalString())||e.ce.push(new ts(vt.keyField(),r))}return e.ce}function cn(t){let e=X(t);return e.le||(e.le=wB(e,Sa(t))),e.le}function wB(t,e){if(t.limitType==="F")return H_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ts(i.field,o)});let n=t.endAt?new Ar(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ar(t.startAt.position,t.startAt.inclusive):null;return H_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function G_(t,e){let n=t.filters.concat([e]);return new sr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ih(t,e,n){return new sr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cu(t,e){return au(cn(t),cn(e))&&t.limitType===e.limitType}function LD(t){return`${ns(cn(t))}|lt:${t.limitType}`}function Ea(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RD(i)).join(", ")}]`),su(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ra(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ra(i)).join(",")),`Target(${r})`}(cn(t))}; limitType=${t.limitType})`}function lu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):J.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Sa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=E1(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Sa(r),i)||r.endAt&&!function(s,a,c){let u=E1(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Sa(r),i))}(t,e)}function VD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UD(t){return(e,n)=>{let r=!1;for(let i of Sa(t)){let o=bB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function bB(t,e,n){let r=t.field.isKeyField()?J.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Ji(c,u):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var kr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return TD(this.inner)}size(){return this.innerSize}};var CB=new it(J.comparator);function yn(){return CB}var jD=new it(J.comparator);function Pl(...t){let e=jD;for(let n of t)e=e.insert(n.key,n);return e}function BD(t){let e=jD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Tr(){return Rl()}function $D(){return Rl()}function Rl(){return new kr(t=>t.toString(),(t,e)=>t.isEqual(e))}var IB=new it(J.comparator),EB=new Xe(J.comparator);function Ce(...t){let e=EB;for(let n of t)e=e.add(n);return e}var xB=new Xe(we);function Dw(){return xB}function zD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ul(e)?"-0":e}}function qD(t){return{integerValue:""+t}}function HD(t,e){return CD(e)?qD(e):zD(t,e)}var Fa=class{constructor(){this._=void 0}};function MB(t,e,n){return t instanceof eo?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&cp(o)&&(o=xw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ii?WD(t,e):t instanceof oi?KD(t,e):function(i,o){let s=GD(i,o),a=O1(s)+O1(i.Pe);return N_(s)&&N_(i.Pe)?qD(a):zD(i.serializer,a)}(t,e)}function TB(t,e,n){return t instanceof ii?WD(t,e):t instanceof oi?KD(t,e):n}function GD(t,e){return t instanceof to?function(r){return N_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var eo=class extends Fa{},ii=class extends Fa{constructor(e){super(),this.elements=e}};function WD(t,e){let n=YD(e);for(let r of t.elements)n.some(i=>Pr(i,r))||n.push(r);return{arrayValue:{values:n}}}var oi=class extends Fa{constructor(e){super(),this.elements=e}};function KD(t,e){let n=YD(e);for(let r of t.elements)n=n.filter(i=>!Pr(i,r));return{arrayValue:{values:n}}}var to=class extends Fa{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function O1(t){return gt(t.integerValue||t.doubleValue)}function YD(t){return zl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var rs=class{constructor(e,n){this.field=e,this.transform=n}};function DB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ii&&i instanceof ii||r instanceof oi&&i instanceof oi?Aa(r.elements,i.elements,Pr):r instanceof to&&i instanceof to?Pr(r.Pe,i.Pe):r instanceof eo&&i instanceof eo}(t.transform,e.transform)}var W_=class{constructor(e,n){this.version=e,this.transformResults=n}},yt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function lh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var La=class{};function QD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ro(t.key,yt.none()):new no(t.key,t.data,yt.none());{let n=t.data,r=Zt.empty(),i=new Xe(vt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ar(t.key,r,new Tn(i.toArray()),yt.none())}}function OB(t,e,n){t instanceof no?function(i,o,s){let a=i.value.clone(),c=P1(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ar?function(i,o,s){if(!lh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=P1(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(ZD(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Nl(t,e,n,r){return t instanceof no?function(o,s,a,c){if(!lh(o.precondition,s))return a;let u=o.value.clone(),d=A1(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ar?function(o,s,a,c){if(!lh(o.precondition,s))return a;let u=A1(o.fieldTransforms,c,s),d=s.data;return d.setAll(ZD(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(o,s,a){return lh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function SB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=GD(r.transform,i||null);o!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,o))}return n||null}function S1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Aa(r,i,(o,s)=>DB(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var no=class extends La{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ar=class extends La{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ZD(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function P1(t,e,n){let r=new Map;ce(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,TB(s,a,n[i]))}return r}function A1(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,MB(o,s,e))}return r}var ro=class extends La{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ql=class extends La{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Hl=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&OB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nl(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Nl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=$D();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=QD(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,(n,r)=>S1(n,r))&&Aa(this.baseMutations,e.baseMutations,(n,r)=>S1(n,r))}},K_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ce(e.mutations.length===r.length);let i=function(){return IB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Gl=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Y_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var It,Fe;function XD(t){switch(t){default:return re();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function JD(t){if(t===void 0)return _t("GRPC error has no .code"),N.UNKNOWN;switch(t){case It.OK:return N.OK;case It.CANCELLED:return N.CANCELLED;case It.UNKNOWN:return N.UNKNOWN;case It.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case It.INTERNAL:return N.INTERNAL;case It.UNAVAILABLE:return N.UNAVAILABLE;case It.UNAUTHENTICATED:return N.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case It.NOT_FOUND:return N.NOT_FOUND;case It.ALREADY_EXISTS:return N.ALREADY_EXISTS;case It.PERMISSION_DENIED:return N.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case It.ABORTED:return N.ABORTED;case It.OUT_OF_RANGE:return N.OUT_OF_RANGE;case It.UNIMPLEMENTED:return N.UNIMPLEMENTED;case It.DATA_LOSS:return N.DATA_LOSS;default:return re()}}(Fe=It||(It={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";var k1=null;function eO(){return new TextEncoder}var PB=new $i([4294967295,4294967295],0);function R1(t){let e=eO().encode(t),n=new u_;return n.update(e),new Uint8Array(n.digest())}function N1(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $i([n,r],0),new $i([i,o],0)]}var Q_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$i.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($i.fromNumber(r)));return i.compare(PB)===1&&(i=new $i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=R1(e),[r,i]=N1(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=R1(e),[r,i]=N1(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wl=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Kl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(fe.min(),i,new it(we),yn(),Ce())}},Kl=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Ce(),Ce(),Ce())}};var Pa=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Eh=class{constructor(e,n){this.targetId=e,this.me=n}},xh=class{constructor(e,n,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Mh=class{constructor(){this.fe=0,this.ge=L1(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ce(),n=Ce(),r=Ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new Kl(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=L1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Z_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=yn(),this.qe=F1(),this.Qe=new it(we)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(bh(o))if(r===0){let s=new J(o.path);this.Ue(n,s,Tt.newNoDocument(s,fe.min()))}else ce(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}k1?.et(function(d,h,m,y,M){var A,P,z,W,j,Y;let le={localCacheCount:d,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},ie=h.unchangedNames;return ie&&(le.bloomFilter={applied:M===0,hashCount:(A=ie?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(W=(z=(P=ie?.bits)===null||P===void 0?void 0:P.bitmap)===null||z===void 0?void 0:z.length)!==null&&W!==void 0?W:0,padding:(Y=(j=ie?.bits)===null||j===void 0?void 0:j.padding)!==null&&Y!==void 0?Y:0,mightContain:x=>{var w;return(w=y?.mightContain(x))!==null&&w!==void 0&&w}}),le}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Zi(r).toUint8Array()}catch(c){if(c instanceof _h)return Fn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Q_(s,i,o)}catch(c){return Fn(c instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&bh(a.target)){let c=new J(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Tt.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=Ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Wl(e,n,this.Qe,this.ke,r);return this.ke=yn(),this.qe=F1(),this.Qe=new it(we),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Mh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(we),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function F1(){return new it(J.comparator)}function L1(){return new it(J.comparator)}var AB={asc:"ASCENDING",desc:"DESCENDING"},kB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RB={and:"AND",or:"OR"},X_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function J_(t,e){return t.useProto3Json||su(e)?e:{value:e}}function Va(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NB(t,e){return Va(t,e.toTimestamp())}function wt(t){return ce(!!t),fe.fromTimestamp(function(n){let r=ri(n);return new ut(r.seconds,r.nanos)}(t))}function Ow(t,e){return ev(t,e).canonicalString()}function ev(t,e){let n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nO(t){let e=Le.fromString(t);return ce(fO(e)),e}function Yl(t,e){return Ow(t.databaseId,e.path)}function Or(t,e){let n=nO(e);if(n.get(1)!==t.databaseId.projectId)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(oO(n))}function rO(t,e){return Ow(t.databaseId,e)}function iO(t){let e=nO(t);return e.length===4?Le.emptyPath():oO(e)}function tv(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oO(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function V1(t,e,n){return{name:Yl(t,e),fields:n.value.mapValue.fields}}function sO(t,e,n){let r=Or(t,e.name),i=wt(e.updateTime),o=e.createTime?wt(e.createTime):fe.min(),s=new Zt({mapValue:{fields:e.fields}}),a=Tt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function FB(t,e){return"found"in e?function(r,i){ce(!!i.found),i.found.name,i.found.updateTime;let o=Or(r,i.found.name),s=wt(i.found.updateTime),a=i.found.createTime?wt(i.found.createTime):fe.min(),c=new Zt({mapValue:{fields:i.found.fields}});return Tt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){ce(!!i.missing),ce(!!i.readTime);let o=Or(r,i.missing),s=wt(i.readTime);return Tt.newNoDocument(o,s)}(t,e):re()}function LB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ce(d===void 0||typeof d=="string"),bt.fromBase64String(d||"")):(ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array),bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?N.UNKNOWN:JD(u.code);return new B(d,u.message||"")}(s);n=new xh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Or(t,r.document.name),o=wt(r.document.updateTime),s=r.document.createTime?wt(r.document.createTime):fe.min(),a=new Zt({mapValue:{fields:r.document.fields}}),c=Tt.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Pa(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Or(t,r.document),o=r.readTime?wt(r.readTime):fe.min(),s=Tt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Pa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Or(t,r.document),o=r.removedTargetIds||[];n=new Pa([],o,i,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Y_(i,o),a=r.targetId;n=new Eh(a,s)}}return n}function Ql(t,e){let n;if(e instanceof no)n={update:V1(t,e.key,e.value)};else if(e instanceof ro)n={delete:Yl(t,e.key)};else if(e instanceof ar)n={update:V1(t,e.key,e.data),updateMask:zB(e.fieldMask)};else{if(!(e instanceof ql))return re();n={verify:Yl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof eo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ii)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof to)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:NB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:re()}(t,e.precondition)),n}function nv(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?yt.updateTime(wt(o.updateTime)):o.exists!==void 0?yt.exists(o.exists):yt.none()}(e.currentDocument):yt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)ce(a.setToServerValue==="REQUEST_TIME"),c=new eo;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new ii(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new oi(d)}else"increment"in a?c=new to(s,a.increment):re();let u=vt.fromServerFormat(a.fieldPath);return new rs(u,c)}(t,i)):[];if(e.update){e.update.name;let i=Or(t,e.update.name),o=new Zt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Tn(u.map(d=>vt.fromServerFormat(d)))}(e.updateMask);return new ar(i,o,s,n,r)}return new no(i,o,n,r)}if(e.delete){let i=Or(t,e.delete);return new ro(i,n)}if(e.verify){let i=Or(t,e.verify);return new ql(i,n)}return re()}function VB(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?wt(i.updateTime):wt(o);return s.isEqual(fe.min())&&(s=wt(o)),new W_(s,i.transformResults||[])}(n,e))):[]}function aO(t,e){return{documents:[rO(t,e.path)]}}function cO(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rO(t,i);let o=function(u){if(u.length!==0)return dO(Ge.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:xa(m.field),direction:jB(m.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=J_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function lO(t){let e=iO(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ce(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){let m=uO(h);return m instanceof Ge&&Mw(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(m=>function(M){return new ts(Ma(M.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,su(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(h){let m=!!h.before,y=h.values||[];return new Ar(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){let m=!h.before,y=h.values||[];return new Ar(y,m)}(n.endAt)),FD(e,i,s,o,a,"F",c,u)}function UB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ma(n.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ma(n.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ma(n.unaryFilter.field);return Se.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ma(n.unaryFilter.field);return Se.create(s,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Se.create(Ma(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ge.create(n.compositeFilter.filters.map(r=>uO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function jB(t){return AB[t]}function BB(t){return kB[t]}function $B(t){return RB[t]}function xa(t){return{fieldPath:t.canonicalString()}}function Ma(t){return vt.fromServerFormat(t.fieldPath)}function dO(t){return t instanceof Se?function(n){if(n.op==="=="){if(b1(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NAN"}};if(w1(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(b1(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NOT_NAN"}};if(w1(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xa(n.field),op:BB(n.op),value:n.value}}}(t):t instanceof Ge?function(n){let r=n.getFilters().map(i=>dO(i));return r.length===1?r[0]:{compositeFilter:{op:$B(n.op),filters:r}}}(t):re()}function zB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ua=class t{constructor(e,n,r,i,o=fe.min(),s=fe.min(),a=bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Th=class{constructor(e){this.ct=e}};function qB(t,e){let n;if(e.document)n=sO(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=J.fromSegments(e.noDocument.path),i=os(e.noDocument.readTime);n=Tt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re();{let r=J.fromSegments(e.unknownDocument.path),i=os(e.unknownDocument.version);n=Tt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new ut(i[0],i[1]);return fe.fromTimestamp(o)}(e.readTime)),n}function U1(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Dh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Yl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Va(o,s.version.toTimestamp()),createTime:Va(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:is(e.version)};else{if(!e.isUnknownDocument())return re();r.unknownDocument={path:n.path.toArray(),version:is(e.version)}}return r}function Dh(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function is(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function os(t){let e=new ut(t.seconds,t.nanoseconds);return fe.fromTimestamp(e)}function Ko(t,e){let n=(e.baseMutations||[]).map(o=>nv(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>nv(t.ct,o)),i=ut.fromMillis(e.localWriteTimeMs);return new Hl(e.batchId,i,n,r)}function Al(t){let e=os(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?os(t.lastLimboFreeSnapshotVersion):fe.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return ce(o.documents.length===1),cn(Qa(iO(o.documents[0])))}(t.query):function(o){return cn(lO(o))}(t.query),new Ua(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,bt.fromBase64String(t.resumeToken))}function hO(t,e){let n=is(e.snapshotVersion),r=is(e.lastLimboFreeSnapshotVersion),i;i=bh(e.target)?aO(t.ct,e.target):cO(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ns(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Sw(t){let e=lO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ih(e,e.limit,"L"):e}function y_(t,e){return new Gl(e.largestBatchId,nv(t.ct,e.overlayMutation))}function j1(t,e){let n=e.path.lastSegment();return[t,an(e.path.popLast()),n]}function B1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:is(r.readTime),documentKey:an(r.documentKey.path),largestBatchId:r.largestBatchId}}var rv=class{getBundleMetadata(e,n){return $1(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:os(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return $1(e).put(function(i){return{bundleId:i.id,createTime:is(wt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return z1(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Sw(o.bundledQuery),readTime:os(o.readTime)}}(r)})}saveNamedQuery(e,n){return z1(e).put(function(i){return{name:i.name,readTime:is(wt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function $1(t){return St(t,"bundles")}function z1(t){return St(t,"namedQueries")}var Oh=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Tl(e).get(j1(this.userId,n)).next(r=>r?y_(this.serializer,r):null)}getOverlays(e,n){let r=Tr();return R.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Gl(n,s);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(an(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Tl(e).j("collectionPathOverlayIndex",a))}),R.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Tr(),o=an(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Tl(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=y_(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Tr(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Tl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,d)=>{let h=y_(this.serializer,u);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return Tl(e).put(function(i,o,s){let[a,c,u]=j1(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ql(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Tl(t){return St(t,"documentOverlays")}var iv=class{Pt(e){return St(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let r=n?.value;return r?bt.fromUint8Array(r):bt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var ti=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(gt(e.integerValue));else if("doubleValue"in e){let r=gt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ul(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ri(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Zi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?OD(e)?this.dt(n,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.St(e.arrayValue,n),this.ft(n)):re()}Vt(e,n){this.dt(n,25),this.bt(e,n)}bt(e,n){n.Rt(e)}wt(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}St(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),J.fromName(e).path.forEach(r=>{this.dt(n,60),this.bt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};ti.Dt=new ti;function HB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function q1(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=HB(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var ov=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.vt(r.value),r=n.next();this.Ft()}Mt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.xt(r.value),r=n.next();this.Ot()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.vt(r);else if(r<2048)this.vt(960|r>>>6),this.vt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.vt(480|r>>>12),this.vt(128|63&r>>>6),this.vt(128|63&r);else{let i=n.codePointAt(0);this.vt(240|i>>>18),this.vt(128|63&i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i)}}this.Ft()}Lt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{let i=n.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}Bt(e){let n=this.kt(e),r=q1(n);this.qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Qt(e){let n=this.kt(e),r=q1(n);this.qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}vt(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(n)}xt(e){let n=255&e;n===0?(this.Wt(0),this.Wt(255)):n===255?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},sv=class{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}},av=class{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}},Yo=class{constructor(){this.zt=new ov,this.jt=new sv(this.zt),this.Ht=new av(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return e===0?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}};var Qo=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Yt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function zi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=H1(t.arrayValue,e.arrayValue),n!==0?n:(n=H1(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function H1(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Sh=class{constructor(e){this.Zt=new Xe((n,r)=>vt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(let n of e.filters){let r=n;r.isInequality()?this.Zt=this.Zt.add(r):this.en.push(r)}}get tn(){return this.Zt.size>1}nn(e){if(ce(e.collectionGroup===this.collectionId),this.tn)return!1;let n=D_(e);if(n!==void 0&&!this.rn(n))return!1;let r=Go(e),i=new Set,o=0,s=0;for(;o<r.length&&this.rn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Zt.size>0){let a=this.Zt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.sn(a,c)||!this.on(this.Xt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Xt.length||!this.on(this.Xt[s++],a))return!1}return!0}_n(){if(this.tn)return null;let e=new Xe(vt.comparator),n=[];for(let r of this.en)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Oa(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Oa(r.field,0))}for(let r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Oa(r.field,r.dir==="asc"?0:1)));return new ka(ka.UNKNOWN_ID,this.collectionId,n,Vl.empty())}rn(e){for(let n of this.en)if(this.sn(n,e))return!0;return!1}sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}on(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function pO(t){var e,n;if(ce(t instanceof Se||t instanceof Ge),t instanceof Se){if(t instanceof wh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Se.create(t.field,"==",o)))||[];return Ge.create(i,"or")}return t}let r=t.filters.map(i=>pO(i));return Ge.create(r,t.op)}function GB(t){if(t.getFilters().length===0)return[];let e=uv(pO(t));return ce(mO(e)),cv(e)||lv(e)?[e]:e.getFilters()}function cv(t){return t instanceof Se}function lv(t){return t instanceof Ge&&Mw(t)}function mO(t){return cv(t)||lv(t)||function(n){if(n instanceof Ge&&F_(n)){for(let r of n.getFilters())if(!cv(r)&&!lv(r))return!1;return!0}return!1}(t)}function uv(t){if(ce(t instanceof Se||t instanceof Ge),t instanceof Se)return t;if(t.filters.length===1)return uv(t.filters[0]);let e=t.filters.map(r=>uv(r)),n=Ge.create(e,t.op);return n=Ph(n),mO(n)?n:(ce(n instanceof Ge),ce(Na(n)),ce(n.filters.length>1),n.filters.reduce((r,i)=>Pw(r,i)))}function Pw(t,e){let n;return ce(t instanceof Se||t instanceof Ge),ce(e instanceof Se||e instanceof Ge),n=t instanceof Se?e instanceof Se?function(i,o){return Ge.create([i,o],"and")}(t,e):G1(t,e):e instanceof Se?G1(e,t):function(i,o){if(ce(i.filters.length>0&&o.filters.length>0),Na(i)&&Na(o))return kD(i,o.getFilters());let s=F_(i)?i:o,a=F_(i)?o:i,c=s.filters.map(u=>Pw(u,a));return Ge.create(c,"or")}(t,e),Ph(n)}function G1(t,e){if(Na(e))return kD(e,t.getFilters());{let n=e.filters.map(r=>Pw(t,r));return Ge.create(n,"or")}}function Ph(t){if(ce(t instanceof Se||t instanceof Ge),t instanceof Se)return t;let e=t.getFilters();if(e.length===1)return Ph(e[0]);if(PD(t))return t;let n=e.map(i=>Ph(i)),r=[];return n.forEach(i=>{i instanceof Se?r.push(i):i instanceof Ge&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ge.create(r,t.op)}var dv=class{constructor(){this.an=new Zl}addToCollectionParentIndex(e,n){return this.an.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(Ln.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(Ln.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},Zl=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xe(Le.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Le.comparator)).toArray()}};var nh=new Uint8Array(0),fv=class{constructor(e,n){this.databaseId=n,this.un=new Zl,this.cn=new kr(r=>ns(r),(r,i)=>au(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.un.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.un.add(n)});let o={collectionId:r,parent:an(i)};return W1(e).put(o)}return R.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[yD(n),""],!1,!0);return W1(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(Mr(s.parent))}return r})}addFieldIndex(e,n){let r=Dl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=ba(e);return o.next(a=>{s.put(B1(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Dl(e),i=ba(e),o=wa(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Dl(e),r=wa(e),i=ba(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return R.forEach(this.ln(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Sh(r)._n();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=wa(e),i=!0,o=new Map;return R.forEach(this.ln(n),s=>this.hn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ce(),a=[];return R.forEach(o,(c,u)=>{$("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${ns(n)}`);let d=function(j,Y){let le=D_(Y);if(le===void 0)return null;for(let ie of Ch(j,le.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(u,c),h=function(j,Y){let le=new Map;for(let ie of Go(Y))for(let x of Ch(j,ie.fieldPath))switch(x.op){case"==":case"in":le.set(ie.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return le.set(ie.fieldPath.canonicalString(),x.value),Array.from(le.values())}return null}(u,c),m=function(j,Y){let le=[],ie=!0;for(let x of Go(Y)){let w=x.kind===0?M1(j,x.fieldPath,j.startAt):T1(j,x.fieldPath,j.startAt);le.push(w.value),ie&&(ie=w.inclusive)}return new Ar(le,ie)}(u,c),y=function(j,Y){let le=[],ie=!0;for(let x of Go(Y)){let w=x.kind===0?T1(j,x.fieldPath,j.endAt):M1(j,x.fieldPath,j.endAt);le.push(w.value),ie&&(ie=w.inclusive)}return new Ar(le,ie)}(u,c),M=this.Pn(c,u,m),A=this.Pn(c,u,y),P=this.In(c,u,h),z=this.Tn(c.indexId,d,M,m.inclusive,A,y.inclusive,P);return R.forEach(z,W=>r.G(W,n.limit).next(j=>{j.forEach(Y=>{let le=J.fromSegments(Y.documentKey);s.has(le)||(s=s.add(le),a.push(le))})}))}).next(()=>a)}return R.resolve(null)})}ln(e){let n=this.cn.get(e);return n||(e.filters.length===0?n=[e]:n=GB(Ge.create(e.filters,"and")).map(r=>H_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,n),n)}Tn(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),u=c/(n!=null?n.length:1),d=[];for(let h=0;h<c;++h){let m=n?this.En(n[h/u]):nh,y=this.dn(e,m,r[h%u],i),M=this.An(e,m,o[h%u],s),A=a.map(P=>this.dn(e,m,P,!0));d.push(...this.createRange(y,M,A))}return d}dn(e,n,r,i){let o=new Qo(e,J.empty(),n,r);return i?o:o.Yt()}An(e,n,r,i){let o=new Qo(e,J.empty(),n,r);return i?o.Yt():o}hn(e,n){let r=new Sh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.nn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.ln(n);return R.forEach(i,o=>this.hn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new Xe(vt.comparator),d=!1;for(let h of c.filters)for(let m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(let h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}Rn(e,n){let r=new Yo;for(let i of Go(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Jt(i.kind);ti.Dt.It(o,s)}return r.Gt()}En(e){let n=new Yo;return ti.Dt.It(e,n.Jt(0)),n.Gt()}Vn(e,n){let r=new Yo;return ti.Dt.It(es(this.databaseId,n),r.Jt(function(o){let s=Go(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Gt()}In(e,n,r){if(r===null)return[];let i=[];i.push(new Yo);let o=0;for(let s of Go(e)){let a=r[o++];for(let c of i)if(this.mn(n,s.fieldPath)&&zl(a))i=this.fn(i,s,a);else{let u=c.Jt(s.kind);ti.Dt.It(a,u)}}return this.gn(i)}Pn(e,n,r){return this.In(e,n,r.position)}gn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Gt();return n}fn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Yo;c.seed(a.Gt()),ti.Dt.It(s,c.Jt(n.kind)),o.push(c)}return o}mn(e,n){return!!e.filters.find(r=>r instanceof Se&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Dl(e),i=ba(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return R.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,h){let m=h?new Vl(h.sequenceNumber,new Ln(os(h.readTime),new J(Mr(h.documentKey)),h.largestBatchId)):Vl.empty(),y=d.fields.map(([M,A])=>new Oa(vt.fromServerFormat(M),A));return new ka(d.indexId,d.collectionGroup,y,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:we(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Dl(e),o=ba(e);return this.pn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>R.forEach(a,c=>o.put(B1(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return R.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?R.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,c=>this.yn(e,i,c).next(u=>{let d=this.wn(o,c);return u.isEqual(d)?R.resolve():this.Sn(e,o,c,u,d)}))))})}bn(e,n,r,i){return wa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,n.key),documentKey:n.key.path.toArray()})}Dn(e,n,r,i){return wa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,n.key),n.key.path.toArray()])}yn(e,n,r){let i=wa(e),o=new Xe(zi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,n)])},(s,a)=>{o=o.add(new Qo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}wn(e,n){let r=new Xe(zi),i=this.Rn(n,e);if(i==null)return r;let o=D_(n);if(o!=null){let s=e.data.field(o.fieldPath);if(zl(s))for(let a of s.arrayValue.values||[])r=r.add(new Qo(n.indexId,e.key,this.En(a),i))}else r=r.add(new Qo(n.indexId,e.key,nh,i));return r}Sn(e,n,r,i,o){$("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,d,h,m){let y=c.getIterator(),M=u.getIterator(),A=va(y),P=va(M);for(;A||P;){let z=!1,W=!1;if(A&&P){let j=d(A,P);j<0?W=!0:j>0&&(z=!0)}else A!=null?W=!0:z=!0;z?(h(P),P=va(M)):W?(m(A),A=va(y)):(A=va(y),P=va(M))}}(i,o,zi,a=>{s.push(this.bn(e,n,r,a))},a=>{s.push(this.Dn(e,n,r,a))}),R.waitFor(s)}pn(e){let n=1;return ba(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>zi(s,a)).filter((s,a,c)=>!a||zi(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=zi(s,e),c=zi(s,n);if(a===0)i[0]=e.Yt();else if(a>0&&c<0)i.push(s),i.push(s.Yt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,nh,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,nh,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,n){return zi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(K1)}getMinOffset(e,n){return R.mapArray(this.ln(n),r=>this.hn(e,r).next(i=>i||re())).next(K1)}};function W1(t){return St(t,"collectionParents")}function wa(t){return St(t,"indexEntries")}function Dl(t){return St(t,"indexConfiguration")}function ba(t){return St(t,"indexState")}function K1(t){ce(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Cw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ln(e.readTime,e.documentKey,n)}var Y1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function gO(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:s},(d,h,m)=>(a++,m.delete()));o.push(c.next(()=>{ce(a===1)}));let u=[];for(let d of n.mutations){let h=ID(e,d.key.path,n.batchId);o.push(i.delete(h)),u.push(d.key)}return R.waitFor(o).next(()=>u)}function Ah(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re();e=t.noDocument}return JSON.stringify(e).length}Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);var kh=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static lt(e,n,r,i){ce(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Ta(e),s=qi(e);return s.add({}).next(a=>{ce(typeof a=="number");let c=new Hl(a,n,r,i),u=function(y,M,A){let P=A.baseMutations.map(W=>Ql(y.ct,W)),z=A.mutations.map(W=>Ql(y.ct,W));return{userId:M,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:P,mutations:z}}(this.serializer,this.userId,c),d=[],h=new Xe((m,y)=>we(m.canonicalString(),y.canonicalString()));for(let m of i){let y=ID(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),d.push(s.put(u)),d.push(o.put(y,Xj))}return h.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.vn[a]=c.keys()}),R.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return qi(e).get(n).next(r=>r?(ce(r.userId===this.userId),Ko(this.serializer,r)):null)}Fn(e,n){return this.vn[n]?R.resolve(this.vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return qi(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(ce(a.batchId>=r),o=Ko(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return qi(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qi(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ko(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=sh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Ta(e).J({range:i},(s,a,c)=>{let[u,d,h]=s,m=Mr(d);if(u===this.userId&&n.path.isEqual(m))return qi(e).get(h).next(y=>{if(!y)throw re();ce(y.userId===this.userId),o.push(Ko(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(we),i=[];return n.forEach(o=>{let s=sh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Ta(e).J({range:a},(u,d,h)=>{let[m,y,M]=u,A=Mr(y);m===this.userId&&o.path.isEqual(A)?r=r.add(M):h.done()});i.push(c)}),R.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=sh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Xe(we);return Ta(e).J({range:s},(c,u,d)=>{let[h,m,y]=c,M=Mr(m);h===this.userId&&r.isPrefixOf(M)?M.length===i&&(a=a.add(y)):d.done()}).next(()=>this.Mn(e,a))}Mn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(qi(e).get(o).next(s=>{if(s===null)throw re();ce(s.userId===this.userId),r.push(Ko(this.serializer,s))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return gO(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.xn(n.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ta(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Mr(o[1]);i.push(c)}else a.done()}).next(()=>{ce(i.length===0)})})}containsKey(e,n){return yO(e,this.userId,n)}On(e){return _O(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function yO(t,e,n){let r=sh(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ta(t).J({range:o,H:!0},(a,c,u)=>{let[d,h,m]=a;d===e&&h===i&&(s=!0),u.done()}).next(()=>s)}function qi(t){return St(t,"mutations")}function Ta(t){return St(t,"documentMutations")}function _O(t){return St(t,"mutationQueues")}var ja=class t{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new t(0)}static Bn(){return new t(-1)}};var hv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.kn(e).next(n=>{let r=new ja(n.highestTargetId);return n.highestTargetId=r.next(),this.qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(n=>fe.fromTimestamp(new ut(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.qn(e,i)))}addTargetData(e,n){return this.Qn(e,n).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(n,r),this.qn(e,r))))}updateTargetData(e,n){return this.Qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ca(e).delete(n.targetId)).next(()=>this.kn(e)).next(r=>(ce(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Ca(e).J((s,a)=>{let c=Al(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>R.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Ca(e).J((r,i)=>{let o=Al(i);n(o)})}kn(e){return Q1(e).get("targetGlobalKey").next(n=>(ce(n!==null),n))}qn(e,n){return Q1(e).put("targetGlobalKey",n)}Qn(e,n){return Ca(e).put(hO(this.serializer,n))}Kn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=ns(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ca(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=Al(a);au(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Hi(e);return n.forEach(s=>{let a=an(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),R.waitFor(i)}removeMatchingKeys(e,n,r){let i=Hi(e);return R.forEach(n,o=>{let s=an(o.path);return R.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Hi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Hi(e),o=Ce();return i.J({range:r,H:!0},(s,a,c)=>{let u=Mr(s[1]),d=new J(u);o=o.add(d)}).next(()=>o)}containsKey(e,n){let r=an(n.path),i=IDBKeyRange.bound([r],[yD(r)],!1,!0),o=0;return Hi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return Ca(e).get(n).next(r=>r?Al(r):null)}};function Ca(t){return St(t,"targets")}function Q1(t){return St(t,"targetGlobal")}function Hi(t){return St(t,"targetDocuments")}function Z1([t,e],[n,r]){let i=we(t,n);return i===0?we(e,r):i}var pv=class{constructor(e){this.$n=e,this.buffer=new Xe(Z1),this.Un=0}Wn(){return++this.Un}Gn(e){let n=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();Z1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},mv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.zn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return this.zn!==null}jn(e){$("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.zn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){so(n)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield oo(n)}yield this.jn(3e5)}))}},gv=class{constructor(e,n){this.Hn=e,this.params=n}calculateTargetCount(e,n){return this.Hn.Jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return R.resolve(Mn.oe);let r=new pv(n);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Hn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Hn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(Y1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y1):this.Zn(e,n))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,n){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Ia()<=dr.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function WB(t,e){return new gv(t,e)}var yv=class{constructor(e,n){this.db=e,this.garbageCollector=WB(this,n)}Jn(e){let n=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Xn(e){let n=0;return this.Yn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Yn(e,n){return this.er(e,(r,i)=>n(i))}addReference(e,n,r){return rh(e,r)}removeReference(e,n,r){return rh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return rh(e,n)}tr(e,n){return function(i,o){let s=!1;return _O(i).Y(a=>yO(i,a,o).next(c=>(c&&(s=!0),R.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.er(e,(s,a)=>{if(a<=n){let c=this.tr(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,fe.min()),Hi(e).delete(function(h){return[0,an(h.path)]}(s))))});i.push(c)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return rh(e,n)}er(e,n){let r=Hi(e),i,o=Mn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==Mn.oe&&n(new J(Mr(i)),o),o=u,i=c):o=Mn.oe}).next(()=>{o!==Mn.oe&&n(new J(Mr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function rh(t,e){return Hi(t).put(function(r,i){return{targetId:0,path:an(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Rh=class{constructor(){this.changes=new kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var _v=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ho(e).put(r)}removeEntry(e,n,r){return Ho(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Dh(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.nr(e,r)))}getEntry(e,n){let r=Tt.newInvalidDocument(n);return Ho(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ol(n))},(i,o)=>{r=this.rr(n,o)}).next(()=>r)}ir(e,n){let r={size:0,document:Tt.newInvalidDocument(n)};return Ho(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ol(n))},(i,o)=>{r={document:this.rr(n,o),size:Ah(o)}}).next(()=>r)}getEntries(e,n){let r=yn();return this.sr(e,n,(i,o)=>{let s=this.rr(i,o);r=r.insert(i,s)}).next(()=>r)}_r(e,n){let r=yn(),i=new it(J.comparator);return this.sr(e,n,(o,s)=>{let a=this.rr(o,s);r=r.insert(o,a),i=i.insert(o,Ah(s))}).next(()=>({documents:r,ar:i}))}sr(e,n,r){if(n.isEmpty())return R.resolve();let i=new Xe(eD);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Ol(i.first()),Ol(i.last())),s=i.getIterator(),a=s.getNext();return Ho(e).J({index:"documentKeyIndex",range:o},(c,u,d)=>{let h=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&eD(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?d.$(Ol(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Dh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ho(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=yn();for(let h of u){let m=this.rr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(lu(n,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,i){let o=yn(),s=J1(n,r),a=J1(n,Ln.max());return Ho(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,d)=>{let h=this.rr(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(h.key,h),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new vv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return X1(e).get("remoteDocumentGlobalKey").next(n=>(ce(!!n),n))}nr(e,n){return X1(e).put("remoteDocumentGlobalKey",n)}rr(e,n){if(n){let r=qB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return Tt.newInvalidDocument(e)}};function vO(t){return new _v(t)}var vv=class extends Rh{constructor(e,n){super(),this.ur=e,this.trackRemovals=n,this.cr=new kr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Xe((o,s)=>we(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.cr.get(o);if(n.push(this.ur.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=U1(this.ur.serializer,s);i=i.add(o.path.popLast());let u=Ah(c);r+=u-a.size,n.push(this.ur.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=U1(this.ur.serializer,s.convertToNoDocument(fe.min()));n.push(this.ur.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ur.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ur.updateMetadata(e,r)),R.waitFor(n)}getFromCache(e,n){return this.ur.ir(e,n).next(r=>(this.cr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ur._r(e,n).next(({documents:r,ar:i})=>(i.forEach((o,s)=>{this.cr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function X1(t){return St(t,"remoteDocumentGlobal")}function Ho(t){return St(t,"remoteDocumentsV14")}function Ol(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J1(t,e){let n=e.documentKey.path.toArray();return[t,Dh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function eD(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=we(n[o],r[o]),i)return i;return i=we(n.length,r.length),i||(i=we(n[n.length-2],r[r.length-2]),i||we(n[n.length-1],r[r.length-1]))}var wv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Nh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Nl(r.mutation,i,Tn.empty(),ut.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){let i=Tr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Pl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Tr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=yn(),s=Rl(),a=function(){return Rl()}();return n.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ar)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Nl(d.mutation,u,d.mutation.getFieldMask(),ut.now())):s.set(u.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new wv(d,(h=s.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Rl(),i=new it((s,a)=>s-a),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let d=r.get(c)||Tn.empty();d=a.applyToLocalView(u,d),r.set(c,d);let h=(i.get(a.batchId)||Ce()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,h=$D();d.forEach(m=>{if(!o.has(m)){let y=QD(n.get(m),r.get(m));y!==null&&h.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return R.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):R.resolve(Tr()),a=-1,c=o;return s.next(u=>R.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Ce())).next(d=>({batchId:a,changes:BD(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Pl();return this.indexManager.getCollectionParents(e,o).next(a=>R.forEach(a,c=>{let u=function(h,m){return new sr(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,m)=>{s=s.insert(h,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Tt.newInvalidDocument(d)))});let a=Pl();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&Nl(d.mutation,u,Tn.empty(),ut.now()),lu(n,u)&&(a=a.insert(c,u))}),a})}};var bv=class{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return R.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wt(i.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(i){return{name:i.name,query:Sw(i.bundledQuery),readTime:wt(i.readTime)}}(n)),R.resolve()}};var Cv=class{constructor(){this.overlays=new it(J.comparator),this.Pr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Tr();return R.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),R.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Pr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Pr.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){let i=Tr(),o=n.length+1,s=new J(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new it((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Tr(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Tr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Gl(n,r));let o=this.Pr.get(n);o===void 0&&(o=Ce(),this.Pr.set(n,o)),this.Pr.set(n,o.add(r.key))}};var Iv=class{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var Xl=class{constructor(){this.Ir=new Xe(Et.Tr),this.Er=new Xe(Et.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){let r=new Et(e,n);this.Ir=this.Ir.add(r),this.Er=this.Er.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new Et(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){let n=new J(new Le([])),r=new Et(n,e),i=new Et(n,e+1),o=[];return this.Er.forEachInRange([r,i],s=>{this.Rr(s),o.push(s.key)}),o}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){let n=new J(new Le([])),r=new Et(n,e),i=new Et(n,e+1),o=Ce();return this.Er.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Et(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Et=class{constructor(e,n){this.key=e,this.yr=n}static Tr(e,n){return J.comparator(e.key,n.key)||we(e.yr,n.yr)}static dr(e,n){return we(e.yr,n.yr)||J.comparator(e.key,n.key)}};var Ev=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Xe(Et.Tr)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Hl(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Sr=this.Sr.add(new Et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,n){return R.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Dr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Et(n,0),i=new Et(n,Number.POSITIVE_INFINITY),o=[];return this.Sr.forEachInRange([r,i],s=>{let a=this.br(s.yr);o.push(a)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(we);return n.forEach(i=>{let o=new Et(i,0),s=new Et(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([o,s],a=>{r=r.add(a.yr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;J.isDocumentKey(o)||(o=o.child(""));let s=new Et(new J(o),0),a=new Xe(we);return this.Sr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.yr)),!0)},s),R.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ce(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return R.forEach(n.mutations,i=>{let o=new Et(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){let r=new Et(n,0),i=this.Sr.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){let n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var xv=class{constructor(e){this.Fr=e,this.docs=function(){return new it(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=yn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=yn(),s=n.path,a=new J(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Cw(vD(d),r)<=0||(i.has(d.key)||lu(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,n,r,i){re()}Mr(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Mv(this)}getSize(e){return R.resolve(this.size)}},Mv=class extends Rh{constructor(e){super(),this.ur=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}};var Tv=class{constructor(e){this.persistence=e,this.Or=new kr(n=>ns(n),au),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new Xl,this.targetCount=0,this.Br=ja.Ln()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),R.resolve()}Qn(e){this.Or.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new ja(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.Qn(n),R.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Lr.mr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Or.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Or.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let r=this.Or.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.Lr.Ar(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.Lr.Vr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Lr.mr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Lr.pr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.Lr.containsKey(n))}};var Fh=class{constructor(e,n){this.kr={},this.overlays={},this.qr=new Mn(0),this.Qr=!1,this.Qr=!0,this.Kr=new Iv,this.referenceDelegate=e(this),this.$r=new Tv(this),this.indexManager=new dv,this.remoteDocumentCache=function(i){return new xv(i)}(r=>this.referenceDelegate.Ur(r)),this.serializer=new Th(n),this.Wr=new bv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Cv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new Ev(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let i=new Dv(this.qr.next());return this.referenceDelegate.Gr(),r(i).next(o=>this.referenceDelegate.zr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}jr(e,n){return R.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}},Dv=class extends mh{constructor(e){super(),this.currentSequenceNumber=e}},Lh=class t{constructor(e){this.persistence=e,this.Hr=new Xl,this.Jr=null}static Yr(e){return new t(e)}get Zr(){if(this.Jr)return this.Jr;throw re()}addReference(e,n,r){return this.Hr.addReference(r,n),this.Zr.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.Hr.removeReference(r,n),this.Zr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Zr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Hr.mr(n.targetId).forEach(i=>this.Zr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Zr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Gr(){this.Jr=new Set}zr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Zr,r=>{let i=J.fromPath(r);return this.Xr(e,i).next(o=>{o||n.removeEntry(i,fe.min())})}).next(()=>(this.Jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Xr(e,n).next(r=>{r?this.Zr.delete(n.toString()):this.Zr.add(n.toString())})}Ur(e){return 0}Xr(e,n){return R.or([()=>R.resolve(this.Hr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.jr(e,n)])}};var Ov=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new gh("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y1,{unique:!0}),c.createObjectStore("documentMutations")}(e),tD(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=R.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),tD(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y1,{unique:!0});let h=u.store("mutations"),m=d.map(y=>h.put(y));return R.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ti(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ni(o)))),r<7&&i>=7&&(s=s.next(()=>this.ri(o))),r<8&&i>=8&&(s=s.next(()=>this.ii(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.si(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:uB});u.createIndex("collectionPathOverlayIndex",dB,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",fB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:Jj});u.createIndex("documentKeyIndex",eB),u.createIndex("collectionGroupIndex",tB)}(e)).next(()=>this.oi(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this._i(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:sB}).createIndex("sequenceNumberIndex",aB,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:cB}).createIndex("documentKeyIndex",lB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ni(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Ah(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ti(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>R.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>R.forEach(a,c=>{ce(c.userId===o.userId);let u=Ko(this.serializer,c);return gO(e,o.userId,u).next(()=>{})}))}))}ri(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Le(s),u=function(h){return[0,an(h)]}(c);o.push(n.get(u).next(d=>d?R.resolve():(h=>n.put({targetId:0,path:an(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>R.waitFor(o))})}ii(e,n){e.createObjectStore("collectionParents",{keyPath:oB});let r=n.store("collectionParents"),i=new Zl,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:an(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Le(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],u)=>{let d=Mr(a);return o(d.popLast())}))}si(e){let n=e.store("targets");return n.J((r,i)=>{let o=Al(i),s=hO(this.serializer,o);return n.put(s)})}oi(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(h){return h.document?new J(Le.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):re()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>R.waitFor(i))}_i(e,n){let r=n.store("mutations"),i=vO(this.serializer),o=new Fh(Lh.Yr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:Ce();Ko(this.serializer,c).keys().forEach(h=>d=d.add(h)),a.set(c.userId,d)}),R.forEach(a,(c,u)=>{let d=new xt(u),h=Oh.lt(this.serializer,d),m=o.getIndexManager(d),y=kh.lt(d,this.serializer,m,o.referenceDelegate);return new Nh(i,y,h,m).recalculateAndSaveOverlaysForDocumentKeys(new jl(n,Mn.oe),c).next()})})}};function tD(t){t.createObjectStore("targetDocuments",{keyPath:rB}).createIndex("documentTargetsIndex",iB,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nB,{unique:!0}),t.createObjectStore("targetGlobal")}var __="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sv=class t{constructor(e,n,r,i,o,s,a,c,u,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ai=o,this.window=s,this.document=a,this.ui=u,this.ci=d,this.li=h,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=m=>Promise.resolve(),!t.D())throw new B(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yv(this,i),this.di=n+"main",this.serializer=new Th(c),this.Ai=new Qi(this.di,this.li,new Ov(this.serializer)),this.Kr=new iv,this.$r=new hv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vO(this.serializer),this.Wr=new rv,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,d===!1&&_t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(N.FAILED_PRECONDITION,__);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.$r.getHighestSequenceNumber(e))}).then(e=>{this.qr=new Mn(e,this.ui)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ai&&this.Ai.close(),Promise.reject(e)))}pi(e){return this.Ei=n=>b(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L(n=>b(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget(()=>b(this,null,function*(){this.started&&(yield this.Vi())})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ih(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.yi(e).next(n=>{n||(this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.Si(e).next(()=>!1):!!n&&this.bi(e).next(()=>!0))).catch(e=>{if(so(e))return $("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ai.enqueueRetryable(()=>this.Ei(e)),this.isPrimary=e})}yi(e){return Sl(e).get("owner").next(n=>R.resolve(this.Di(n)))}Ci(e){return ih(e).delete(this.clientId)}vi(){return b(this,null,function*(){if(this.isPrimary&&!this.Fi(this.Ti,18e5)){this.Ti=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=St(n,"clientMetadata");return r.U().next(i=>{let o=this.Mi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return R.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ri)for(let n of e)this.Ri.removeItem(this.xi(n.clientId))}})}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Vi().then(()=>this.vi()).then(()=>this.gi()))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?R.resolve(!0):Sl(e).get("owner").next(n=>{if(n!==null&&this.Fi(n.leaseTimestampMs,5e3)&&!this.Oi(n.ownerId)){if(this.Di(n)&&this.networkEnabled)return!0;if(!this.Di(n)){if(!n.allowTabSynchronization)throw new B(N.FAILED_PRECONDITION,__);return!1}}return!(!this.networkEnabled||!this.inForeground)||ih(e).U().next(r=>this.Mi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return b(this,null,function*(){this.Qr=!1,this.Ni(),this.Ii&&(this.Ii.cancel(),this.Ii=null),this.Li(),this.Bi(),yield this.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new jl(e,Mn.oe);return this.Si(n).next(()=>this.Ci(n))}),this.Ai.close(),this.ki()})}Mi(e,n){return e.filter(r=>this.Fi(r.updateTimeMs,n)&&!this.Oi(r.clientId))}qi(){return this.runTransaction("getActiveClients","readonly",e=>ih(e).U().next(n=>this.Mi(n,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,n){return kh.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Oh.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,n,r){$("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===17?mB:c===16?pB:c===15?Ew:c===14?MD:c===13?xD:c===12?hB:c===11?ED:void re()}(this.li),s;return this.Ai.runTransaction(e,i,o,a=>(s=new jl(a,this.qr?this.qr.next():Mn.oe),n==="readwrite-primary"?this.yi(s).next(c=>!!c||this.wi(s)).next(c=>{if(!c)throw _t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)),new B(N.FAILED_PRECONDITION,wD);return r(s)}).next(c=>this.bi(s).next(()=>c)):this.Qi(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Qi(e){return Sl(e).get("owner").next(n=>{if(n!==null&&this.Fi(n.leaseTimestampMs,5e3)&&!this.Oi(n.ownerId)&&!this.Di(n)&&!(this.ci||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(N.FAILED_PRECONDITION,__)})}bi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sl(e).put("owner",n)}static D(){return Qi.D()}Si(e){let n=Sl(e);return n.get("owner").next(r=>this.Di(r)?($("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Fi(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(_t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}mi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Pi=()=>{this.ai.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Vi()))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground=this.document.visibilityState==="visible")}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.hi=()=>{this.Ni();let n=/(?:Version|Mobile)\/1[456]/;cm()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var n;try{let r=((n=this.Ri)===null||n===void 0?void 0:n.getItem(this.xi(e)))!==null;return $("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){_t("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch{}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Sl(t){return St(t,"owner")}function ih(t){return St(t,"clientMetadata")}function Aw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ki=r,this.$i=i}static Ui(e,n){let r=Ce(),i=Ce();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Av=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Vh=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return cm()?8:bD(kc())>0?6:4}()}initialize(e,n){this.Hi=e,this.indexManager=n,this.Wi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Yi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Av;return this.Zi(e,n,s).next(a=>{if(o.result=a,this.Gi)return this.Xi(e,n,s,a.size)})}).next(()=>o.result)}Xi(e,n,r,i){return r.documentReadCount<this.zi?(Ia()<=dr.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),R.resolve()):(Ia()<=dr.DEBUG&&$("QueryEngine","Query:",Ea(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ji*i?(Ia()<=dr.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):R.resolve())}Ji(e,n){if(D1(n))return R.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ih(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ce(...o);return this.Hi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.es(n,a);return this.ts(n,u,s,c.readTime)?this.Ji(e,Ih(n,null,"F")):this.ns(e,u,n,c)}))})))}Yi(e,n,r,i){return D1(n)||i.isEqual(fe.min())?R.resolve(null):this.Hi.getDocuments(e,r).next(o=>{let s=this.es(n,o);return this.ts(n,s,r,i)?R.resolve(null):(Ia()<=dr.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ea(n)),this.ns(e,s,n,_D(i,-1)).next(a=>a))})}es(e,n){let r=new Xe(UD(e));return n.forEach((i,o)=>{lu(e,o)&&(r=r.add(o))}),r}ts(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Zi(e,n,r){return Ia()<=dr.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ea(n)),this.Hi.getDocumentsMatchingQuery(e,n,Ln.min(),r)}ns(e,n,r,i){return this.Hi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var kv=class{constructor(e,n,r,i){this.persistence=e,this.rs=n,this.serializer=i,this.ss=new it(we),this.os=new kr(o=>ns(o),au),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(r)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nh(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ss))}};function wO(t,e,n,r){return new kv(t,e,n,r)}function bO(t,e){return b(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.cs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ce();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({ls:u,removedBatchIds:s,addedBatchIds:a}))})})})}function KB(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.us.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let h=u.batch,m=h.keys(),y=R.resolve();return m.forEach(M=>{y=y.next(()=>d.getEntry(c,M)).next(A=>{let P=u.docVersions.get(M);ce(P!==null),A.version.compareTo(P)<0&&(h.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function CO(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.$r.getLastRemoteSnapshotVersion(n))}function YB(t,e){let n=X(t),r=e.snapshotVersion,i=n.ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.us.newChangeBuffer({trackRemovals:!0});i=n.ss;let a=[];e.targetChanges.forEach((d,h)=>{let m=i.get(h);if(!m)return;a.push(n.$r.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.$r.addMatchingKeys(o,d.addedDocuments,h)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(bt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),function(A,P,z){return A.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(m,y,d)&&a.push(n.$r.updateTargetData(o,y))});let c=yn(),u=Ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(IO(o,s,e.documentUpdates).next(d=>{c=d.hs,u=d.Ps})),!r.isEqual(fe.min())){let d=n.$r.getLastRemoteSnapshotVersion(o).next(h=>n.$r.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ss=i,o))}function IO(t,e,n){let r=Ce(),i=Ce();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=yn();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{hs:s,Ps:i}})}function QB(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ba(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.$r.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):n.$r.allocateTargetId(r).next(s=>(i=new Ua(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.$r.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ss=n.ss.insert(r.targetId,r),n.os.set(e,r.targetId)),r})}function $a(t,e,n){return b(this,null,function*(){let r=X(t),i=r.ss.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!so(s))throw s;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ss=r.ss.remove(e),r.os.delete(i.target)})}function Uh(t,e,n){let r=X(t),i=fe.min(),o=Ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let h=X(c),m=h.os.get(d);return m!==void 0?R.resolve(h.ss.get(m)):h.$r.getTargetData(u,d)}(r,s,cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.rs.getDocumentsMatchingQuery(s,e,n?i:fe.min(),n?o:Ce())).next(a=>(MO(r,VD(e),a),{documents:a,Is:o})))}function EO(t,e){let n=X(t),r=X(n.$r),i=n.ss.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function xO(t,e){let n=X(t),r=n._s.get(e)||fe.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.us.getAllFromCollectionGroup(i,e,_D(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(MO(n,e,i),i))}function MO(t,e,n){let r=t._s.get(e)||fe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t._s.set(e,r)}function ZB(t,e,n,r){return b(this,null,function*(){let i=X(t),o=Ce(),s=yn();for(let u of n){let d=e.Ts(u.metadata.name);u.document&&(o=o.add(d));let h=e.Es(u);h.setReadTime(e.ds(u.metadata.readTime)),s=s.insert(d,h)}let a=i.us.newChangeBuffer({trackRemovals:!0}),c=yield Ba(i,function(d){return cn(Qa(Le.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>IO(u,a,s).next(d=>(a.apply(u),d)).next(d=>i.$r.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.$r.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.hs,d.Ps)).next(()=>d.hs)))})}function XB(r,i){return b(this,arguments,function*(t,e,n=Ce()){let o=yield Ba(t,cn(Sw(e.bundledQuery))),s=X(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=wt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Wr.saveNamedQuery(a,e);let u=o.withResumeToken(bt.EMPTY_BYTE_STRING,c);return s.ss=s.ss.insert(u.targetId,u),s.$r.updateTargetData(a,u).next(()=>s.$r.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.$r.addMatchingKeys(a,n,o.targetId)).next(()=>s.Wr.saveNamedQuery(a,e))})})}function nD(t,e){return`firestore_clients_${t}_${e}`}function rD(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function v_(t,e){return`firestore_targets_${t}_${e}`}var jh=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static As(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new B(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(_t("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Rs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Fl=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static As(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new B(r.error.code,r.error.message))),o?new t(e,r.state,i):(_t("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Rs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Bh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static As(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Dw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=CD(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(_t("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Rv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static As(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(_t("SharedClientState",`Failed to parse online state: ${e}`),null)}},Jl=class{constructor(){this.activeTargetIds=Dw()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Ll=class{constructor(e,n,r,i,o){this.window=e,this.ai=n,this.persistenceKey=r,this.gs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new it(we),this.started=!1,this.Ss=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.bs=nD(this.persistenceKey,this.gs),this.Ds=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ws=this.ws.insert(this.gs,new Jl),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Ms=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.xs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}start(){return b(this,null,function*(){let e=yield this.syncEngine.qi();for(let r of e){if(r===this.gs)continue;let i=this.getItem(nD(this.persistenceKey,r));if(i){let o=Bh.As(r,i);o&&(this.ws=this.ws.insert(o.clientId,o))}}this.Os();let n=this.storage.getItem(this.Ms);if(n){let r=this.Ns(n);r&&this.Ls(r)}for(let r of this.Ss)this.ys(r);this.Ss=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let n=!1;return this.ws.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,n,r){this.ks(e,n,r),this.qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(v_(this.persistenceKey,e));if(r){let i=Fl.As(e,r);i&&(n=i.state)}}return this.Qs.Vs(e),this.Os(),n}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(v_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return $("SharedClientState","READ",e,n),n}setItem(e,n){$("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){$("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){let n=e;if(n.storageArea===this.storage){if($("SharedClientState","EVENT",n.key,n.newValue),n.key===this.bs)return void _t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable(()=>b(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let r=this.Ws(n.key);return this.Gs(r,null)}{let r=this.zs(n.key,n.newValue);if(r)return this.Gs(r.clientId,r)}}else if(this.vs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let r=this.Js(n.key,n.newValue);if(r)return this.Ys(r)}}else if(n.key===this.Ms){if(n.newValue!==null){let r=this.Ns(n.newValue);if(r)return this.Ls(r)}}else if(n.key===this.Ds){let r=function(o){let s=Mn.oe;if(o!=null)try{let a=JSON.parse(o);ce(typeof a=="number"),s=a}catch(a){_t("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Mn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.xs){let r=this.Zs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Xs(i)))}}}else this.Ss.push(n)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,n,r){let i=new jh(this.currentUser,e,n,r),o=rD(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Rs())}qs(e){let n=rD(this.persistenceKey,this.currentUser,e);this.removeItem(n)}$s(e){let n={clientId:this.gs,onlineState:e};this.storage.setItem(this.Ms,JSON.stringify(n))}Ks(e,n,r){let i=v_(this.persistenceKey,e),o=new Fl(e,n,r);this.setItem(i,o.Rs())}Us(e){let n=JSON.stringify(Array.from(e));this.setItem(this.xs,n)}Ws(e){let n=this.Cs.exec(e);return n?n[1]:null}zs(e,n){let r=this.Ws(e);return Bh.As(r,n)}js(e,n){let r=this.vs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return jh.As(new xt(o),i,n)}Js(e,n){let r=this.Fs.exec(e),i=Number(r[1]);return Fl.As(i,n)}Ns(e){return Rv.As(e)}Zs(e){return JSON.parse(e)}Hs(e){return b(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.eo(e.batchId,e.state,e.error);$("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,n){let r=n?this.ws.insert(e,n):this.ws.remove(e),i=this.Bs(this.ws),o=this.Bs(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.ro(s,a).then(()=>{this.ws=r})}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let n=Dw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},$h=class{constructor(){this.io=new Jl,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,n,r){this.so[e]=n}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new Jl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Nv=class{oo(e){}shutdown(){}};var zh=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.lo)e(0)}co(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var oh=null;function w_(){return oh===null?oh=function(){return 268435456+Math.round(2147483648*Math.random())}():oh++,"0x"+oh.toString(16)}var JB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Fv=class{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}};var Qt="WebChannelConnection",Lv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.bo=r+"://"+n.host,this.Do=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get vo(){return!1}Fo(n,r,i,o,s){let a=w_(),c=this.Mo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(u,o,s),this.Oo(n,c,u,i).then(d=>($("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Fn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}No(n,r,i,o,s,a){return this.Fo(n,r,i,o,s)}xo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ya}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}Mo(n,r){let i=JB[n];return`${this.bo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,n,r,i){let o=w_();return new Promise((s,a)=>{let c=new d_;c.setWithCredentials(!0),c.listenOnce(h_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ml.NO_ERROR:let d=c.getResponseJson();$(Qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Ml.TIMEOUT:$(Qt,`RPC '${e}' ${o} timed out`),a(new B(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:let h=c.getStatus();if($(Qt,`RPC '${e}' ${o} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let M=function(P){let z=P.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(z)>=0?z:N.UNKNOWN}(y.status);a(new B(M,y.message))}else a(new B(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(N.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{$(Qt,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);$(Qt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}Lo(e,n,r){let i=w_(),o=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=g_(),a=m_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new f_({})),this.xo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=o.join("");$(Qt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=s.createWebChannel(d,c),m=!1,y=!1,M=new Fv({Po:P=>{y?$(Qt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||($(Qt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),$(Qt,`RPC '${e}' stream ${i} sending:`,P),h.send(P))},Io:()=>h.close()}),A=(P,z,W)=>{P.listen(z,j=>{try{W(j)}catch(Y){setTimeout(()=>{throw Y},0)}})};return A(h,_a.EventType.OPEN,()=>{y||($(Qt,`RPC '${e}' stream ${i} transport opened.`),M.po())}),A(h,_a.EventType.CLOSE,()=>{y||(y=!0,$(Qt,`RPC '${e}' stream ${i} transport closed`),M.wo())}),A(h,_a.EventType.ERROR,P=>{y||(y=!0,Fn(Qt,`RPC '${e}' stream ${i} transport errored:`,P),M.wo(new B(N.UNAVAILABLE,"The operation could not be completed")))}),A(h,_a.EventType.MESSAGE,P=>{var z;if(!y){let W=P.data[0];ce(!!W);let j=W,Y=j.error||((z=j[0])===null||z===void 0?void 0:z.error);if(Y){$(Qt,`RPC '${e}' stream ${i} received error:`,Y);let le=Y.status,ie=function(C){let T=It[C];if(T!==void 0)return JD(T)}(le),x=Y.message;ie===void 0&&(ie=N.INTERNAL,x="Unknown error status: "+le+" with message "+Y.message),y=!0,M.wo(new B(ie,x)),h.close()}else $(Qt,`RPC '${e}' stream ${i} received:`,W),M.So(W)}}),A(a,p_.STAT_EVENT,P=>{P.stat===th.PROXY?$(Qt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===th.NOPROXY&&$(Qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.yo()},0),M}};function TO(){return typeof window<"u"?window:null}function uh(){return typeof document<"u"?document:null}function uu(t){return new X_(t,!0)}var eu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ai=e,this.timerId=n,this.Bo=r,this.ko=i,this.qo=o,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();let n=Math.floor(this.Qo+this.Go()),r=Math.max(0,Date.now()-this.$o),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Qo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,i,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var qh=class{constructor(e,n,r,i,o,s,a,c){this.ai=e,this.jo=r,this.Ho=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new eu(e,n)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return b(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){return b(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,n){return b(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Vo(n)})}c_(){}auth(){this.state=1;let e=this.l_(this.Jo),n=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Jo===n&&this.h_(r,i)},r=>{e(()=>{let i=new B(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.P_(i)})})}h_(e,n){let r=this.l_(this.Jo);this.stream=this.I_(e,n),this.stream.To(()=>{r(()=>this.listener.To())}),this.stream.Ao(()=>{r(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(i=>{r(()=>this.P_(i))}),this.stream.onMessage(i=>{r(()=>++this.Xo==1?this.T_(i):this.onNext(i))})}r_(){this.state=5,this.e_.Wo(()=>b(this,null,function*(){this.state=0,this.start()}))}P_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return n=>{this.ai.enqueueAndForget(()=>this.Jo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Vv=class extends qh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}I_(e,n){return this.connection.Lo("Listen",e,n)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();let n=LB(this.serializer,e),r=function(o){if(!("targetChange"in o))return fe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?fe.min():s.readTime?wt(s.readTime):fe.min()}(e);return this.listener.E_(n,r)}d_(e){let n={};n.database=tv(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=bh(c)?{documents:aO(o,c)}:{query:cO(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=tO(o,s.resumeToken);let u=J_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(fe.min())>0){a.readTime=Va(o,s.snapshotVersion.toTimestamp());let u=J_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=UB(this.serializer,e);r&&(n.labels=r),this.__(n)}A_(e){let n={};n.database=tv(this.serializer),n.removeTarget=e,this.__(n)}},Uv=class extends qh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,n){return this.connection.Lo("Write",e,n)}T_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();let n=VB(e.writeResults,e.commitTime),r=wt(e.commitTime);return this.listener.f_(r,n)}g_(){let e={};e.database=tv(this.serializer),this.__(e)}V_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Ql(this.serializer,r))};this.__(n)}};var jv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.p_=!1}y_(){if(this.p_)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,n,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Fo(e,ev(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(N.UNKNOWN,o.toString())})}No(e,n,r,i,o){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.No(e,ev(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(N.UNKNOWN,s.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},Bv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(_t(n),this.b_=!1):$("OnlineStateTracker",n)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var $v=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=o,this.B_.oo(s=>{r.enqueueAndForget(()=>b(this,null,function*(){ao(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let u=X(c);u.N_.add(4),yield Za(u),u.k_.set("Unknown"),u.N_.delete(4),yield du(u)})}(this))}))}),this.k_=new Bv(r,i)}};function du(t){return b(this,null,function*(){if(ao(t))for(let e of t.L_)yield e(!0)})}function Za(t){return b(this,null,function*(){for(let e of t.L_)yield e(!1)})}function lp(t,e){let n=X(t);n.O_.has(e.targetId)||(n.O_.set(e.targetId,e),Nw(n)?Rw(n):Ja(n).n_()&&kw(n,e))}function za(t,e){let n=X(t),r=Ja(n);n.O_.delete(e),r.n_()&&DO(n,e),n.O_.size===0&&(r.n_()?r.s_():ao(n)&&n.k_.set("Unknown"))}function kw(t,e){if(t.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ja(t).d_(e)}function DO(t,e){t.q_.xe(e),Ja(t).A_(e)}function Rw(t){t.q_=new Z_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.O_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ja(t).start(),t.k_.D_()}function Nw(t){return ao(t)&&!Ja(t).t_()&&t.O_.size>0}function ao(t){return X(t).N_.size===0}function OO(t){t.q_=void 0}function e5(t){return b(this,null,function*(){t.k_.set("Online")})}function t5(t){return b(this,null,function*(){t.O_.forEach((e,n)=>{kw(t,e)})})}function n5(t,e){return b(this,null,function*(){OO(t),Nw(t)?(t.k_.F_(e),Rw(t)):t.k_.set("Unknown")})}function r5(t,e,n){return b(this,null,function*(){if(t.k_.set("Online"),e instanceof xh&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.O_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.O_.delete(a),i.q_.removeTarget(a))})}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hh(t,r)}else if(e instanceof Pa?t.q_.Ke(e):e instanceof Eh?t.q_.He(e):t.q_.We(e),!n.isEqual(fe.min()))try{let r=yield CO(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.q_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.O_.get(u);d&&o.O_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.O_.get(c);if(!d)return;o.O_.set(c,d.withResumeToken(bt.EMPTY_BYTE_STRING,d.snapshotVersion)),DO(o,c);let h=new Ua(d.target,c,u,d.sequenceNumber);kw(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield Hh(t,r)}})}function Hh(t,e,n){return b(this,null,function*(){if(!so(e))throw e;t.N_.add(1),yield Za(t),t.k_.set("Offline"),n||(n=()=>CO(t.localStore)),t.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield n(),t.N_.delete(1),yield du(t)}))})}function SO(t,e){return e().catch(n=>Hh(t,n,e))}function Xa(t){return b(this,null,function*(){let e=X(t),n=io(e),r=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;i5(e);)try{let i=yield QB(e.localStore,r);if(i===null){e.x_.length===0&&n.s_();break}r=i.batchId,o5(e,i)}catch(i){yield Hh(e,i)}PO(e)&&AO(e)})}function i5(t){return ao(t)&&t.x_.length<10}function o5(t,e){t.x_.push(e);let n=io(t);n.n_()&&n.R_&&n.V_(e.mutations)}function PO(t){return ao(t)&&!io(t).t_()&&t.x_.length>0}function AO(t){io(t).start()}function s5(t){return b(this,null,function*(){io(t).g_()})}function a5(t){return b(this,null,function*(){let e=io(t);for(let n of t.x_)e.V_(n.mutations)})}function c5(t,e,n){return b(this,null,function*(){let r=t.x_.shift(),i=K_.from(r,e,n);yield SO(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Xa(t)})}function l5(t,e){return b(this,null,function*(){e&&io(t).R_&&(yield function(r,i){return b(this,null,function*(){if(function(s){return XD(s)&&s!==N.ABORTED}(i.code)){let o=r.x_.shift();io(r).i_(),yield SO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Xa(r)}})}(t,e)),PO(t)&&AO(t)})}function iD(t,e){return b(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=ao(n);n.N_.add(3),yield Za(n),r&&n.k_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.N_.delete(3),yield du(n)})}function zv(t,e){return b(this,null,function*(){let n=X(t);e?(n.N_.delete(2),yield du(n)):e||(n.N_.add(2),yield Za(n),n.k_.set("Unknown"))})}function Ja(t){return t.Q_||(t.Q_=function(n,r,i){let o=X(n);return o.y_(),new Vv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{To:e5.bind(null,t),Ao:t5.bind(null,t),Vo:n5.bind(null,t),E_:r5.bind(null,t)}),t.L_.push(e=>b(this,null,function*(){e?(t.Q_.i_(),Nw(t)?Rw(t):t.k_.set("Unknown")):(yield t.Q_.stop(),OO(t))}))),t.Q_}function io(t){return t.K_||(t.K_=function(n,r,i){let o=X(n);return o.y_(),new Uv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{To:()=>Promise.resolve(),Ao:s5.bind(null,t),Vo:l5.bind(null,t),m_:a5.bind(null,t),f_:c5.bind(null,t)}),t.L_.push(e=>b(this,null,function*(){e?(t.K_.i_(),yield Xa(t)):(yield t.K_.stop(),t.x_.length>0&&($("RemoteStore",`Stopping write stream with ${t.x_.length} pending writes`),t.x_=[]))}))),t.K_}var qv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ec(t,e){if(_t("AsyncQueue",`${e}: ${t}`),so(t))return new B(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Gh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Pl(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Wh=class{constructor(){this.U_=new it(J.comparator)}track(e){let n=e.doc.key,r=this.U_.get(n);r?e.type!==0&&r.type===3?this.U_=this.U_.insert(n,e):e.type===3&&r.type!==1?this.U_=this.U_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.U_=this.U_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.U_=this.U_.remove(n):e.type===1&&r.type===2?this.U_=this.U_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):re():this.U_=this.U_.insert(n,e)}W_(){let e=[];return this.U_.inorderTraversal((n,r)=>{e.push(r)}),e}},qa=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Gh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Hv=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}},Gv=class{constructor(){this.queries=oD(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(n,r){let i=X(n),o=i.queries;i.queries=oD(),o.forEach((s,a)=>{for(let c of a.z_)c.onError(r)})})(this,new B(N.ABORTED,"Firestore shutting down"))}};function oD(){return new kr(t=>LD(t),cu)}function Fw(t,e){return b(this,null,function*(){let n=X(t),r=3,i=e.query,o=n.queries.get(i);o?!o.j_()&&e.H_()&&(r=2):(o=new Hv,r=e.H_()?0:1);try{switch(r){case 0:o.G_=yield n.onListen(i,!0);break;case 1:o.G_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=ec(s,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.z_.push(e),e.Y_(n.onlineState),o.G_&&e.Z_(o.G_)&&Vw(n)})}function Lw(t,e){return b(this,null,function*(){let n=X(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.z_.indexOf(e);s>=0&&(o.z_.splice(s,1),o.z_.length===0?i=e.H_()?0:1:!o.j_()&&e.H_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function u5(t,e){let n=X(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.z_)a.Z_(i)&&(r=!0);s.G_=i}}r&&Vw(n)}function d5(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let o of i.z_)o.onError(n);r.queries.delete(e)}function Vw(t){t.J_.forEach(e=>{e.next()})}var Wv,sD;(sD=Wv||(Wv={})).X_="default",sD.Cache="cache";var tu=class{constructor(e,n,r){this.query=e,this.ea=n,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=r||{}}Z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new qa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ta?this.ra(e)&&(this.ea.next(e),n=!0):this.ia(e,this.onlineState)&&(this.sa(e),n=!0),this.na=e,n}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let n=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),n=!0),n}ia(e,n){if(!e.fromCache||!this.H_())return!0;let r=n!=="Offline";return(!this.options.oa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ra(e){if(e.docChanges.length>0)return!0;let n=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}sa(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==Wv.Cache}};var Kv=class{constructor(e,n){this._a=e,this.byteLength=n}aa(){return"metadata"in this._a}};var Kh=class{constructor(e){this.serializer=e}Ts(e){return Or(this.serializer,e)}Es(e){return e.metadata.exists?sO(this.serializer,e.document,!1):Tt.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return wt(e)}},Yv=class{constructor(e,n,r){this.ua=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kO(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++n;let r=Le.fromString(e._a.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}la(e){let n=new Map,r=new Kh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ts(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||Ce()).add(o);n.set(s,a)}}return n}complete(){return b(this,null,function*(){let e=yield ZB(this.localStore,new Kh(this.serializer),this.documents,this.ua.id),n=this.la(this.documents);for(let r of this.queries)yield XB(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ha:this.collectionGroups,Pa:e}})}};function kO(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Yh=class{constructor(e){this.key=e}},Qh=class{constructor(e){this.key=e}},Zh=class{constructor(e,n){this.query=e,this.Ia=n,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=Ce(),this.mutatedKeys=Ce(),this.da=UD(e),this.Aa=new Gh(this.da)}get Ra(){return this.Ia}Va(e,n){let r=n?n.ma:new Wh,i=n?n.Aa:this.Aa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let m=i.get(d),y=lu(this.query,h)?h:null,M=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),P=!1;m&&y?m.data.isEqual(y.data)?M!==A&&(r.track({type:3,doc:y}),P=!0):this.fa(m,y)||(r.track({type:2,doc:y}),P=!0,(c&&this.da(y,c)>0||u&&this.da(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),P=!0):m&&!y&&(r.track({type:1,doc:m}),P=!0,(c||u)&&(a=!0)),P&&(y?(s=s.add(y),o=A?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Aa:s,ma:r,ts:a,mutatedKeys:o}}fa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;let s=e.ma.W_();s.sort((d,h)=>function(y,M){let A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return A(y)-A(M)}(d.type,h.type)||this.da(d.doc,h.doc)),this.ga(r),i=i!=null&&i;let a=n&&!i?this.pa():[],c=this.Ea.size===0&&this.current&&!i?1:0,u=c!==this.Ta;return this.Ta=c,s.length!==0||u?{snapshot:new qa(this.query,e.Aa,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Wh,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(n=>this.Ia=this.Ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ia=this.Ia.delete(n)),this.current=e.current)}pa(){if(!this.current)return[];let e=this.Ea;this.Ea=Ce(),this.Aa.forEach(r=>{this.wa(r.key)&&(this.Ea=this.Ea.add(r.key))});let n=[];return e.forEach(r=>{this.Ea.has(r)||n.push(new Qh(r))}),this.Ea.forEach(r=>{e.has(r)||n.push(new Yh(r))}),n}Sa(e){this.Ia=e.Is,this.Ea=Ce();let n=this.Va(e.documents);return this.applyChanges(n,!0)}ba(){return qa.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},Qv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Zv=class{constructor(e){this.key=e,this.Da=!1}},Xv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.va=new kr(a=>LD(a),cu),this.Fa=new Map,this.Ma=new Set,this.xa=new it(J.comparator),this.Oa=new Map,this.Na=new Xl,this.La={},this.Ba=new Map,this.ka=ja.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function f5(t,e,n=!0){return b(this,null,function*(){let r=up(t),i,o=r.va.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ba()):i=yield RO(r,e,n,!0),i})}function h5(t,e){return b(this,null,function*(){let n=up(t);yield RO(n,e,!0,!1)})}function RO(t,e,n,r){return b(this,null,function*(){let i=yield Ba(t.localStore,cn(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield Uw(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&lp(t.remoteStore,i),a})}function Uw(t,e,n,r,i){return b(this,null,function*(){t.Qa=(h,m,y)=>function(A,P,z,W){return b(this,null,function*(){let j=P.view.Va(z);j.ts&&(j=yield Uh(A.localStore,P.query,!1).then(({documents:x})=>P.view.Va(x,j)));let Y=W&&W.targetChanges.get(P.targetId),le=W&&W.targetMismatches.get(P.targetId)!=null,ie=P.view.applyChanges(j,A.isPrimaryClient,Y,le);return Jv(A,P.targetId,ie.ya),ie.snapshot})}(t,h,m,y);let o=yield Uh(t.localStore,e,!0),s=new Zh(e,o.Is),a=s.Va(o.documents),c=Kl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);Jv(t,n,u.ya);let d=new Qv(e,n,s);return t.va.set(e,d),t.Fa.has(n)?t.Fa.get(n).push(e):t.Fa.set(n,[e]),u.snapshot})}function p5(t,e,n){return b(this,null,function*(){let r=X(t),i=r.va.get(e),o=r.Fa.get(i.targetId);if(o.length>1)return r.Fa.set(i.targetId,o.filter(s=>!cu(s,e))),void r.va.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $a(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&za(r.remoteStore,i.targetId),Ha(r,i.targetId)}).catch(oo))):(Ha(r,i.targetId),yield $a(r.localStore,i.targetId,!0))})}function m5(t,e){return b(this,null,function*(){let n=X(t),r=n.va.get(e),i=n.Fa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),za(n.remoteStore,r.targetId))})}function g5(t,e,n){return b(this,null,function*(){let r=zw(t);try{let i=yield function(s,a){let c=X(s),u=ut.now(),d=a.reduce((y,M)=>y.add(M.key),Ce()),h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let M=yn(),A=Ce();return c.us.getEntries(y,d).next(P=>{M=P,M.forEach((z,W)=>{W.isValidDocument()||(A=A.add(z))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,M)).next(P=>{h=P;let z=[];for(let W of a){let j=SB(W,h.get(W.key).overlayedDocument);j!=null&&z.push(new ar(W.key,j,SD(j.value.mapValue),yt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,z,a)}).next(P=>{m=P;let z=P.applyToLocalDocumentSet(h,A);return c.documentOverlayCache.saveOverlays(y,P.batchId,z)})}).then(()=>({batchId:m.batchId,changes:BD(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.La[s.currentUser.toKey()];u||(u=new it(we)),u=u.insert(a,c),s.La[s.currentUser.toKey()]=u}(r,i.batchId,n),yield ci(r,i.changes),yield Xa(r.remoteStore)}catch(i){let o=ec(i,"Failed to persist write");n.reject(o)}})}function NO(t,e){return b(this,null,function*(){let n=X(t);try{let r=yield YB(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Oa.get(o);s&&(ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Da=!0:i.modifiedDocuments.size>0?ce(s.Da):i.removedDocuments.size>0&&(ce(s.Da),s.Da=!1))}),yield ci(n,r,e)}catch(r){yield oo(r)}})}function aD(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.va.forEach((o,s)=>{let a=s.view.Y_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=X(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(let m of h.z_)m.Y_(a)&&(u=!0)}),u&&Vw(c)}(r.eventManager,e),i.length&&r.Ca.E_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function y5(t,e,n){return b(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Oa.get(e),o=i&&i.key;if(o){let s=new it(J.comparator);s=s.insert(o,Tt.newNoDocument(o,fe.min()));let a=Ce().add(o),c=new Wl(fe.min(),new Map,new it(we),s,a);yield NO(r,c),r.xa=r.xa.remove(o),r.Oa.delete(e),$w(r)}else yield $a(r.localStore,e,!1).then(()=>Ha(r,e,n)).catch(oo)})}function _5(t,e){return b(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let i=yield KB(n.localStore,e);Bw(n,r,null),jw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ci(n,i)}catch(i){yield oo(i)}})}function v5(t,e,n){return b(this,null,function*(){let r=X(t);try{let i=yield function(s,a){let c=X(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(ce(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);Bw(r,e,n),jw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ci(r,i)}catch(i){yield oo(i)}})}function w5(t,e){return b(this,null,function*(){let n=X(t);ao(n.remoteStore)||$("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=X(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ba.get(r)||[];i.push(e),n.Ba.set(r,i)}catch(r){let i=ec(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function jw(t,e){(t.Ba.get(e)||[]).forEach(n=>{n.resolve()}),t.Ba.delete(e)}function Bw(t,e,n){let r=X(t),i=r.La[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.La[r.currentUser.toKey()]=i}}function Ha(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Fa.get(e))t.va.delete(r),n&&t.Ca.Ka(r,n);t.Fa.delete(e),t.isPrimaryClient&&t.Na.mr(e).forEach(r=>{t.Na.containsKey(r)||FO(t,r)})}function FO(t,e){t.Ma.delete(e.path.canonicalString());let n=t.xa.get(e);n!==null&&(za(t.remoteStore,n),t.xa=t.xa.remove(e),t.Oa.delete(n),$w(t))}function Jv(t,e,n){for(let r of n)r instanceof Yh?(t.Na.addReference(r.key,e),b5(t,r)):r instanceof Qh?($("SyncEngine","Document no longer in limbo: "+r.key),t.Na.removeReference(r.key,e),t.Na.containsKey(r.key)||FO(t,r.key)):re()}function b5(t,e){let n=e.key,r=n.path.canonicalString();t.xa.get(n)||t.Ma.has(r)||($("SyncEngine","New document in limbo: "+n),t.Ma.add(r),$w(t))}function $w(t){for(;t.Ma.size>0&&t.xa.size<t.maxConcurrentLimboResolutions;){let e=t.Ma.values().next().value;t.Ma.delete(e);let n=new J(Le.fromString(e)),r=t.ka.next();t.Oa.set(r,new Zv(n)),t.xa=t.xa.insert(n,r),lp(t.remoteStore,new Ua(cn(Qa(n.path)),r,"TargetPurposeLimboResolution",Mn.oe))}}function ci(t,e,n){return b(this,null,function*(){let r=X(t),i=[],o=[],s=[];r.va.isEmpty()||(r.va.forEach((a,c)=>{s.push(r.Qa(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){let h=u?!u.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=Pv.Ui(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.Ca.E_(i),yield function(c,u){return b(this,null,function*(){let d=X(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>R.forEach(u,m=>R.forEach(m.Ki,y=>d.persistence.referenceDelegate.addReference(h,m.targetId,y)).next(()=>R.forEach(m.$i,y=>d.persistence.referenceDelegate.removeReference(h,m.targetId,y)))))}catch(h){if(!so(h))throw h;$("LocalStore","Failed to update sequence numbers: "+h)}for(let h of u){let m=h.targetId;if(!h.fromCache){let y=d.ss.get(m),M=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(M);d.ss=d.ss.insert(m,A)}}})}(r.localStore,o))})}function C5(t,e){return b(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield bO(n.localStore,e);n.currentUser=e,function(o,s){o.Ba.forEach(a=>{a.forEach(c=>{c.reject(new B(N.CANCELLED,s))})}),o.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ci(n,r.ls)}})}function I5(t,e){let n=X(t),r=n.Oa.get(e);if(r&&r.Da)return Ce().add(r.key);{let i=Ce(),o=n.Fa.get(e);if(!o)return i;for(let s of o){let a=n.va.get(s);i=i.unionWith(a.view.Ra)}return i}}function E5(t,e){return b(this,null,function*(){let n=X(t),r=yield Uh(n.localStore,e.query,!0),i=e.view.Sa(r);return n.isPrimaryClient&&Jv(n,e.targetId,i.ya),i})}function x5(t,e){return b(this,null,function*(){let n=X(t);return xO(n.localStore,e).then(r=>ci(n,r))})}function M5(t,e,n,r){return b(this,null,function*(){let i=X(t),o=yield function(a,c){let u=X(a),d=X(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Fn(h,c).next(m=>m?u.localDocuments.getDocuments(h,m):R.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield Xa(i.remoteStore):n==="acknowledged"||n==="rejected"?(Bw(i,e,r||null),jw(i,e),function(a,c){X(X(a).mutationQueue).xn(c)}(i.localStore,e)):re(),yield ci(i,o)):$("SyncEngine","Cannot apply mutation batch with id: "+e)})}function T5(t,e){return b(this,null,function*(){let n=X(t);if(up(n),zw(n),e===!0&&n.qa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield cD(n,r.toArray());n.qa=!0,yield zv(n.remoteStore,!0);for(let o of i)lp(n.remoteStore,o)}else if(e===!1&&n.qa!==!1){let r=[],i=Promise.resolve();n.Fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ha(n,s),$a(n.localStore,s,!0))),za(n.remoteStore,s)}),yield i,yield cD(n,r),function(s){let a=X(s);a.Oa.forEach((c,u)=>{za(a.remoteStore,u)}),a.Na.gr(),a.Oa=new Map,a.xa=new it(J.comparator)}(n),n.qa=!1,yield zv(n.remoteStore,!1)}})}function cD(t,e,n){return b(this,null,function*(){let r=X(t),i=[],o=[];for(let s of e){let a,c=r.Fa.get(s);if(c&&c.length!==0){a=yield Ba(r.localStore,cn(c[0]));for(let u of c){let d=r.va.get(u),h=yield E5(r,d);h.snapshot&&o.push(h.snapshot)}}else{let u=yield EO(r.localStore,s);a=yield Ba(r.localStore,u),yield Uw(r,LO(u),s,!1,a.resumeToken)}i.push(a)}return r.Ca.E_(o),i})}function LO(t){return FD(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function D5(t){return function(n){return X(X(n).persistence).qi()}(X(t).localStore)}function O5(t,e,n,r){return b(this,null,function*(){let i=X(t);if(i.qa)return void $("SyncEngine","Ignoring unexpected query state notification.");let o=i.Fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield xO(i.localStore,VD(o[0])),a=Wl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",bt.EMPTY_BYTE_STRING);yield ci(i,s,a);break}case"rejected":yield $a(i.localStore,e,!0),Ha(i,e,r);break;default:re()}})}function S5(t,e,n){return b(this,null,function*(){let r=up(t);if(r.qa){for(let i of e){if(r.Fa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$("SyncEngine","Adding an already active target "+i);continue}let o=yield EO(r.localStore,i),s=yield Ba(r.localStore,o);yield Uw(r,LO(o),s.targetId,!1,s.resumeToken),lp(r.remoteStore,s)}for(let i of n)r.Fa.has(i)&&(yield $a(r.localStore,i,!1).then(()=>{za(r.remoteStore,i),Ha(r,i)}).catch(oo))}})}function up(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y5.bind(null,e),e.Ca.E_=u5.bind(null,e.eventManager),e.Ca.Ka=d5.bind(null,e.eventManager),e}function zw(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v5.bind(null,e),e}function P5(t,e,n){let r=X(t);(function(o,s,a){return b(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,M){let A=X(y),P=wt(M.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",z=>A.Wr.getBundleMetadata(z,M.id)).then(z=>!!z&&z.createTime.compareTo(P)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(kO(c));let u=new Yv(c,o.localStore,s.serializer),d=yield s.$a();for(;d;){let m=yield u.ca(d);m&&a._updateProgress(m),d=yield s.$a()}let h=yield u.complete();return yield ci(o,h.Pa,void 0),yield function(y,M){let A=X(y);return A.persistence.runTransaction("Save bundle","readwrite",P=>A.Wr.saveBundleMetadata(P,M))}(o.localStore,c),a._completeWith(h.progress),Promise.resolve(h.ha)}catch(c){return Fn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var nu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=uu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return wO(this.persistence,new Vh,e.initialUser,this.serializer)}createPersistence(e){return new Fh(Lh.Yr,this.serializer)}createSharedClientState(e){return new $h}terminate(){return b(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Xh=class t extends nu{constructor(e,n,r){super(),this.Ua=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){yield sm(t.prototype,this,"initialize").call(this,e),yield this.Ua.initialize(this,e),yield zw(this.Ua.syncEngine),yield Xa(this.Ua.remoteStore),yield this.persistence.pi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return wO(this.persistence,new Vh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new mv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new A_(n,this.persistence);return new P_(e.asyncQueue,r)}createPersistence(e){let n=Aw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Sv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,TO(),uh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $h}},ew=class t extends Xh{constructor(e,n){super(e,n,!1),this.Ua=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return b(this,null,function*(){yield sm(t.prototype,this,"initialize").call(this,e);let n=this.Ua.syncEngine;this.sharedClientState instanceof Ll&&(this.sharedClientState.syncEngine={eo:M5.bind(null,n),no:O5.bind(null,n),ro:S5.bind(null,n),qi:D5.bind(null,n),Xs:x5.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.pi(r=>b(this,null,function*(){yield T5(this.Ua.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=TO();if(!Ll.D(n))throw new B(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Aw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ll(n,e.asyncQueue,r,e.clientId,e.initialUser)}},ru=class{initialize(e,n){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C5.bind(null,this.syncEngine),yield zv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Gv}()}createDatastore(e){let n=uu(e.databaseInfo.databaseId),r=function(o){return new Lv(o)}(e.databaseInfo);return function(o,s,a,c){return new jv(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new $v(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>aD(this.syncEngine,n,0),function(){return zh.D()?new zh:new Nv}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,d){let h=new Xv(i,o,s,a,c,u);return d&&(h.qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return b(this,null,function*(){var e,n;yield function(i){return b(this,null,function*(){let o=X(i);$("RemoteStore","RemoteStore shutting down."),o.N_.add(5),yield Za(o),o.B_.shutdown(),o.k_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function lD(t,e=10240){let n=0;return{read(){return b(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return b(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ga=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var tw=class{constructor(e,n){this.za=e,this.serializer=n,this.metadata=new Mt,this.buffer=new Uint8Array,this.ja=function(){return new TextDecoder("utf-8")}(),this.Ha().then(r=>{r&&r.aa()?this.metadata.resolve(r._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?._a)}`))},r=>this.metadata.reject(r))}close(){return this.za.cancel()}getMetadata(){return b(this,null,function*(){return this.metadata.promise})}$a(){return b(this,null,function*(){return yield this.getMetadata(),this.Ha()})}Ha(){return b(this,null,function*(){let e=yield this.Ja();if(e===null)return null;let n=this.ja.decode(e),r=Number(n);isNaN(r)&&this.Ya(`length string (${n}) is not valid number`);let i=yield this.Za(r);return new Kv(JSON.parse(i),e.length+r)})}Xa(){return this.buffer.findIndex(e=>e===123)}Ja(){return b(this,null,function*(){for(;this.Xa()<0&&!(yield this.eu()););if(this.buffer.length===0)return null;let e=this.Xa();e<0&&this.Ya("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Za(e){return b(this,null,function*(){for(;this.buffer.length<e;)(yield this.eu())&&this.Ya("Reached the end of bundle when more is expected.");let n=this.ja.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}eu(){return b(this,null,function*(){let e=yield this.za.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var nw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return b(this,null,function*(){let s=X(i),a={documents:o.map(h=>Yl(s.serializer,h))},c=yield s.No("BatchGetDocuments",s.serializer.databaseId,Le.emptyPath(),a,o.length),u=new Map;c.forEach(h=>{let m=FB(s.serializer,h);u.set(m.key.toString(),m)});let d=[];return o.forEach(h=>{let m=u.get(h.toString());ce(!!m),d.push(m)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ro(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=J.fromPath(r);this.mutations.push(new ql(i,this.precondition(i)))}),yield function(r,i){return b(this,null,function*(){let o=X(r),s={writes:i.map(a=>Ql(o.serializer,a))};yield o.Fo("Commit",o.serializer.databaseId,Le.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw re();n=fe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new B(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(fe.min())?yt.exists(!1):yt.updateTime(n):yt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(fe.min()))throw new B(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yt.updateTime(n)}return yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var rw=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.tu=r.maxAttempts,this.e_=new eu(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){this.e_.Wo(()=>b(this,null,function*(){let e=new nw(this.datastore),n=this.iu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.su(i)}))}).catch(r=>{this.su(r)})}))}iu(e){try{let n=this.updateFunction(e);return!su(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ru(),Promise.resolve()))):this.deferred.reject(e)}ou(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!XD(n)}return!1}};var iw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=hh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>b(this,null,function*(){$("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ec(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function dh(t,e){return b(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield bO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function ow(t,e){return b(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield qw(t);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iD(e.remoteStore,i)),t._onlineComponents=e})}function VO(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function qw(t){return b(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield dh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!VO(n))throw n;Fn("Error using user provided cache. Falling back to memory cache: "+n),yield dh(t,new nu)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield dh(t,new nu);return t._offlineComponents})}function dp(t){return b(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield ow(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield ow(t,new ru))),t._onlineComponents})}function UO(t){return qw(t).then(e=>e.persistence)}function Hw(t){return qw(t).then(e=>e.localStore)}function jO(t){return dp(t).then(e=>e.remoteStore)}function Gw(t){return dp(t).then(e=>e.syncEngine)}function A5(t){return dp(t).then(e=>e.datastore)}function Wa(t){return b(this,null,function*(){let e=yield dp(t),n=e.eventManager;return n.onListen=f5.bind(null,e.syncEngine),n.onUnlisten=p5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=h5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=m5.bind(null,e.syncEngine),n})}function k5(t){return t.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield UO(t),n=yield jO(t);return e.setNetworkEnabled(!0),function(i){let o=X(i);return o.N_.delete(0),du(o)}(n)}))}function R5(t){return t.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield UO(t),n=yield jO(t);return e.setNetworkEnabled(!1),function(i){return b(this,null,function*(){let o=X(i);o.N_.add(0),yield Za(o),o.k_.set("Offline")})}(n)}))}function N5(t,e){let n=new Mt;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,o,s){return b(this,null,function*(){try{let a=yield function(u,d){let h=X(u);return h.persistence.runTransaction("read document","readonly",m=>h.localDocuments.getDocument(m,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new B(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ec(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Hw(t),e,n)})),n.promise}function BO(t,e,n={}){let r=new Mt;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,s,a,c,u){let d=new Ga({next:m=>{s.enqueueAndForget(()=>Lw(o,h));let y=m.docs.has(a);!y&&m.fromCache?u.reject(new B(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new B(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new tu(Qa(a.path),d,{includeMetadataChanges:!0,oa:!0});return Fw(o,h)}(yield Wa(t),t.asyncQueue,e,n,r)})),r.promise}function F5(t,e){let n=new Mt;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,o,s){return b(this,null,function*(){try{let a=yield Uh(i,o,!0),c=new Zh(o,a.Is),u=c.Va(a.documents),d=c.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let c=ec(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Hw(t),e,n)})),n.promise}function $O(t,e,n={}){let r=new Mt;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,s,a,c,u){let d=new Ga({next:m=>{s.enqueueAndForget(()=>Lw(o,h)),m.fromCache&&c.source==="server"?u.reject(new B(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new tu(a,d,{includeMetadataChanges:!0,oa:!0});return Fw(o,h)}(yield Wa(t),t.asyncQueue,e,n,r)})),r.promise}function L5(t,e){let n=new Ga(e);return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,o){X(i).J_.add(o),o.next()}(yield Wa(t),n)})),()=>{n.Ga(),t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,o){X(i).J_.delete(o)}(yield Wa(t),n)}))}}function V5(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?eO().encode(s):s,function(d,h){return new tw(d,h)}(function(d,h){if(d instanceof Uint8Array)return lD(d,h);if(d instanceof ArrayBuffer)return lD(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,uu(e));t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){P5(yield Gw(t),i,r)}))}function U5(t,e){return t.asyncQueue.enqueue(()=>b(this,null,function*(){return function(r,i){let o=X(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Wr.getNamedQuery(s,i))}(yield Hw(t),e)}))}function zO(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var uD=new Map;function Ww(t,e,n){if(!n)throw new B(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Kw(t,e,n,r){if(e===!0&&r===!0)throw new B(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dD(t){if(!J.isDocumentKey(t))throw new B(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fD(t){if(J.isDocumentKey(t))throw new B(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ve(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=fp(t);throw new B(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qO(t,e){if(e<=0)throw new B(N.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Jh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ss=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b_;switch(r.type){case"firstParty":return new x_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=uD.get(n);r&&($("ComponentProvider","Removing Datastore"),uD.delete(n),r.terminate())}(this),Promise.resolve()}};function HO(t,e,n,r={}){var i;let o=(t=Ve(t,ss))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Fn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=xt.MOCK_USER;else{a=ju(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new B(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new xt(u)}t._authCredentials=new C_(new fh(a,c))}}var Ut=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},nt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Sr=class t extends Ut{constructor(e,n,r){super(e,n,Qa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new J(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Yw(t,e,...n){if(t=Be(t),Ww("collection","path",e),t instanceof ss){let r=Le.fromString(e,...n);return fD(r),new Sr(t,null,r)}{if(!(t instanceof nt||t instanceof Sr))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Le.fromString(e,...n));return fD(r),new Sr(t.firestore,null,r)}}function GO(t,e){if(t=Ve(t,ss),Ww("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ut(t,null,function(r){return new sr(Le.emptyPath(),r)}(e))}function fu(t,e,...n){if(t=Be(t),arguments.length===1&&(e=hh.newId()),Ww("doc","path",e),t instanceof ss){let r=Le.fromString(e,...n);return dD(r),new nt(t,null,new J(r))}{if(!(t instanceof nt||t instanceof Sr))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Le.fromString(e,...n));return dD(r),new nt(t.firestore,t instanceof Sr?t.converter:null,new J(r))}}function Qw(t,e){return t=Be(t),e=Be(e),(t instanceof nt||t instanceof Sr)&&(e instanceof nt||e instanceof Sr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Zw(t,e){return t=Be(t),e=Be(e),t instanceof Ut&&e instanceof Ut&&t.firestore===e.firestore&&cu(t._query,e._query)&&t.converter===e.converter}var sw=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new eu(this,"async_queue_retry"),this.Tu=()=>{let n=uh();n&&$("AsyncQueue","Visibility state changed to "+n.visibilityState),this.e_.zo()};let e=uh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;let n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});let n=new Mt;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){return b(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!so(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(e){let n=this._u.then(()=>(this.hu=!0,e().catch(r=>{this.lu=r,this.hu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw _t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.hu=!1,r))));return this._u=n,n}enqueueAfterDelay(e,n,r){this.Eu(),this.Iu.indexOf(e)>-1&&(n=0);let i=qv.createAndSchedule(this,e,n,r,o=>this.Ru(o));return this.cu.push(i),i}Eu(){this.lu&&re()}verifyOperationInProgress(){}Vu(){return b(this,null,function*(){let e;do e=this._u,yield e;while(e!==this._u)})}mu(e){for(let n of this.cu)if(n.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.cu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){let n=this.cu.indexOf(e);this.cu.splice(n,1)}};function aw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var cw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var WO=-1,ct=class extends ss{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new sw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||KO(this),this._firestoreClient.terminate()}};function Pt(t){return t._firestoreClient||KO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function KO(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,d){return new k_(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,zO(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new iw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function YO(t,e){iS(t=Ve(t,ct));let n=Pt(t);if(n._uninitializedComponentsProvider)throw new B(N.FAILED_PRECONDITION,"SDK cache is already specified.");Fn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new ru;return ZO(n,i,new Xh(i,r.cacheSizeBytes,e?.forceOwnership))}function QO(t){iS(t=Ve(t,ct));let e=Pt(t);if(e._uninitializedComponentsProvider)throw new B(N.FAILED_PRECONDITION,"SDK cache is already specified.");Fn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new ru;return ZO(e,r,new ew(r,n.cacheSizeBytes))}function ZO(t,e,n){let r=new Mt;return t.asyncQueue.enqueue(()=>b(this,null,function*(){try{yield dh(t,n),yield ow(t,e),r.resolve()}catch(i){let o=i;if(!VO(o))throw o;Fn("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function XO(t){if(t._initialized&&!t._terminated)throw new B(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Mt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{yield function(r){return b(this,null,function*(){if(!Qi.D())return Promise.resolve();let i=r+"main";yield Qi.delete(i)})}(Aw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function JO(t){return function(n){let r=new Mt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return w5(yield Gw(n),r)})),r.promise}(Pt(t=Ve(t,ct)))}function eS(t){return k5(Pt(t=Ve(t,ct)))}function tS(t){return R5(Pt(t=Ve(t,ct)))}function nS(t,e){let n=Pt(t=Ve(t,ct)),r=new cw;return V5(n,t._databaseId,e,r),r}function rS(t,e){return U5(Pt(t=Ve(t,ct)),e).then(n=>n?new Ut(t,null,n.query):null)}function iS(t){if(t._initialized||t._terminated)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Rr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(bt.fromBase64String(e))}catch(n){throw new B(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var cr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var si=class{constructor(e){this._methodName=e}};var as=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}};var j5=/^__.*__$/,lw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new no(e,this.data,n,this.fieldTransforms)}},ep=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function oS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var tp=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.wu({path:r,bu:!1});return i.Du(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.wu({path:r,bu:!1});return i.pu(),i}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return np(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if(oS(this.yu)&&j5.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}},uw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uu(e)}Ou(e,n,r,i=!1){return new tp({yu:e,methodName:n,xu:r,path:vt.emptyPath(),bu:!1,Mu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ds(t){let e=t._freezeSettings(),n=uu(t._databaseId);return new uw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hp(t,e,n,r,i,o={}){let s=t.Ou(o.merge||o.mergeFields?2:0,e,n,i);eb("Data must be an object, but it was:",s,r);let a=cS(r,s),c,u;if(o.merge)c=new Tn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let h of o.mergeFields){let m=mw(e,h,n);if(!s.contains(m))throw new B(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);uS(d,m)||d.push(m)}c=new Tn(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new lw(new Zt(a),c,u)}var iu=class t extends si{_toFieldTransform(e){if(e.yu!==2)throw e.yu===1?e.Fu(`${this._methodName}() can only appear at the top level of your update data`):e.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function sS(t,e,n){return new tp({yu:3,xu:e.settings.xu,methodName:t._methodName,bu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var dw=class t extends si{_toFieldTransform(e){return new rs(e.path,new eo)}isEqual(e){return e instanceof t}},fw=class t extends si{constructor(e,n){super(e),this.Nu=n}_toFieldTransform(e){let n=sS(this,e,!0),r=this.Nu.map(o=>fs(o,n)),i=new ii(r);return new rs(e.path,i)}isEqual(e){return e instanceof t&&lm(this.Nu,e.Nu)}},hw=class t extends si{constructor(e,n){super(e),this.Nu=n}_toFieldTransform(e){let n=sS(this,e,!0),r=this.Nu.map(o=>fs(o,n)),i=new oi(r);return new rs(e.path,i)}isEqual(e){return e instanceof t&&lm(this.Nu,e.Nu)}},pw=class t extends si{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=new to(e.serializer,HD(e.serializer,this.Lu));return new rs(e.path,n)}isEqual(e){return e instanceof t&&this.Lu===e.Lu}};function Xw(t,e,n,r){let i=t.Ou(1,e,n);eb("Data must be an object, but it was:",i,r);let o=[],s=Zt.empty();us(r,(c,u)=>{let d=tb(e,c,n);u=Be(u);let h=i.Cu(d);if(u instanceof iu)o.push(d);else{let m=fs(u,h);m!=null&&(o.push(d),s.set(d,m))}});let a=new Tn(o);return new ep(s,a,i.fieldTransforms)}function Jw(t,e,n,r,i,o){let s=t.Ou(1,e,n),a=[mw(e,r,n)],c=[i];if(o.length%2!=0)throw new B(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(mw(e,o[m])),c.push(o[m+1]);let u=[],d=Zt.empty();for(let m=a.length-1;m>=0;--m)if(!uS(u,a[m])){let y=a[m],M=c[m];M=Be(M);let A=s.Cu(y);if(M instanceof iu)u.push(y);else{let P=fs(M,A);P!=null&&(u.push(y),d.set(y,P))}}let h=new Tn(u);return new ep(d,h,s.fieldTransforms)}function aS(t,e,n,r=!1){return fs(n,t.Ou(r?4:3,e))}function fs(t,e){if(lS(t=Be(t)))return eb("Unsupported field value:",e,t),cS(t,e);if(t instanceof si)return function(r,i){if(!oS(i.yu))throw i.Fu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Fu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=fs(a,i.vu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ut.fromDate(r);return{timestampValue:Va(i.serializer,o)}}if(r instanceof ut){let o=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Va(i.serializer,o)}}if(r instanceof as)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rr)return{bytesValue:tO(i.serializer,r._byteString)};if(r instanceof nt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Fu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ow(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Fu(`Unsupported field value: ${fp(r)}`)}(t,e)}function cS(t,e){let n={};return TD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(t,(r,i)=>{let o=fs(i,e.Su(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function lS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof as||t instanceof Rr||t instanceof nt||t instanceof si)}function eb(t,e,n){if(!lS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=fp(n);throw r==="an object"?e.Fu(t+" a custom object"):e.Fu(t+" "+r)}}function mw(t,e,n){if((e=Be(e))instanceof cr)return e._internalPath;if(typeof e=="string")return tb(t,e);throw np("Field path arguments must be of type string or ",t,!1,void 0,n)}var B5=new RegExp("[~\\*/\\[\\]]");function tb(t,e,n){if(e.search(B5)>=0)throw np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cr(...e.split("."))._internalPath}catch{throw np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function np(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new B(N.INVALID_ARGUMENT,a+t+c)}function uS(t,e){return t.some(n=>n.isEqual(e))}var cs=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(pp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},gw=class extends cs{data(){return super.data()}};function pp(t,e){return typeof e=="string"?tb(t,e):e instanceof cr?e._internalPath:e._delegate._internalPath}function dS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ou=class{},ls=class extends ou{};function li(t,e,...n){let r=[];e instanceof ou&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof yw).length,a=o.filter(c=>c instanceof rp).length;if(s>1||s>0&&a>0)throw new B(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var rp=class t extends ls{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return bS(e._query,n),new Ut(e.firestore,e.converter,G_(e._query,n))}_parse(e){let n=ds(e.firestore);return function(o,s,a,c,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){pD(h,d);let y=[];for(let M of h)y.push(hD(c,o,M));m={arrayValue:{values:y}}}else m=hD(c,o,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||pD(h,d),m=aS(a,s,h,d==="in"||d==="not-in");return Se.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function fS(t,e,n){let r=e,i=pp("where",t);return rp._create(i,r,n)}var yw=class t extends ou{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ge.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)bS(s,c),s=G_(s,c)}(e._query,n),new Ut(e.firestore,e.converter,G_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _w=class t extends ls{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new B(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ts(o,s)}(e._query,this._field,this._direction);return new Ut(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new sr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function hS(t,e="asc"){let n=e,r=pp("orderBy",t);return _w._create(r,n)}var ip=class t extends ls{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ut(e.firestore,e.converter,Ih(e._query,this._limit,this._limitType))}};function pS(t){return qO("limit",t),ip._create("limit",t,"F")}function mS(t){return qO("limitToLast",t),ip._create("limitToLast",t,"L")}var op=class t extends ls{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=wS(e,this.type,this._docOrFields,this._inclusive);return new Ut(e.firestore,e.converter,function(i,o){return new sr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function gS(...t){return op._create("startAt",t,!0)}function yS(...t){return op._create("startAfter",t,!1)}var sp=class t extends ls{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=wS(e,this.type,this._docOrFields,this._inclusive);return new Ut(e.firestore,e.converter,function(i,o){return new sr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function _S(...t){return sp._create("endBefore",t,!1)}function vS(...t){return sp._create("endAt",t,!0)}function wS(t,e,n,r){if(n[0]=Be(n[0]),n[0]instanceof cs)return function(o,s,a,c,u){if(!c)throw new B(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of Sa(o))if(h.field.isKeyField())d.push(es(s,c.key));else{let m=c.data.field(h.field);if(cp(m))throw new B(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=h.field.canonicalString();throw new B(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new Ar(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=ds(t.firestore);return function(s,a,c,u,d,h){let m=s.explicitOrderBy;if(d.length>m.length)throw new B(N.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let M=0;M<d.length;M++){let A=d[M];if(m[M].field.isKeyField()){if(typeof A!="string")throw new B(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof A}`);if(!Tw(s)&&A.indexOf("/")!==-1)throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${A}' contains a slash.`);let P=s.path.child(Le.fromString(A));if(!J.isDocumentKey(P))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);let z=new J(P);y.push(es(a,z))}else{let P=aS(c,u,A);y.push(P)}}return new Ar(y,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function hD(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new B(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tw(e)&&n.indexOf("/")!==-1)throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Le.fromString(n));if(!J.isDocumentKey(r))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return es(t,new J(r))}if(n instanceof nt)return es(t,n._key);throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fp(n)}.`)}function pD(t,e){if(!Array.isArray(t)||t.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bS(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ka=class{convertValue(e,n="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return us(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new as(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=xw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){let n=ri(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Le.fromString(e);ce(fO(r));let i=new Xi(r.get(1),r.get(3)),o=new J(r.popFirst(5));return i.isEqual(n)||_t(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function mp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var vw=class extends Ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}};var ni=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vn=class extends cs{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ki(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ki=class extends Vn{data(e={}){return super.data(e)}},lr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ni(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ki(this._firestore,this._userDataWriter,r.key,r,new ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ki(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ni(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ki(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ni(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:$5(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function $5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}function nb(t,e){return t instanceof Vn&&e instanceof Vn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof lr&&e instanceof lr&&t._firestore===e._firestore&&Zw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function CS(t){t=Ve(t,nt);let e=Ve(t.firestore,ct);return BO(Pt(e),t._key).then(n=>sb(e,t,n))}var ai=class extends Ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}};function IS(t){t=Ve(t,nt);let e=Ve(t.firestore,ct),n=Pt(e),r=new ai(e);return N5(n,t._key).then(i=>new Vn(e,r,t._key,i,new ni(i!==null&&i.hasLocalMutations,!0),t.converter))}function ES(t){t=Ve(t,nt);let e=Ve(t.firestore,ct);return BO(Pt(e),t._key,{source:"server"}).then(n=>sb(e,t,n))}function xS(t){t=Ve(t,Ut);let e=Ve(t.firestore,ct),n=Pt(e),r=new ai(e);return dS(t._query),$O(n,t._query).then(i=>new lr(e,r,t,i))}function MS(t){t=Ve(t,Ut);let e=Ve(t.firestore,ct),n=Pt(e),r=new ai(e);return F5(n,t._query).then(i=>new lr(e,r,t,i))}function TS(t){t=Ve(t,Ut);let e=Ve(t.firestore,ct),n=Pt(e),r=new ai(e);return $O(n,t._query,{source:"server"}).then(i=>new lr(e,r,t,i))}function rb(t,e,n){t=Ve(t,nt);let r=Ve(t.firestore,ct),i=mp(t.converter,e,n);return tc(r,[hp(ds(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yt.none())])}function ib(t,e,n,...r){t=Ve(t,nt);let i=Ve(t.firestore,ct),o=ds(i),s;return s=typeof(e=Be(e))=="string"||e instanceof cr?Jw(o,"updateDoc",t._key,e,n,r):Xw(o,"updateDoc",t._key,e),tc(i,[s.toMutation(t._key,yt.exists(!0))])}function DS(t){return tc(Ve(t.firestore,ct),[new ro(t._key,yt.none())])}function OS(t,e){let n=Ve(t.firestore,ct),r=fu(t),i=mp(t.converter,e);return tc(n,[hp(ds(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,yt.exists(!1))]).then(()=>r)}function ob(t,...e){var n,r,i;t=Be(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||aw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(aw(e[s])){let h=e[s];e[s]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,d;if(t instanceof nt)u=Ve(t.firestore,ct),d=Qa(t._key.path),c={next:h=>{e[s]&&e[s](sb(u,t,h))},error:e[s+1],complete:e[s+2]};else{let h=Ve(t,Ut);u=Ve(h.firestore,ct),d=h._query;let m=new ai(u);c={next:y=>{e[s]&&e[s](new lr(u,m,h,y))},error:e[s+1],complete:e[s+2]},dS(t._query)}return function(m,y,M,A){let P=new Ga(A),z=new tu(y,P,M);return m.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return Fw(yield Wa(m),z)})),()=>{P.Ga(),m.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return Lw(yield Wa(m),z)}))}}(Pt(u),d,a,c)}function SS(t,e){return L5(Pt(t=Ve(t,ct)),aw(e)?e:{next:e})}function tc(t,e){return function(r,i){let o=new Mt;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return g5(yield Gw(r),i,o)})),o.promise}(Pt(t),e)}function sb(t,e,n){let r=n.docs.get(e._key),i=new ai(t);return new Vn(t,i,e._key,r,new ni(n.hasPendingWrites,n.fromCache),e.converter)}var z5={maxAttempts:5};var ap=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ds(e)}set(e,n,r){this._verifyNotCommitted();let i=Gi(e,this._firestore),o=mp(i.converter,n,r),s=hp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,yt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Gi(e,this._firestore),s;return s=typeof(n=Be(n))=="string"||n instanceof cr?Jw(this._dataReader,"WriteBatch.update",o._key,n,r,i):Xw(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,yt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Gi(e,this._firestore);return this._mutations=this._mutations.concat(new ro(n._key,yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Gi(t,e){if((t=Be(t)).firestore!==e)throw new B(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ww=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ds(n)}get(n){let r=Gi(n,this._firestore),i=new vw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return re();let s=o[0];if(s.isFoundDocument())return new cs(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new cs(this._firestore,i,r._key,null,r.converter);throw re()})}set(n,r,i){let o=Gi(n,this._firestore),s=mp(o.converter,r,i),a=hp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Gi(n,this._firestore),a;return a=typeof(r=Be(r))=="string"||r instanceof cr?Jw(this._dataReader,"Transaction.update",s._key,r,i,o):Xw(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Gi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Gi(e,this._firestore),r=new ai(this._firestore);return super.get(e).then(i=>new Vn(this._firestore,r,n._key,i._document,new ni(!1,!1),n.converter))}};function PS(t,e,n){t=Ve(t,ct);let r=Object.assign(Object.assign({},z5),n);return function(o){if(o.maxAttempts<1)throw new B(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Mt;return o.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){let u=yield A5(o);new rw(o.asyncQueue,u,a,s,c).nu()})),c.promise}(Pt(t),i=>e(new ww(t,i)),r)}function AS(){return new iu("deleteField")}function kS(){return new dw("serverTimestamp")}function RS(...t){return new fw("arrayUnion",t)}function NS(...t){return new hw("arrayRemove",t)}function FS(t){return new pw("increment",t)}(function(e,n=!0){(function(i){Ya=i})(qu),po(new jn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ct(new I_(r.getProvider("auth-internal")),new T_(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new B(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Bn(p1,"4.6.5",e),Bn(p1,"4.6.5","esm2017")})();var q5="@firebase/firestore-compat",H5="0.3.34";function fb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function LS(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function VS(){if(!DD())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}var gp=class t{constructor(e){this._delegate=e}static fromBase64String(e){return VS(),new t(Rr.fromBase64String(e))}static fromUint8Array(e){return LS(),new t(Rr.fromUint8Array(e))}toBase64(){return VS(),this._delegate.toBase64()}toUint8Array(){return LS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function ab(t){return G5(t,["next","error","complete"])}function G5(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var cb=class{enableIndexedDbPersistence(e,n){return YO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return QO(e._delegate)}clearIndexedDbPersistence(e){return XO(e._delegate)}},yp=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Fn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){HO(this._delegate,e,n,r)}enableNetwork(){return eS(this._delegate)}disableNetwork(){return tS(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Kw("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return JO(this._delegate)}onSnapshotsInSync(e){return SS(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ic(this,Yw(this._delegate,e))}catch(n){throw ln(n,"collection()","Firestore.collection()")}}doc(e){try{return new Nr(this,fu(this._delegate,e))}catch(n){throw ln(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,GO(this._delegate,e))}catch(n){throw ln(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return PS(this._delegate,n=>e(new _p(this,n)))}batch(){return Pt(this._delegate),new vp(new ap(this._delegate,e=>tc(this._delegate,e)))}loadBundle(e){return nS(this._delegate,e)}namedQuery(e){return rS(this._delegate,e).then(n=>n?new gs(this,n):null)}},nc=class extends Ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new gp(new Rr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Nr.forKey(n,this.firestore,null)}};function W5(t){mD(t)}var _p=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new nc(e)}get(e){let n=hs(e);return this._delegate.get(n).then(r=>new ps(this._firestore,new Vn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=hs(e);return r?(fb("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=hs(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=hs(e);return this._delegate.delete(n),this}},vp=class{constructor(e){this._delegate=e}set(e,n,r){let i=hs(e);return r?(fb("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=hs(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=hs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},rc=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Ki(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ms(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new nc(e),n),i.set(n,o)),o}};rc.INSTANCES=new WeakMap;var Nr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new nc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new nt(n._delegate,r,new J(e)))}static forKey(e,n,r){return new t(n,new nt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ic(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ic(this.firestore,Yw(this._delegate,e))}catch(n){throw ln(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Be(e),e instanceof nt?Qw(this._delegate,e):!1}set(e,n){n=fb("DocumentReference.set",n);try{return n?rb(this._delegate,e,n):rb(this._delegate,e)}catch(r){throw ln(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?ib(this._delegate,e):ib(this._delegate,e,n,...r)}catch(i){throw ln(i,"updateDoc()","DocumentReference.update()")}}delete(){return DS(this._delegate)}onSnapshot(...e){let n=US(e),r=jS(e,i=>new ps(this.firestore,new Vn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ob(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=IS(this._delegate):e?.source==="server"?n=ES(this._delegate):n=CS(this._delegate),n.then(r=>new ps(this.firestore,new Vn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(rc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ln(t,e,n){return t.message=t.message.replace(e,n),t}function US(t){for(let e of t)if(typeof e=="object"&&!ab(e))return e;return{}}function jS(t,e){var n,r;let i;return ab(t[0])?i=t[0]:ab(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ps=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Nr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return nb(this._delegate,e._delegate)}},ms=class extends ps{data(e){let n=this._delegate.data(e);return this._delegate._converter||gD(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},gs=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new nc(e)}where(e,n,r){try{return new t(this.firestore,li(this._delegate,fS(e,n,r)))}catch(i){throw ln(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,li(this._delegate,hS(e,n)))}catch(r){throw ln(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,li(this._delegate,pS(e)))}catch(n){throw ln(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,li(this._delegate,mS(e)))}catch(n){throw ln(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,li(this._delegate,gS(...e)))}catch(n){throw ln(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,li(this._delegate,yS(...e)))}catch(n){throw ln(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,li(this._delegate,_S(...e)))}catch(n){throw ln(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,li(this._delegate,vS(...e)))}catch(n){throw ln(n,"endAt()","Query.endAt()")}}isEqual(e){return Zw(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=MS(this._delegate):e?.source==="server"?n=TS(this._delegate):n=xS(this._delegate),n.then(r=>new hu(this.firestore,new lr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=US(e),r=jS(e,i=>new hu(this.firestore,new lr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ob(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(rc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},lb=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ms(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},hu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ms(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new lb(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ms(this._firestore,r))})}isEqual(e){return nb(this._delegate,e._delegate)}},ic=class t extends gs{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Nr(this.firestore,e):null}doc(e){try{return e===void 0?new Nr(this.firestore,fu(this._delegate)):new Nr(this.firestore,fu(this._delegate,e))}catch(n){throw ln(n,"doc()","CollectionReference.doc()")}}add(e){return OS(this._delegate,e).then(n=>new Nr(this.firestore,n))}isEqual(e){return Qw(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(rc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function hs(t){return Ve(t,nt)}var ub=class t{constructor(...e){this._delegate=new cr(...e)}static documentId(){return new t(vt.keyField().canonicalString())}isEqual(e){return e=Be(e),e instanceof cr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var db=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=kS();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=AS();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=RS(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=NS(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=FS(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var K5={Firestore:yp,GeoPoint:as,Timestamp:ut,Blob:gp,Transaction:_p,WriteBatch:vp,DocumentReference:Nr,DocumentSnapshot:ps,Query:gs,QueryDocumentSnapshot:ms,QuerySnapshot:hu,CollectionReference:ic,FieldPath:ub,FieldValue:db,setLogLevel:W5,CACHE_SIZE_UNLIMITED:WO};function Y5(t,e){t.INTERNAL.registerComponent(new jn("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},K5)))}function Q5(t){Y5(t,(e,n)=>new yp(e,n,new cb)),t.registerVersion(q5,H5)}Q5(et);function Z5(t,e=fr){return new _e(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function BS(t,e){return Z5(t,e)}function X5(t,e){return BS(t,e).pipe(Co(void 0),Uc(),oe(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function mb(t,e){return BS(t,e).pipe(oe(n=>({payload:n,type:"query"})))}var wp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=GS(r,n);return new Cp(i,o,this.afs)}snapshotChanges(){return X5(this.ref,this.afs.schedulers.outsideAngular).pipe(Vt)}valueChanges(e={}){return this.snapshotChanges().pipe(oe(({payload:n})=>e.idField?Je(te({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Te(this.ref.get(e)).pipe(Vt)}};function bp(t,e){return mb(t,e).pipe(Co(void 0),Uc(),oe(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(h=>h.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function $S(t,e,n){return bp(t,n).pipe(bo((r,i)=>J5(r,i.map(o=>o.payload),e),[]),Nm(),oe(r=>r.map(i=>({type:i.type,payload:i}))))}function J5(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=e4(t,r))}),t}function hb(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function e4(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return hb(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return hb(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hb(t,e.oldIndex,1);break}return t}function zS(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Cp=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=bp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Co(void 0),Uc(),pt(([r,i])=>i.length>0||!r),oe(([,r])=>r),Vt)}auditTrail(e){return this.stateChanges(e).pipe(bo((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=zS(e);return $S(this.query,n,this.afs.schedulers.outsideAngular).pipe(Vt)}valueChanges(e={}){return mb(this.query,this.afs.schedulers.outsideAngular).pipe(oe(n=>n.payload.docs.map(r=>e.idField?Je(te({},r.data()),{[e.idField]:r.id}):r.data())),Vt)}get(e){return Te(this.query.get(e)).pipe(Vt)}add(e){return this.ref.add(e)}doc(e){return new wp(this.ref.doc(e),this.afs)}},pb=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?bp(this.query,this.afs.schedulers.outsideAngular).pipe(Vt):bp(this.query,this.afs.schedulers.outsideAngular).pipe(oe(n=>n.filter(r=>e.indexOf(r.type)>-1)),pt(n=>n.length>0),Vt)}auditTrail(e){return this.stateChanges(e).pipe(bo((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=zS(e);return $S(this.query,n,this.afs.schedulers.outsideAngular).pipe(Vt)}valueChanges(e={}){return mb(this.query,this.afs.schedulers.outsideAngular).pipe(oe(r=>r.payload.docs.map(i=>e.idField?te({[e.idField]:i.id},i.data()):i.data())),Vt)}get(e){return Te(this.query.get(e)).pipe(Vt)}},qS=new ne("angularfire2.enableFirestorePersistence"),HS=new ne("angularfire2.firestore.persistenceSettings"),t4=new ne("angularfire2.firestore.settings"),n4=new ne("angularfire2.firestore.use-emulator");function GS(t,e=n=>n){return{query:e(t),ref:t}}var ys=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,u,d,h,m,y,M,A,P,z,W){this.schedulers=c;let j=zo(n,a,r),Y=d;h&&c_(j,a,m,M,A,P,y,z),[this.firestore,this.persistenceEnabled$]=ya(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let le=a.runOutsideAngular(()=>j.firestore());if(o&&le.settings(o),Y&&le.useEmulator(...Y),i&&!Uo(s)){let ie=()=>{try{return Te(le.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(x){return typeof console<"u"&&console.warn(x),se(!1)}};return[le,a.runOutsideAngular(ie)]}else return[le,se(!1)]},[o,Y,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=GS(i,r),a=this.schedulers.ngZone.run(()=>o);return new Cp(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new pb(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new wp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(V(ji),V(Bi,8),V(qS,8),V(t4,8),V(Ot),V(De),V(ga),V(HS,8),V(n4,8),V(qo,8),V(n_,8),V(r_,8),V(i_,8),V(o_,8),V(s_,8),V(a_,8),V(Xr,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),WS=(()=>{class t{constructor(){et.registerVersion("angularfire",Jr.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:qS,useValue:!0},{provide:HS,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ke({type:t});static \u0275inj=Ae({providers:[ys]})}return t})();var Fr=(()=>{let e=class e{login(){localStorage.setItem("logged","true")}logout(){localStorage.setItem("logged","false")}isAuthenticated(){return localStorage.getItem("logged")!=null&&localStorage.getItem("logged")=="true"}register(){localStorage.setItem("registered","true")}registerout(){localStorage.setItem("registered","false")}isRegistered(){return localStorage.getItem("registered")!=null&&localStorage.getItem("registered")=="true"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Pe=(()=>{let e=class e{constructor(r,i,o){this.afAuth=r,this.firestore=i,this.login=o}signUpWithEmail(r,i){return b(this,null,function*(){try{let o=yield this.afAuth.createUserWithEmailAndPassword(r,i);o.user&&(yield o.user.sendEmailVerification(),this.login.register())}catch(o){this.handleAuthErrors(o)}})}googleSignUp(){return b(this,null,function*(){try{let r=new et.auth.GoogleAuthProvider,i=yield this.afAuth.signInWithPopup(r);if(!i.additionalUserInfo.isNewUser)throw new Error("Gi\xE0 registrato.");i.user&&this.login.register()}catch(r){this.handleAuthErrors(r)}})}facebookSignUp(){return b(this,null,function*(){try{let r=new et.auth.FacebookAuthProvider,i=yield this.afAuth.signInWithPopup(r);if(!i.additionalUserInfo.isNewUser)throw new Error("Gi\xE0 registrato.");i.user&&(yield i.user.sendEmailVerification(),this.login.register())}catch(r){this.handleAuthErrors(r)}})}githubSignUp(){return b(this,null,function*(){try{let r=new et.auth.GithubAuthProvider,i=yield this.afAuth.signInWithPopup(r);if(!i.additionalUserInfo.isNewUser)throw new Error("Gi\xE0 registrato.");i.user&&this.login.register()}catch(r){this.handleAuthErrors(r)}})}signInWithEmail(r,i){return b(this,null,function*(){try{let o=yield this.afAuth.signInWithEmailAndPassword(r,i);if(!o.user?.emailVerified)throw new Error("Per favore verifica la tua email per accedere.");if((yield K(this.firestore.collection("user").doc(o.user.uid).valueChanges()))?.completed)this.login.login();else throw this.login.register(),new Error("Prima devi completare il profilo.")}catch(o){this.handleAuthErrors(o)}})}googleSignIn(){return b(this,null,function*(){try{let r=new et.auth.GoogleAuthProvider,i=yield this.afAuth.signInWithPopup(r);if(i.user?.emailVerified){if(i.additionalUserInfo.isNewUser)throw yield i.user.delete(),new Error("Prima devi registrarti.")}else throw new Error("Per favore verifica la tua email per accedere.");if((yield K(this.firestore.collection("user").doc(i.user.uid).valueChanges()))?.completed)this.login.login();else throw this.login.register(),new Error("Prima devi completare il profilo.")}catch(r){this.handleAuthErrors(r)}})}facebookSignIn(){return b(this,null,function*(){try{let r=new et.auth.FacebookAuthProvider,i=yield this.afAuth.signInWithPopup(r);if(i.user?.emailVerified){if(i.additionalUserInfo.isNewUser)throw yield i.user.delete(),new Error("Prima devi registrarti.")}else throw new Error("Per favore verifica la tua email per accedere.");if((yield K(this.firestore.collection("user").doc(i.user.uid).valueChanges()))?.completed)this.login.login();else throw this.login.register(),new Error("Prima devi completare il profilo.")}catch(r){this.handleAuthErrors(r)}})}githubSignIn(){return b(this,null,function*(){try{let r=new et.auth.GithubAuthProvider,i=yield this.afAuth.signInWithPopup(r);if(i.additionalUserInfo.isNewUser)throw yield i.user.delete(),new Error("Prima devi registrarti.");if((yield K(this.firestore.collection("user").doc(i.user.uid).valueChanges()))?.completed)this.login.login();else throw this.login.register(),new Error("Prima devi completare il profilo.")}catch(r){this.handleAuthErrors(r)}})}getUser(){return this.afAuth.authState}logout(){return b(this,null,function*(){try{yield this.afAuth.signOut()}catch(r){this.handleAuthErrors(r)}})}reset(r){return b(this,null,function*(){try{yield this.afAuth.sendPasswordResetEmail(r)}catch(i){this.handleAuthErrors(i)}})}handleAuthErrors(r){switch(r.code){case"auth/argument-error":r.message="Errore nelle informazioni date.";break;case"auth/credential-already-in-use":r.message="Credenziali gi\xE0 in uso.";break;case"auth/email-already-in-use":r.message="Email gi\xE0 in uso.";break;case"auth/internal-error":r.message="Errore interno al sistema.";break;case"auth/weak-password":r.message="Password troppo debole.";break;case"auth/too-many-requests":r.message="Troppi tentativi; riprova pi\xF9 tardi.";break;case"auth/provider-already-linked":r.message="Gi\xE0 registrato.";break;case"auth/invalid-email":r.message="Email non valida.";break;case"auth/invalid-app-id":r.message="App id non valido.";break;case"auth/invalid-user-token":r.message="User invalido.";break;case"auth/missing-verification-id":r.message="Verifica ancora non completata.";break;case"auth/unverified-email":r.message="Verifica via email ancora non completata.";break;case"auth/invalid-credential":r.message="Credenziali invalide.";break;case"auth/cancelled-popup-request":r.message="Annullata l'operazione.";break;case"auth/popup-closed-by-user":r.message="Annullata l'operazione.";break;case"auth/missing-email":r.message="Devi inserire un email nel campo email.";break;case"auth/account-exists-with-different-credential":r.message="L'account gi\xE0 esiste ma con delle credenziali o provider differente";break;case"auth/network-request-failed":r.message="Sei offline, ricarica la pagina";break}throw new Error(r.message)}};e.\u0275fac=function(i){return new(i||e)(V(qo),V(ys),V(Fr))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var KS=(()=>{let e=class e{constructor(r,i,o){this.authService=r,this.router=i,this.login=o,this.imageurl="assets/school.png",this.message="Errore inaspettato",this.autenticazione=r}ngOnInit(){history.state.complete!=null&&this.correct("Adesso puoi accedere.")}loginWithEmail(){return b(this,null,function*(){let r=document.getElementById("form").childNodes,i=r[0].value,o=r[1].value;if(i&&o)try{yield this.autenticazione.signInWithEmail(i,o),yield this.router.navigateByUrl("userswiper")}catch(s){s.message!=="Prima devi completare il profilo."?this.error(s.message):this.errorcmpt()}else this.error("Qualche campo \xE8 vuoto.")})}loginWithGoogle(){return b(this,null,function*(){try{yield this.autenticazione.googleSignIn(),yield this.router.navigateByUrl("userswiper")}catch(r){r.message!=="Prima devi completare il profilo."?this.error(r.message):this.errorcmpt()}})}loginWithFacebook(){return b(this,null,function*(){try{yield this.autenticazione.facebookSignIn(),yield this.router.navigateByUrl("userswiper")}catch(r){r.message!=="Prima devi completare il profilo."?this.error(r.message):this.errorcmpt()}})}loginWithGitHub(){return b(this,null,function*(){try{yield this.autenticazione.githubSignIn(),yield this.router.navigateByUrl("userswiper")}catch(r){r.message!=="Prima devi completare il profilo."?this.error(r.message):this.errorcmpt()}})}correct(r){let i=document.getElementById("correct");i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400)}error(r){localStorage.removeItem("age"),localStorage.removeItem("location"),localStorage.removeItem("time");let i=document.getElementById("error");i!=null&&(i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400))}errorcmpt(){this.router.navigate(["access/register/complete-profile"],{state:{redirect:window.location.pathname}})}resetPassword(){return b(this,null,function*(){try{let i=document.getElementById("form").childNodes[0].value;yield this.autenticazione.reset(i);let o=document.getElementById("correct-reset");o.style.display="flex",setTimeout(()=>{o.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{o.classList.remove("fade-out-bubble"),o.style.display="none"},2400)}catch(r){this.error(r.message)}})}};e.\u0275fac=function(i){return new(i||e)(q(Pe),q(ve),q(Fr))},e.\u0275cmp=pe({type:e,selectors:[["app-login"]],decls:41,vars:3,consts:[["id","correct",1,"correct-float","fade-in-bubble"],["id","correct-reset",1,"correct-float","fade-in-bubble"],[1,"left-box","fade-in"],["id","error",1,"error-float","fade-in-bubble"],[1,"title"],[3,"src"],["id","form"],["type","text","placeholder","Inserisci email..."],["type","text","placeholder","Inserisci password..."],["type","button",1,"larger-button",3,"click"],[1,"buttons"],["type","button",3,"click"],[1,"bi","bi-google"],[1,"bi","bi-facebook"],[1,"bi","bi-github"],[1,"small-text","password-reset",3,"click"],["routerLink","../register",1,"small-text","missing-account"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"h6"),E(2,"Completata registrazione"),_(),v(3,"p"),E(4),_()(),v(5,"div",1)(6,"h6"),E(7,"Reset password"),_(),v(8,"p"),E(9,"Vai alla tua email per resettare la password."),_()(),v(10,"div",2)(11,"div")(12,"div",3)(13,"h6"),E(14,"Errore"),_(),v(15,"p"),E(16),_()(),v(17,"div",4),U(18,"img",5),v(19,"h1"),E(20,"StudyMatch"),_()(),v(21,"h2"),E(22,"Accedi"),_(),v(23,"p"),E(24,"Effettua l'accesso"),_(),v(25,"form",6),U(26,"input",7)(27,"input",8),v(28,"button",9),Q("click",function(){return o.loginWithEmail()}),E(29,"Accedi"),_()(),v(30,"div",10)(31,"button",11),Q("click",function(){return o.loginWithGoogle()}),U(32,"i",12),_(),v(33,"button",11),Q("click",function(){return o.loginWithFacebook()}),U(34,"i",13),_(),v(35,"button",11),Q("click",function(){return o.loginWithGitHub()}),U(36,"i",14),_()(),v(37,"a",15),Q("click",function(){return o.resetPassword()}),E(38,"Dimenticato la password?"),_(),v(39,"a",16),E(40,"Non hai ancora un account?"),_()()()),i&2&&(D(4),he(o.message),D(12),he(o.message),D(2),L("src",o.imageurl,Me))},dependencies:[ma],styles:['@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.left-box[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center}.left-box[_ngcontent-%COMP%]{position:absolute;left:3vh;top:50%;transform:translateY(-50%);height:100vh;width:30%;margin:auto;border-radius:19px;flex-direction:column}.title[_ngcontent-%COMP%]{flex-direction:row;width:100%}form[_ngcontent-%COMP%]{width:100%;overflow-y:auto;overflow-x:hidden;margin:auto}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin:0}h1[_ngcontent-%COMP%]{width:fit-content;font-size:3rem;font-weight:750}h2[_ngcontent-%COMP%]{font-weight:450}p[_ngcontent-%COMP%]{margin:.9vh 0 1.5vh;font-size:1rem;font-weight:400}.small-text[_ngcontent-%COMP%]{font-size:.8rem}.password-reset[_ngcontent-%COMP%]{position:relative;bottom:-1.5rem;cursor:pointer}input[type=text][_ngcontent-%COMP%]{height:35px;width:70%;margin:.3rem;padding-left:.7rem;border-radius:8px;border:solid 1px #d9d9d9;transition:.1s;font-size:.8rem;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}input[type=text][_ngcontent-%COMP%]:focus{outline:solid 1px #007aff;transform:scale(1.02);transition:.1s}button[_ngcontent-%COMP%]:hover, input[type=checkbox][_ngcontent-%COMP%]:hover{cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border-radius:19px;border:0;width:14%;height:55px;margin:.6rem;transition:.1s}.larger-button[_ngcontent-%COMP%]{width:73%;height:42px;border-radius:40px;margin-top:1.2rem;font-size:.85rem}button[_ngcontent-%COMP%]:hover{background-color:#0664c9;transition:.1s}.checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.6rem}i[_ngcontent-%COMP%]{font-size:1rem;margin:0}img[_ngcontent-%COMP%]{width:6rem;height:auto;margin-right:.3rem}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{font-weight:400;color:#3d3d3d;font-size:.7rem}a[_ngcontent-%COMP%]:hover{color:#007aff}.middle-text[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center;text-align:center;color:#a1a1a1;margin:1rem auto}.middle-text[_ngcontent-%COMP%]:after, .middle-text[_ngcontent-%COMP%]:before{content:"";flex:1;border-bottom:1px solid #a1a1a1}.middle-text[_ngcontent-%COMP%]:not(:empty):before{margin-right:.25em}.middle-text[_ngcontent-%COMP%]:not(:empty):after{margin-left:.25em}.already-account[_ngcontent-%COMP%], .missing-account[_ngcontent-%COMP%]{display:none;margin-top:3rem;text-decoration:none}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;z-index:100;transform:translate(-50%);border-radius:10px;width:14rem;height:4rem;background-color:#fa7979ed;box-shadow:1px 10px 10px #c43b3b3f;justify-content:center;align-items:center;flex-direction:column;padding:.5rem}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;margin:0}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-size:.8rem;font-weight:400;margin:0}.correct-float[_ngcontent-%COMP%]{width:20rem;background-color:#008d0ced;box-shadow:1px 10px 10px #00000023}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInFifty ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInFifty ease-in .5s;-moz-animation:fadeInFifty ease-in .5s;-o-animation:fadeInFifty ease-in .5s;-ms-animation:fadeInFifty ease-in .5s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}@media all and (max-width:1070px){.already-account[_ngcontent-%COMP%], .missing-account[_ngcontent-%COMP%]{display:block}}@media all and (min-width:768px) and (max-width:1070px){input[type=text][_ngcontent-%COMP%]{width:70%}.larger-button[_ngcontent-%COMP%]{width:73%}.left-box[_ngcontent-%COMP%]{left:0;padding:0}.left-box[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{width:100%}}@media all and (min-width:480px) and (max-width:768px){input[type=text][_ngcontent-%COMP%]{width:80%}.larger-button[_ngcontent-%COMP%]{width:83%}.left-box[_ngcontent-%COMP%]{width:100%;left:0;padding:0}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{top:4rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}form[_ngcontent-%COMP%]{width:100%}}@media all and (max-width:480px){input[type=text][_ngcontent-%COMP%]{width:80%}.larger-button[_ngcontent-%COMP%]{width:83%}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.small-text[_ngcontent-%COMP%]{font-size:1rem}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{top:4rem}.left-box[_ngcontent-%COMP%]{width:100%;left:0;padding:0}form[_ngcontent-%COMP%]{width:87%}}']});let t=e;return t})();var Ye=(()=>{let e=class e{constructor(r){this.firestore=r}addItemWOid(r,i){return this.firestore.collection(r).add(i)}addItem(r,i,o){return this.firestore.collection(r).doc(i).set(o)}getItems(r){return this.firestore.collection(r).get().pipe(oe(i=>i.docs.map(o=>{let s=o.data(),a=o.id;return te({id:a},s)})))}getItem(r,i){return this.firestore.collection(r).doc(i).valueChanges()}updateItem(r,i,o){return this.firestore.collection(r).doc(i).update(o)}deleteItem(r,i){return this.firestore.collection(r).doc(i).delete()}};e.\u0275fac=function(i){return new(i||e)(V(ys))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var YS=(()=>{let e=class e{constructor(r,i,o){this.authService=r,this.firestore=i,this.router=o,this.imageurl="assets/school.png",this.message="Errore inaspettato",this.autenticazione=r,this.db=i}signUpWithEmail(){return b(this,null,function*(){let r=document.getElementById("form").childNodes,i=r[0].value,o=r[1].value,s=r[2].childNodes[0].checked;if(i&&o&&s)try{yield this.autenticazione.signUpWithEmail(i,o),this.correct("Inviata l'email di verifica; confermare l'identit\xE0.");let a=yield K(this.authService.getUser());yield this.saveUid(a)}catch(a){this.error(a.message)}else this.error("Qualche campo \xE8 vuoto.")})}signUpWithGoogle(){return b(this,null,function*(){try{yield this.autenticazione.googleSignUp(),this.correct("La tua identit\xE0 \xE8 gi\xE0 confermata da google.");let r=yield K(this.authService.getUser());yield this.saveUid(r)}catch(r){this.error(r.message)}})}signUpWithFacebook(){return b(this,null,function*(){try{yield this.autenticazione.facebookSignUp(),this.correct("Inviata l'email di verifica; confermare l'identit\xE0.");let r=yield K(this.authService.getUser());yield this.saveUid(r)}catch(r){this.error(r.message)}})}signUpWithGitHub(){return b(this,null,function*(){try{yield this.autenticazione.githubSignUp(),this.correct("La tua identit\xE0 \xE8 gi\xE0 confermata da GitHub.");let r=yield K(this.authService.getUser());yield this.saveUid(r)}catch(r){this.error(r.message)}})}error(r){let i=document.getElementById("error");i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400)}correct(r){let i=document.getElementById("correct");i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400)}saveUid(r){return b(this,null,function*(){yield this.db.addItem("user",r.uid,{completed:!1}),yield this.router.navigateByUrl("access/register/complete-profile")})}};e.\u0275fac=function(i){return new(i||e)(q(Pe),q(Ye),q(ve))},e.\u0275cmp=pe({type:e,selectors:[["app-register"]],decls:45,vars:3,consts:[["id","correct",1,"correct-float","fade-in-bubble"],[1,"left-box","fade-in"],["id","error",1,"error-float","fade-in-bubble"],[1,"title"],[3,"src"],["id","form"],["type","text","placeholder","Inserisci email... ","id","email"],["type","text","placeholder","Inserisci password...","id","password"],[1,"checkbox"],["id","checkbox","type","checkbox","id","checkbox"],["for","checkbox",1,"small-text"],["type","button",1,"larger-button",3,"click"],[1,"middle-text"],[1,"buttons"],["type","button",3,"click"],[1,"bi","bi-google"],[1,"bi","bi-facebook"],[1,"bi","bi-github"],["routerLink","../login",1,"small-text","already-account"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"h6"),E(2,"Correttamente registrato"),_(),v(3,"p"),E(4),_()(),v(5,"div",1)(6,"div")(7,"div",2)(8,"h6"),E(9,"Errore"),_(),v(10,"p"),E(11),_()(),v(12,"div",3),U(13,"img",4),v(14,"h1"),E(15,"StudyMatch"),_()(),v(16,"h2"),E(17,"Registrati"),_(),v(18,"p"),E(19,"Effettua la registrazione"),_(),v(20,"form",5),U(21,"input",6)(22,"input",7),v(23,"div",8),U(24,"input",9),v(25,"label",10),E(26,"Accetto i "),v(27,"b"),E(28,"termini di policy"),_(),E(29," della piattaforma"),_()(),v(30,"button",11),Q("click",function(){return o.signUpWithEmail()}),E(31,"Registrati"),_()(),v(32,"div",12)(33,"p"),E(34,"Oppure"),_()(),v(35,"div",13)(36,"button",14),Q("click",function(){return o.signUpWithGoogle()}),U(37,"i",15),_(),v(38,"button",14),Q("click",function(){return o.signUpWithFacebook()}),U(39,"i",16),_(),v(40,"button",14),Q("click",function(){return o.signUpWithGitHub()}),U(41,"i",17),_()(),v(42,"a",18),E(43,"Hai gi\xE0 un account?"),_()()(),U(44,"router-outlet")),i&2&&(D(4),he(o.message),D(7),he(o.message),D(2),L("src",o.imageurl,Me))},dependencies:[ir,ma],styles:['@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.left-box[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center}.left-box[_ngcontent-%COMP%]{position:absolute;left:3vh;top:50%;transform:translateY(-50%);height:100vh;width:30%;margin:auto;border-radius:19px;flex-direction:column}.title[_ngcontent-%COMP%]{flex-direction:row;width:100%}form[_ngcontent-%COMP%]{width:100%;overflow-y:auto;overflow-x:hidden;margin:auto}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin:0}h1[_ngcontent-%COMP%]{width:fit-content;font-size:3rem;font-weight:750}h2[_ngcontent-%COMP%]{font-weight:450}p[_ngcontent-%COMP%]{margin:.9vh 0 1.5vh;font-size:1rem;font-weight:400}.small-text[_ngcontent-%COMP%]{font-size:.8rem}.password-reset[_ngcontent-%COMP%]{position:relative;bottom:-1.5rem;cursor:pointer}input[type=text][_ngcontent-%COMP%]{height:35px;width:70%;margin:.3rem;padding-left:.7rem;border-radius:8px;border:solid 1px #d9d9d9;transition:.1s;font-size:.8rem;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}input[type=text][_ngcontent-%COMP%]:focus{outline:solid 1px #007aff;transform:scale(1.02);transition:.1s}button[_ngcontent-%COMP%]:hover, input[type=checkbox][_ngcontent-%COMP%]:hover{cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border-radius:19px;border:0;width:14%;height:55px;margin:.6rem;transition:.1s}.larger-button[_ngcontent-%COMP%]{width:73%;height:42px;border-radius:40px;margin-top:1.2rem;font-size:.85rem}button[_ngcontent-%COMP%]:hover{background-color:#0664c9;transition:.1s}.checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.6rem}i[_ngcontent-%COMP%]{font-size:1rem;margin:0}img[_ngcontent-%COMP%]{width:6rem;height:auto;margin-right:.3rem}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{font-weight:400;color:#3d3d3d;font-size:.7rem}a[_ngcontent-%COMP%]:hover{color:#007aff}.middle-text[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center;text-align:center;color:#a1a1a1;margin:1rem auto}.middle-text[_ngcontent-%COMP%]:after, .middle-text[_ngcontent-%COMP%]:before{content:"";flex:1;border-bottom:1px solid #a1a1a1}.middle-text[_ngcontent-%COMP%]:not(:empty):before{margin-right:.25em}.middle-text[_ngcontent-%COMP%]:not(:empty):after{margin-left:.25em}.already-account[_ngcontent-%COMP%], .missing-account[_ngcontent-%COMP%]{display:none;margin-top:3rem;text-decoration:none}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;z-index:100;transform:translate(-50%);border-radius:10px;width:14rem;height:4rem;background-color:#fa7979ed;box-shadow:1px 10px 10px #c43b3b3f;justify-content:center;align-items:center;flex-direction:column;padding:.5rem}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;margin:0}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-size:.8rem;font-weight:400;margin:0}.correct-float[_ngcontent-%COMP%]{width:20rem;background-color:#008d0ced;box-shadow:1px 10px 10px #00000023}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInFifty ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInFifty ease-in .5s;-moz-animation:fadeInFifty ease-in .5s;-o-animation:fadeInFifty ease-in .5s;-ms-animation:fadeInFifty ease-in .5s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}@media all and (max-width:1070px){.already-account[_ngcontent-%COMP%], .missing-account[_ngcontent-%COMP%]{display:block}}@media all and (min-width:768px) and (max-width:1070px){input[type=text][_ngcontent-%COMP%]{width:70%}.larger-button[_ngcontent-%COMP%]{width:73%}.left-box[_ngcontent-%COMP%]{left:0;padding:0}.left-box[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{width:100%}}@media all and (min-width:480px) and (max-width:768px){input[type=text][_ngcontent-%COMP%]{width:80%}.larger-button[_ngcontent-%COMP%]{width:83%}.left-box[_ngcontent-%COMP%]{width:100%;left:0;padding:0}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{top:4rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}form[_ngcontent-%COMP%]{width:100%}}@media all and (max-width:480px){input[type=text][_ngcontent-%COMP%]{width:80%}.larger-button[_ngcontent-%COMP%]{width:83%}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.small-text[_ngcontent-%COMP%]{font-size:1rem}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{top:4rem}.left-box[_ngcontent-%COMP%]{width:100%;left:0;padding:0}form[_ngcontent-%COMP%]{width:87%}}']});let t=e;return t})();var iP="firebasestorage.googleapis.com",oP="storageBucket",r4=2*60*1e3,i4=10*60*1e3,o4=1e3;var dt=class t extends $u{constructor(e,n,r=0){super(yb(e),`Firebase Storage: ${n} (${yb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},lt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(lt||{});function yb(t){return"storage/"+t}function xb(){let t="An unknown error occurred, please check the error payload for server response.";return new dt(lt.UNKNOWN,t)}function s4(t){return new dt(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function a4(t){return new dt(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function c4(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(lt.UNAUTHENTICATED,t)}function l4(){return new dt(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function u4(t){return new dt(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function sP(){return new dt(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aP(){return new dt(lt.CANCELED,"User canceled the upload/download.")}function d4(t){return new dt(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function f4(t){return new dt(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function h4(){return new dt(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oP+"' property when initializing the app?")}function cP(){return new dt(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function p4(){return new dt(lt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function m4(){return new dt(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function g4(t){return new dt(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _s(t){return new dt(lt.INVALID_ARGUMENT,t)}function lP(){return new dt(lt.APP_DELETED,"The Firebase app was deleted.")}function Mb(t){return new dt(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gu(t,e){return new dt(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mu(t){throw new dt(lt.INTERNAL_ERROR,"Internal error: "+t)}var un=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw f4(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(Y){Y.path_=decodeURIComponent(Y.path)}let d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),M={bucket:1,path:3},A=n===iP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",z=new RegExp(`^https?://${A}/${i}/${P}`,"i"),j=[{regex:a,indices:c,postModify:o},{regex:y,indices:M,postModify:u},{regex:z,indices:{bucket:1,path:2},postModify:u}];for(let Y=0;Y<j.length;Y++){let le=j[Y],ie=le.regex.exec(e);if(ie){let x=ie[le.indices.bucket],w=ie[le.indices.path];w||(w=""),r=new t(x,w),le.postModify(r);break}}if(r==null)throw d4(e);return r}},vb=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function y4(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...P){u||(u=!0,e.apply(null,P))}function h(P){i=setTimeout(()=>{i=null,t(y,c())},P)}function m(){o&&clearTimeout(o)}function y(P,...z){if(u){m();return}if(P){m(),d.call(null,P,...z);return}if(c()||s){m(),d.call(null,P,...z);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,h(j)}let M=!1;function A(P){M||(M=!0,m(),!u&&(i!==null?(P||(a=2),clearTimeout(i),h(0)):P||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,A(!0)},n),A}function _4(t){t(!1)}function v4(t){return t!==void 0}function w4(t){return typeof t=="function"}function b4(t){return typeof t=="object"&&!Array.isArray(t)}function xp(t){return typeof t=="string"||t instanceof String}function QS(t){return Tb()&&t instanceof Blob}function Tb(){return typeof Blob<"u"}function wb(t,e,n,r){if(r<e)throw _s(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _s(`Invalid value for '${t}'. Expected ${n} or less.`)}function co(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function uP(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ac=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(ac||{});function dP(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var bb=class{constructor(e,n,r,i,o,s,a,c,u,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,M)=>{this.resolve_=y,this.reject_=M,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new sc(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===ac.NO_ERROR,c=o.getStatus();if(!a||dP(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===ac.ABORT;r(!1,new sc(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new sc(u,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());v4(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=xb();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?lP():aP();s(c)}else{let c=sP();s(c)}};this.canceled_?n(!1,new sc(!1,null,!0)):this.backoffId_=y4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},sc=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function C4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function I4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function x4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function M4(t,e,n,r,i,o,s=!0){let a=uP(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return E4(u,e),C4(u,n),I4(u,o),x4(u,r),new bb(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function T4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function D4(...t){let e=T4();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Tb())return new Blob(t);throw new dt(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function O4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function S4(t){if(typeof atob>"u")throw g4("base-64");return atob(t)}var On={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},yu=class{constructor(e,n){this.data=e,this.contentType=n||null}};function Db(t,e){switch(t){case On.RAW:return new yu(fP(e));case On.BASE64:case On.BASE64URL:return new yu(hP(t,e));case On.DATA_URL:return new yu(A4(e),k4(e))}throw xb()}function fP(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function P4(t){let e;try{e=decodeURIComponent(t)}catch{throw gu(On.DATA_URL,"Malformed data URL.")}return fP(e)}function hP(t,e){switch(t){case On.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw gu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case On.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw gu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=S4(e)}catch(i){throw i.message.includes("polyfill")?i:gu(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Ep=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw gu(On.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=R4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function A4(t){let e=new Ep(t);return e.base64?hP(On.BASE64,e.rest):P4(e.rest)}function k4(t){return new Ep(t).contentType}function R4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var cc=class t{constructor(e,n){let r=0,i="";QS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(QS(this.data_)){let r=this.data_,i=O4(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(Tb()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(D4.apply(null,n))}else{let n=e.map(s=>xp(s)?Db(On.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function Ob(t){let e;try{e=JSON.parse(t)}catch{return null}return b4(e)?e:null}function N4(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F4(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function pP(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function L4(t,e){return e}var Bt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||L4}},Ip=null;function V4(t){return!xp(t)||t.length<2?t:pP(t)}function Mp(){if(Ip)return Ip;let t=[];t.push(new Bt("bucket")),t.push(new Bt("generation")),t.push(new Bt("metageneration")),t.push(new Bt("name","fullPath",!0));function e(o,s){return V4(s)}let n=new Bt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new Bt("size");return i.xform=r,t.push(i),t.push(new Bt("timeCreated")),t.push(new Bt("updated")),t.push(new Bt("md5Hash",null,!0)),t.push(new Bt("cacheControl",null,!0)),t.push(new Bt("contentDisposition",null,!0)),t.push(new Bt("contentEncoding",null,!0)),t.push(new Bt("contentLanguage",null,!0)),t.push(new Bt("contentType",null,!0)),t.push(new Bt("metadata","customMetadata",!0)),Ip=t,Ip}function U4(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new un(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function j4(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return U4(r,t),r}function mP(t,e,n){let r=Ob(e);return r===null?null:j4(t,r,n)}function B4(t,e,n,r){let i=Ob(e);if(i===null||!xp(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let d=t.bucket,h=t.fullPath,m="/b/"+s(d)+"/o/"+s(h),y=co(m,n,r),M=uP({alt:"media",token:u});return y+M})[0]}function Sb(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var ZS="prefixes",XS="items";function $4(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ZS])for(let i of n[ZS]){let o=i.replace(/\/$/,""),s=t._makeStorageReference(new un(e,o));r.prefixes.push(s)}if(n[XS])for(let i of n[XS]){let o=t._makeStorageReference(new un(e,i.name));r.items.push(o)}return r}function z4(t,e,n){let r=Ob(n);return r===null?null:$4(t,e,r)}var ur=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Vr(t){if(!t)throw xb()}function Tp(t,e){function n(r,i){let o=mP(t,i,e);return Vr(o!==null),o}return n}function q4(t,e){function n(r,i){let o=z4(t,e,i);return Vr(o!==null),o}return n}function H4(t,e){function n(r,i){let o=mP(t,i,e);return Vr(o!==null),B4(o,i,t.host,t._protocol)}return n}function dc(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=l4():i=c4():n.getStatus()===402?i=a4(t.bucket):n.getStatus()===403?i=u4(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Dp(t){let e=dc(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=s4(t.path)),o.serverResponse=i.serverResponse,o}return n}function gP(t,e,n){let r=e.fullServerUrl(),i=co(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new ur(i,o,Tp(t,n),s);return a.errorHandler=Dp(e),a}function G4(t,e,n,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=co(s,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,d=new ur(a,c,q4(t,e.bucket),u);return d.urlParams=o,d.errorHandler=dc(e),d}function W4(t,e,n){let r=e.fullServerUrl(),i=co(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new ur(i,o,H4(t,n),s);return a.errorHandler=Dp(e),a}function K4(t,e,n,r){let i=e.fullServerUrl(),o=co(i,t.host,t._protocol),s="PATCH",a=Sb(n,r),c={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,d=new ur(o,s,Tp(t,r),u);return d.headers=c,d.body=a,d.errorHandler=Dp(e),d}function Y4(t,e){let n=e.fullServerUrl(),r=co(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,u){}let a=new ur(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=Dp(e),a}function Q4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function yP(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Q4(null,e)),r}function Z4(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let j="";for(let Y=0;Y<2;Y++)j=j+Math.random().toString().slice(2);return j}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=yP(e,r,i),d=Sb(u,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",y=cc.getBlob(h,r,m);if(y===null)throw cP();let M={name:u.fullPath},A=co(o,t.host,t._protocol),P="POST",z=t.maxUploadRetryTime,W=new ur(A,P,Tp(t,n),z);return W.urlParams=M,W.headers=s,W.body=y.uploadData(),W.errorHandler=dc(e),W}var lc=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function Pb(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Vr(!1)}return Vr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function X4(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s=yP(e,r,i),a={name:s.fullPath},c=co(o,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=Sb(s,n),m=t.maxUploadRetryTime;function y(A){Pb(A);let P;try{P=A.getResponseHeader("X-Goog-Upload-URL")}catch{Vr(!1)}return Vr(xp(P)),P}let M=new ur(c,u,y,m);return M.urlParams=a,M.headers=d,M.body=h,M.errorHandler=dc(e),M}function J4(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function o(u){let d=Pb(u,["active","final"]),h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vr(!1)}h||Vr(!1);let m=Number(h);return Vr(!isNaN(m)),new lc(m,r.size(),d==="final")}let s="POST",a=t.maxUploadRetryTime,c=new ur(n,s,o,a);return c.headers=i,c.errorHandler=dc(e),c}var JS=256*1024;function e3(t,e,n,r,i,o,s,a){let c=new lc(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw p4();let u=c.total-c.current,d=u;i>0&&(d=Math.min(d,i));let h=c.current,m=h+d,y="";d===0?y="finalize":u===d?y="upload, finalize":y="upload";let M={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${c.current}`},A=r.slice(h,m);if(A===null)throw cP();function P(Y,le){let ie=Pb(Y,["active","final"]),x=c.current+d,w=r.size(),C;return ie==="final"?C=Tp(e,o)(Y,le):C=null,new lc(x,w,ie==="final",C)}let z="POST",W=e.maxUploadRetryTime,j=new ur(n,z,P,W);return j.headers=M,j.body=A.uploadData(),j.progressCallback=a||null,j.errorHandler=dc(t),j}var _P={STATE_CHANGED:"state_changed"},Xt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _b(t){switch(t){case"running":case"pausing":case"canceling":return Xt.RUNNING;case"paused":return Xt.PAUSED;case"success":return Xt.SUCCESS;case"canceled":return Xt.CANCELED;case"error":return Xt.ERROR;default:return Xt.ERROR}}var Cb=class{constructor(e,n,r){if(w4(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function oc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var eP=null,Ib=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ac.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ac.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ac.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw mu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Eb=class extends Ib{initXhr(){this.xhr_.responseType="text"}};function Lr(){return eP?eP():new Eb}var _u=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Mp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(lt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(dP(i.status,[]))if(o)i=sP();else{this.sleepTime=Math.max(this.sleepTime*2,o4),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(lt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=X4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Lr,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=J4(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Lr,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=JS*this._chunkMultiplier,n=new lc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=e3(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,Lr,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){JS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=gP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Lr,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=Z4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Lr,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=aP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=_b(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let o=new Cb(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(_b(this._state)){case Xt.SUCCESS:oc(this._resolve.bind(null,this.snapshot))();break;case Xt.CANCELED:case Xt.ERROR:let n=this._reject;oc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_b(this._state)){case Xt.RUNNING:case Xt.PAUSED:e.next&&oc(e.next.bind(e,this.snapshot))();break;case Xt.SUCCESS:e.complete&&oc(e.complete.bind(e))();break;case Xt.CANCELED:case Xt.ERROR:e.error&&oc(e.error.bind(e,this._error))();break;default:e.error&&oc(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var uc=class t{constructor(e,n){this._service=e,n instanceof un?this._location=n:this._location=un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pP(this._location.path)}get storage(){return this._service}get parent(){let e=N4(this._location.path);if(e===null)return null;let n=new un(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Mb(e)}};function t3(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _u(t,new cc(e),n)}function n3(t){let e={prefixes:[],items:[]};return vP(t,e).then(()=>e)}function vP(t,e,n){return b(this,null,function*(){let i=yield wP(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield vP(t,e,i.nextPageToken))})}function wP(t,e){e!=null&&typeof e.maxResults=="number"&&wb("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=G4(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Lr)}function r3(t){t._throwIfRoot("getMetadata");let e=gP(t.storage,t._location,Mp());return t.storage.makeRequestWithTokens(e,Lr)}function i3(t,e){t._throwIfRoot("updateMetadata");let n=K4(t.storage,t._location,e,Mp());return t.storage.makeRequestWithTokens(n,Lr)}function o3(t){t._throwIfRoot("getDownloadURL");let e=W4(t.storage,t._location,Mp());return t.storage.makeRequestWithTokens(e,Lr).then(n=>{if(n===null)throw m4();return n})}function s3(t){t._throwIfRoot("deleteObject");let e=Y4(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Lr)}function bP(t,e){let n=F4(t._location.path,e),r=new un(t._location.bucket,n);return new uc(t.storage,r)}function a3(t){return/^[A-Za-z]+:\/\//.test(t)}function c3(t,e){return new uc(t,e)}function CP(t,e){if(t instanceof vu){let n=t;if(n._bucket==null)throw h4();let r=new uc(n,n._bucket);return e!=null?CP(r,e):r}else return e!==void 0?bP(t,e):t}function l3(t,e){if(e&&a3(e)){if(t instanceof vu)return c3(t,e);throw _s("To use ref(service, url), the first argument must be a Storage instance.")}else return CP(t,e)}function tP(t,e){let n=e?.[oP];return n==null?null:un.makeFromBucketSpec(n,t)}function u3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ju(i,t.app.options.projectId))}var vu=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=iP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=r4,this._maxUploadRetryTime=i4,this._requests=new Set,i!=null?this._bucket=un.makeFromBucketSpec(i,this._host):this._bucket=tP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,e):this._bucket=tP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return b(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return b(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new vb(lP());{let s=M4(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return b(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},nP="@firebase/storage",rP="0.12.6";var d3="storage";function IP(t,e,n){return t=Be(t),t3(t,e,n)}function EP(t){return t=Be(t),r3(t)}function xP(t,e){return t=Be(t),i3(t,e)}function MP(t,e){return t=Be(t),wP(t,e)}function TP(t){return t=Be(t),n3(t)}function DP(t){return t=Be(t),o3(t)}function OP(t){return t=Be(t),s3(t)}function Ab(t,e){return t=Be(t),l3(t,e)}function SP(t,e){return bP(t,e)}function PP(t,e,n,r={}){u3(t,e,n,r)}function f3(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new vu(n,r,i,e,qu)}function h3(){po(new jn(d3,f3,"PUBLIC").setMultipleInstances(!0)),Bn(nP,rP,""),Bn(nP,rP,"esm2017")}h3();var fc=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var Op=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new fc(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new fc(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new fc(s,this,this._ref)):o={next:n.next?s=>n.next(new fc(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},Sp=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new vs(e,this._service))}get items(){return this._delegate.items.map(e=>new vs(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var vs=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=SP(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Op(IP(this._delegate,e,n),this)}putString(e,n=On.RAW,r){this._throwIfRoot("putString");let i=Db(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new Op(new _u(this._delegate,new cc(i.data,!0),o),this)}listAll(){return TP(this._delegate).then(e=>new Sp(e,this.storage))}list(e){return MP(this._delegate,e||void 0).then(n=>new Sp(n,this.storage))}getMetadata(){return EP(this._delegate)}updateMetadata(e){return xP(this._delegate,e)}getDownloadURL(){return DP(this._delegate)}delete(){return this._throwIfRoot("delete"),OP(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw Mb(e)}};var Pp=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(AP(e))throw _s("ref() expected a child path but got a URL, use refFromURL instead.");return new vs(Ab(this._delegate,e),this)}refFromURL(e){if(!AP(e))throw _s("refFromURL() expected a full URL but got a child path, use ref() instead.");try{un.makeFromUrl(e,this._delegate.host)}catch{throw _s("refFromUrl() expected a valid full URL but got an invalid one.")}return new vs(Ab(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){PP(this._delegate,e,n,r)}};function AP(t){return/^[A-Za-z]+:\/\//.test(t)}var p3="@firebase/storage-compat",m3="0.3.9";var g3="storage-compat";function y3(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new Pp(n,r)}function _3(t){let e={TaskState:Xt,TaskEvent:_P,StringFormat:On,Storage:Pp,Reference:vs};t.INTERNAL.registerComponent(new jn(g3,y3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(p3,m3)}_3(et);function v3(t){return new _e(e=>{let n=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();n(t.snapshot);let o=t.on("state_changed",n);return t.then(s=>{n(s),i()},s=>{n(t.snapshot),r(s)}),function(){o()}}).pipe(Am(0))}function kP(t){let e=v3(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(oe(n=>n.bytesTransferred/n.totalBytes*100))}}function Ap(t){return{getDownloadURL:()=>se(void 0).pipe(W0,ze(()=>t.getDownloadURL()),Vt),getMetadata:()=>se(void 0).pipe(W0,ze(()=>t.getMetadata()),Vt),delete:()=>Te(t.delete()),child:e=>Ap(t.child(e)),updateMetadata:e=>Te(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return kP(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return kP(i)},list:e=>Te(t.list(e)),listAll:()=>Te(t.listAll())}}var w3=new ne("angularfire2.storageBucket"),b3=new ne("angularfire2.storage.maxUploadRetryTime"),C3=new ne("angularfire2.storage.maxOperationRetryTime"),I3=new ne("angularfire2.storage.use-emulator"),kb=(()=>{class t{storage;constructor(n,r,i,o,s,a,c,u,d,h){let m=zo(n,s,r);this.storage=ya(`${m.name}.storage.${i}`,"AngularFireStorage",m.name,()=>{let y=s.runOutsideAngular(()=>m.storage(i||void 0)),M=d;return M&&y.useEmulator(...M),c&&y.setMaxUploadRetryTime(c),u&&y.setMaxOperationRetryTime(u),y},[c,u])}ref(n){return Ap(this.storage.ref(n))}refFromURL(n){return Ap(this.storage.refFromURL(n))}upload(n,r,i){let o=this.storage.ref(n);return Ap(o).put(r,i)}static \u0275fac=function(r){return new(r||t)(V(ji),V(Bi,8),V(w3,8),V(Ot),V(De),V(ga),V(b3,8),V(C3,8),V(I3,8),V(Xr,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var E3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ke({type:t});static \u0275inj=Ae({})}return t})(),RP=(()=>{class t{constructor(){et.registerVersion("angularfire",Jr.full,"gcs-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ke({type:t});static \u0275inj=Ae({providers:[kb],imports:[E3]})}return t})();var NP=(()=>{let e=class e{constructor(r,i,o){this.storage=r,this.firestore=i,this.auth=o}uploadProfileImage(r){return b(this,null,function*(){try{let o=yield this.auth.currentUser;if(!o)throw new Error("User non autenticato");var i=new File([r],o.uid,{type:r.type,lastModified:r.lastModified});let s=`profileImages/${i.name}`,a=yield this.storage.ref(s),c=yield this.storage.upload(s,i),u=yield K(a.getDownloadURL());return yield this.firestore.collection("user").doc(o.uid).set({profileImageURL:u},{merge:!0}),u}catch(o){throw o}})}};e.\u0275fac=function(i){return new(i||e)(V(kb),V(ys),V(qo))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var FP=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.location=i,this.authService=o,this.firestore=s,this.storageService=a,this.cities=[],this.autenticazione=o,this.db=s,this.storage=a}ngOnInit(){return b(this,null,function*(){history.state.redirect!=null&&this.error("Devi prima completare il profilo."),yield this.preparecities()})}loadFile(r){let i=document.getElementById("background");var o=document.getElementById("output");o.style.display="inherit",i.classList.add("background-opened"),o.src=URL.createObjectURL(r.target.files[0]),o.onload=function(){URL.revokeObjectURL(o.src)},this.file=r.target.files[0]}onFileSelected(r){return b(this,null,function*(){try{this.downloadURL=yield this.storageService.uploadProfileImage(r)}catch(i){throw i.message="Immagine non caricata correttamente.",i}})}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}fadeoutsv(r){return b(this,null,function*(){document.getElementById("confirm-button").disabled=!0;try{yield this.savedata();let i=document.getElementById("background"),o=document.getElementById("block");i&&o&&(i.classList.remove("fade-in"),i.classList.add("fade-out"),o.classList.remove("fade-in"),o.classList.add("fade-out-up"),setTimeout(()=>{this.router.navigateByUrl(r)},450))}catch(i){document.getElementById("confirm-button").disabled=!1,this.error(i.message)}})}savedata(){return b(this,null,function*(){let r=document.getElementById("nome").value,i=document.getElementById("cognome").value,o=document.getElementById("eta").value,s=document.getElementById("lfo").value,a=document.getElementById("descrizione").value,c=document.getElementById("citta").value,u=document.getElementById("facolta").value;if(!r||!i||!o||!s||!a||!u||!c)throw new Error("Qualche campo \xE8 vuoto.");if(r.length>=20)throw new Error("Nome troppo lungo. (Max 20 caratteri)");if(i.length>=20)throw new Error("Cognome troppo lungo. (Max 20 caratteri)");if(isNaN(Number(o)))throw new Error("L'et\xE0 non \xE8 un intero.");let d=Number(o);if(d<18||d>99)throw new Error("Sei fuori l'et\xE0 consentita.");if(!/^[\s\S]+, \d\d-\d\d$/.test(s))throw new Error("Il luogo e l'orario devono essere nella forma: luogo, ora-ora.");let[h,m]=s.split(",")[1].split("-").map(Number);if(h<0||h>=24||m<0||m>24)throw new Error("La fascia oraria non \xE8 valida (supera le 23 o va a meno di 00)");if(this.file==null)throw new Error("Devi caricare un'immagine profilo.");yield this.onFileSelected(this.file);let y=yield K(this.authService.getUser());yield this.db.updateItem("user",y.uid,{id:y.uid,name:r,surname:i,age:d,locationAndTime:s,description:a,city:c,faculty:u,accepted:[],rejected:[],requests:{},matched:{},accepted_groups:[],rejected_groups:[]})})}error(r){let i=document.getElementById("error-cmplt-1");i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400)}preparecities(){return b(this,null,function*(){let r="https://raw.githubusercontent.com/matteocontrini/comuni-json/master/comuni.json";try{let i=yield fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);let o=yield i.json();for(let s of o)this.cities.push(s.nome.toLowerCase())}catch(i){throw i}})}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Ni),q(Pe),q(Ye),q(NP))},e.\u0275cmp=pe({type:e,selectors:[["app-complete-profile-1"]],decls:40,vars:1,consts:[["id","background",1,"background","fade-in"],["id","error-cmplt-1",1,"error-float","fade-in-bubble"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],["id","form"],[1,"text"],[1,"small-text"],[1,"inputs"],[1,"left-column"],["type","text","placeholder","Nome","id","nome"],["type","text","placeholder","Cognome","id","cognome"],["type","text","placeholder","Et\xE0","id","eta"],["type","text","placeholder","Luogo e fascia oraria di studio","id","lfo"],["type","text","placeholder","Citt\xE0","id","citta"],["type","text","placeholder","Facolt\xE0","id","facolta"],["placeholder","Descrizione (Max 150 caratteri)","id","descrizione","maxlength","150"],[1,"right-column"],["id","output"],["id","selectfile","type","file","accept","image/*",3,"change"],["for","selectfile"],["type","button","id","confirm-button",1,"larger-button",3,"click"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"h6"),E(3,"Errore"),_(),v(4,"p"),E(5),_()(),v(6,"div",2)(7,"a",3),Q("click",function(){return o.fadeout("access/register")}),U(8,"i",4),E(9,"Torna indietro"),_(),v(10,"form",5)(11,"div",6)(12,"h2"),E(13,"Completa il profilo"),_(),v(14,"p"),E(15,"Per completare il profilo fornisci alcune informazioni che permetteranno di farti conoscere brevemente gli altri studenti."),_(),v(16,"p",7)(17,"b"),E(18,"Attenzione"),_(),E(19,": Luogo e fascia oraria deve essere inserito nella forma: 'luogo di studio, ora inizio-ora fine'."),_()(),v(20,"div",8)(21,"div",9)(22,"div"),U(23,"input",10)(24,"input",11),_(),v(25,"div"),U(26,"input",12)(27,"input",13),_(),v(28,"div"),U(29,"input",14)(30,"input",15),_(),v(31,"div"),U(32,"textarea",16),_()(),v(33,"div",17),U(34,"img",18),v(35,"input",19),Q("change",function(a){return o.loadFile(a)}),_(),v(36,"label",20),E(37,"Seleziona immagine profilo"),_()()(),v(38,"button",21),Q("click",function(){return o.fadeoutsv("access/register/end-complete-profile")}),E(39,"Registrati"),_()()()()),i&2&&(D(5),he(o.message))},styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden}.background[_ngcontent-%COMP%], .block[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{min-width:330px}.block[_ngcontent-%COMP%]{position:relative;background-color:#dbdbdbed;border-radius:14px;width:60%;padding:1rem 0 2.5rem}.text[_ngcontent-%COMP%]{margin-top:2.5rem;width:50%;min-width:300px}.inputs[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{width:100%;display:flex}form[_ngcontent-%COMP%]{height:100%;flex-direction:column;align-items:center;text-align:center}.inputs[_ngcontent-%COMP%]{justify-content:center;flex-direction:row}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.8rem;font-weight:600}p[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:.8rem;background-color:#ffffff8f}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{height:35px;width:45%;margin:.2rem;padding-left:.4rem;border-radius:8px;border:solid 1px #d9d9d9;transition:.1s;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}input[type=file][_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-weight:300;padding:.5rem;width:90%;border-radius:19px;display:inline-block;cursor:pointer;transition:.2s}input[type=file][_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]:hover + label[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:solid 1px #007aff;transform:scale(1.02);transition:.1s}#citta[_ngcontent-%COMP%], #cognome[_ngcontent-%COMP%], #facolta[_ngcontent-%COMP%], #nome[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{width:45%}#eta[_ngcontent-%COMP%]{width:20%}#lfo[_ngcontent-%COMP%]{width:70%}#descrizione[_ngcontent-%COMP%]{width:93%;height:5rem;resize:none}#output[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{border-radius:19px}.margin-bottom[_ngcontent-%COMP%]{margin-bottom:1.5rem}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:200px;height:35px;margin-top:.7rem;margin-bottom:.7rem;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transform:scale(1.02);transition:.1s}.left-column[_ngcontent-%COMP%]{width:70%;margin:.1rem}.right-column[_ngcontent-%COMP%]{width:30%;margin:.1rem}#output[_ngcontent-%COMP%]{margin:.5rem auto;width:60%;max-height:10rem;object-fit:cover;box-shadow:2px 3px 10px #888}.error-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;transform:translate(-50%);border-radius:10px;width:14rem;z-index:100;height:4rem;background-color:#fa7979ed;box-shadow:1px 10px 10px #c43b3b3f;flex-direction:column;padding:.5rem}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;margin:0}.error-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-size:.8rem;font-weight:400;margin:0;text-align:center}.error-float[_ngcontent-%COMP%], .photo-block[_ngcontent-%COMP%], .photo-information[_ngcontent-%COMP%]{align-items:center;justify-content:center}.photo-block[_ngcontent-%COMP%]{position:absolute;display:none;background-color:#dbdbdbed;border-radius:14px;width:60%;z-index:100;text-align:center;min-width:330px;padding:2rem 0}.photo-information[_ngcontent-%COMP%]{display:flex;flex-direction:column}video[_ngcontent-%COMP%]{height:55%;border-radius:20px;margin-top:1rem}.photo-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem}.photo-button[_ngcontent-%COMP%]{width:70px;height:70px;margin-top:1rem;position:relative}#canvas[_ngcontent-%COMP%], #output[_ngcontent-%COMP%]{display:none}.buttonnotverified[_ngcontent-%COMP%]{margin-top:2rem}.circle[_ngcontent-%COMP%], .ring[_ngcontent-%COMP%]{position:absolute;border-radius:100%}.circle[_ngcontent-%COMP%]{inset:12%;background-color:#fff;opacity:0}.ring[_ngcontent-%COMP%]{inset:0;border:.5em solid #fff;opacity:.8}.photo-button[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .photo-button[_ngcontent-%COMP%]   .ring[_ngcontent-%COMP%]{transition:all .25s}.photo-button[_ngcontent-%COMP%]:hover   .circle[_ngcontent-%COMP%]{opacity:1;cursor:pointer}.photo-button[_ngcontent-%COMP%]:active   .ring[_ngcontent-%COMP%]{opacity:1}.photo-button[_ngcontent-%COMP%]:active   .circle[_ngcontent-%COMP%]{opacity:.5}.small-text[_ngcontent-%COMP%]{color:#5e5e5e;font-size:.8rem!important;margin-top:.4rem;margin-bottom:1.5rem}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .5s;-moz-animation:fadeIn ease-in .5s;-o-animation:fadeIn ease-in .5s;-ms-animation:fadeIn ease-in .5s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}@media all and (min-width:768px) and (max-width:1024px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}h2[_ngcontent-%COMP%]{margin-top:3rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (min-width:480px) and (max-width:768px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:90%}.larger-button[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.error-float[_ngcontent-%COMP%]{top:4rem}h2[_ngcontent-%COMP%]{margin-top:3rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (max-width:480px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:90%}.larger-button[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.error-float[_ngcontent-%COMP%]{top:4rem}h2[_ngcontent-%COMP%]{margin-top:3rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (max-height:500px){.background[_ngcontent-%COMP%]{justify-content:flex-start}}@media all and (max-height:750px){.background-opened[_ngcontent-%COMP%]{justify-content:flex-start!important}}"]});let t=e;return t})();var T3=["video"],D3=["canvas"];function O3(t,e){if(t&1){let n=at();v(0,"div",18)(1,"h2"),E(2,"Scattati una foto"),_(),v(3,"p"),E(4,"Per verificare che tu sia effettivamente la persona che sta creando il profilo, scattati una foto. Questa non verr\xE0 ne utilizzata ne salvata."),_(),U(5,"video",19,0),v(7,"div",20),Q("click",function(){Re(n);let i=Z();return Ne(i.takePhoto())}),U(8,"div",21)(9,"div",22),_(),U(10,"canvas",23,1),_()}}function S3(t,e){if(t&1){let n=at();v(0,"div")(1,"h2"),E(2,"Attenzione"),_(),v(3,"p"),E(4,"Non hai nessun dispositivo per scattare la foto, perci\xF2 non potrai essere verificato."),_(),v(5,"button",24),Q("click",function(){Re(n);let i=Z();return Ne(i.fadeoutcam("access/login"))}),E(6,"Continua"),_()()}}var LP=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.firestore=o,this.photo=null,this.stream=null,this.impossibletoverify=!1,this.autenticazione=i,this.db=o}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}fadeoutsv(){document.getElementById("confirm-button").disabled=!0;let r=document.getElementById("block"),i=document.getElementById("photo-block"),o=document.getElementById("Telegram").value,s=document.getElementById("Instagram").value,a=document.getElementById("Telefono").value;if(!o||!s||!a){document.getElementById("confirm-button").disabled=!1,this.error("Qualche campo \xE8 vuoto.");return}if(!o.startsWith("@")){document.getElementById("confirm-button").disabled=!1,this.error("Lo user telegram deve iniziare con @.");return}if(!s.startsWith("@")){document.getElementById("confirm-button").disabled=!1,this.error("Lo user instagram deve iniziare con @.");return}if(!/^\+\d{2}(\s?\d{10})$/.test(a)){document.getElementById("confirm-button").disabled=!1,this.error("Non hai fornito un numero di telefono valido.");return}r&&i&&(r.classList.remove("fade-in"),r.classList.add("fade-out-up"),setTimeout(()=>{r.style.display="none",i.style.display="flex",this.initCamera()},450))}fadeoutcam(r){return b(this,null,function*(){try{yield this.savedata();let i=document.getElementById("background"),o=document.getElementById("photo-block");i&&o&&(i.classList.remove("fade-in"),i.classList.add("fade-out"),o.classList.remove("fade-in"),o.classList.add("fade-out-up"),setTimeout(()=>{this.router.navigate([r],{state:{complete:window.location.pathname}})},450))}catch(i){this.error(i.message)}})}savedata(){return b(this,null,function*(){let r=document.getElementById("Telegram").value,i=document.getElementById("Instagram").value,o=document.getElementById("Telefono").value;try{let s=yield K(this.authService.getUser());yield this.db.updateItem("user",s.uid,{completed:!0,telegram:r,instagram:i,phone:o,verified:!this.impossibletoverify})}catch(s){throw new Error("Errore durante il salvataggio dei dati: "+s.message)}})}initCamera(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(r=>{this.stream=r,this.video.nativeElement.srcObject=r,this.video.nativeElement.play()}).catch(r=>{this.error("Errore nell'attivazione della telecamera"),this.impossibletoverify=!0}):(this.error("Il dispositivo non supporta l'accesso alla telecamera"),this.impossibletoverify=!0)}takePhoto(){let r=this.canvas.nativeElement,i=this.video.nativeElement,o=r.getContext("2d");o&&(r.width=i.videoWidth,r.height=i.videoHeight,o.drawImage(i,0,0,r.width,r.height),this.photo=r.toDataURL("image/png"),this.stream&&this.stream.getTracks().forEach(s=>s.stop()),this.fadeoutcam("access/login"))}error(r){let i=document.getElementById("error-cmplt-2");i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400)}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-complete-profile-2"]],viewQuery:function(i,o){if(i&1&&(Lo(T3,5),Lo(D3,5)),i&2){let s;ki(s=Ri())&&(o.video=s.first),ki(s=Ri())&&(o.canvas=s.first)}},decls:29,vars:3,consts:[["video",""],["canvas",""],["id","background",1,"background","fade-in"],["id","error-cmplt-2",1,"error-float","fade-in-bubble"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],["id","form"],[1,"text"],[1,"margin-bottom"],[1,"inputs"],["type","text","placeholder","Telegram (@...)","id","Telegram"],["type","text","placeholder","Instagram (@...)","id","Instagram"],["type","text","placeholder","Numero di telefono  (+39 ...)","id","Telefono"],["type","button","id","confirm-button",1,"larger-button",3,"click"],["id","photo-block",1,"photo-block","fade-in"],["class","photo-information",4,"ngIf"],[4,"ngIf"],[1,"photo-information"],["autoplay","",1,"fade-in"],[1,"photo-button",3,"click"],[1,"circle"],[1,"ring"],["id","canvas"],[1,"buttonnotverified",3,"click"]],template:function(i,o){i&1&&(v(0,"div",2)(1,"div",3)(2,"h6"),E(3,"Errore"),_(),v(4,"p"),E(5),_()(),v(6,"div",4)(7,"a",5),Q("click",function(){return o.fadeout("access/register/complete-profile")}),U(8,"i",6),E(9,"Torna indietro"),_(),v(10,"form",7)(11,"div",8)(12,"h2"),E(13,"Completa il profilo"),_(),v(14,"p",9),E(15,"Per completare il profilo fornisci alcune informazioni che permetteranno di farti conoscere brevemente gli altri studenti"),_()(),v(16,"div",10)(17,"div"),U(18,"input",11)(19,"input",12)(20,"input",13),_()(),v(21,"button",14),Q("click",function(){return o.fadeoutsv()}),E(22,"Registrati"),_()()(),v(23,"div",15)(24,"a",5),Q("click",function(){return o.fadeout("access/register/complete-profile")}),U(25,"i",6),E(26,"Torna indietro"),_(),ae(27,O3,12,0,"div",16)(28,S3,7,0,"div",17),_()()),i&2&&(D(5),he(o.message),D(22),L("ngIf",!o.impossibletoverify),D(),L("ngIf",o.impossibletoverify))},dependencies:[Ke],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden}.background[_ngcontent-%COMP%], .block[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{min-width:330px}.block[_ngcontent-%COMP%]{position:relative;background-color:#dbdbdbed;border-radius:14px;width:60%;padding:1rem 0 2.5rem}.text[_ngcontent-%COMP%]{margin-top:2.5rem;width:50%;min-width:300px}.inputs[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{width:100%;display:flex}form[_ngcontent-%COMP%]{height:100%;flex-direction:column;align-items:center;text-align:center}.inputs[_ngcontent-%COMP%]{justify-content:center;flex-direction:row}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.8rem;font-weight:600}p[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:.8rem;background-color:#ffffff8f}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{height:35px;width:45%;margin:.2rem;padding-left:.4rem;border-radius:8px;border:solid 1px #d9d9d9;transition:.1s;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}input[type=file][_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-weight:300;padding:.5rem;width:90%;border-radius:19px;display:inline-block;cursor:pointer;transition:.2s}input[type=file][_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]:hover + label[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:solid 1px #007aff;transform:scale(1.02);transition:.1s}#citta[_ngcontent-%COMP%], #cognome[_ngcontent-%COMP%], #facolta[_ngcontent-%COMP%], #nome[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{width:45%}#eta[_ngcontent-%COMP%]{width:20%}#lfo[_ngcontent-%COMP%]{width:70%}#descrizione[_ngcontent-%COMP%]{width:93%;height:5rem;resize:none}#output[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{border-radius:19px}.margin-bottom[_ngcontent-%COMP%]{margin-bottom:1.5rem}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:200px;height:35px;margin-top:.7rem;margin-bottom:.7rem;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transform:scale(1.02);transition:.1s}.left-column[_ngcontent-%COMP%]{width:70%;margin:.1rem}.right-column[_ngcontent-%COMP%]{width:30%;margin:.1rem}#output[_ngcontent-%COMP%]{margin:.5rem auto;width:60%;max-height:10rem;object-fit:cover;box-shadow:2px 3px 10px #888}.error-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;transform:translate(-50%);border-radius:10px;width:14rem;z-index:100;height:4rem;background-color:#fa7979ed;box-shadow:1px 10px 10px #c43b3b3f;flex-direction:column;padding:.5rem}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;margin:0}.error-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-size:.8rem;font-weight:400;margin:0;text-align:center}.error-float[_ngcontent-%COMP%], .photo-block[_ngcontent-%COMP%], .photo-information[_ngcontent-%COMP%]{align-items:center;justify-content:center}.photo-block[_ngcontent-%COMP%]{position:absolute;display:none;background-color:#dbdbdbed;border-radius:14px;width:60%;z-index:100;text-align:center;min-width:330px;padding:2rem 0}.photo-information[_ngcontent-%COMP%]{display:flex;flex-direction:column}video[_ngcontent-%COMP%]{height:55%;border-radius:20px;margin-top:1rem}.photo-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem}.photo-button[_ngcontent-%COMP%]{width:70px;height:70px;margin-top:1rem;position:relative}#canvas[_ngcontent-%COMP%], #output[_ngcontent-%COMP%]{display:none}.buttonnotverified[_ngcontent-%COMP%]{margin-top:2rem}.circle[_ngcontent-%COMP%], .ring[_ngcontent-%COMP%]{position:absolute;border-radius:100%}.circle[_ngcontent-%COMP%]{inset:12%;background-color:#fff;opacity:0}.ring[_ngcontent-%COMP%]{inset:0;border:.5em solid #fff;opacity:.8}.photo-button[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .photo-button[_ngcontent-%COMP%]   .ring[_ngcontent-%COMP%]{transition:all .25s}.photo-button[_ngcontent-%COMP%]:hover   .circle[_ngcontent-%COMP%]{opacity:1;cursor:pointer}.photo-button[_ngcontent-%COMP%]:active   .ring[_ngcontent-%COMP%]{opacity:1}.photo-button[_ngcontent-%COMP%]:active   .circle[_ngcontent-%COMP%]{opacity:.5}.small-text[_ngcontent-%COMP%]{color:#5e5e5e;font-size:.8rem!important;margin-top:.4rem;margin-bottom:1.5rem}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .5s;-moz-animation:fadeIn ease-in .5s;-o-animation:fadeIn ease-in .5s;-ms-animation:fadeIn ease-in .5s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}@media all and (min-width:768px) and (max-width:1024px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}h2[_ngcontent-%COMP%]{margin-top:3rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (min-width:480px) and (max-width:768px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:90%}.larger-button[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.error-float[_ngcontent-%COMP%]{top:4rem}h2[_ngcontent-%COMP%]{margin-top:3rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (max-width:480px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:90%}.larger-button[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.error-float[_ngcontent-%COMP%]{top:4rem}h2[_ngcontent-%COMP%]{margin-top:3rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (max-height:500px){.background[_ngcontent-%COMP%]{justify-content:flex-start}}@media all and (max-height:750px){.background-opened[_ngcontent-%COMP%]{justify-content:flex-start!important}}"]});let t=e;return t})();var kp=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.login=o,this.imageurl="assets/school.png",this.reciveclick=new st,this.autenticazione=i}ngOnInit(){this.group==!1&&(document.getElementById("add-group").style.cssText="display:none !important",document.getElementById("label-add-group").style.cssText="display:none !important")}ngOnChanges(r){this.messagesnotify==0?document.getElementById("messages").getElementsByTagName("span")[0].style.display="none":this.messagesnotify>0&&this.messagesnotify<=9?document.getElementById("messages").getElementsByTagName("span")[0].style.display="inherit":this.messagesnotify>9&&(document.getElementById("messages").getElementsByTagName("span")[0].style.display="inherit",document.getElementById("messages").getElementsByTagName("span")[0].textContent="9+"),this.requestsnotify==0?document.getElementById("accept-request").getElementsByTagName("span")[0].style.display="none":this.requestsnotify>0&&this.requestsnotify<=9?document.getElementById("accept-request").getElementsByTagName("span")[0].style.display="inherit":this.requestsnotify>9&&(document.getElementById("messages").getElementsByTagName("span")[0].style.display="inherit",document.getElementById("accept-request").getElementsByTagName("span")[0].textContent="9+")}mobile(){var r=document.getElementById("myTopnav");r.className==="topnav"?(r.className+=" responsive",r.className+=" fade-in-right"):(r.classList.remove("fade-in-right"),r.className+=" fade-out-left",setTimeout(()=>{r.className="topnav"},450))}sendclick(){this.filterclicked=!this.filterclicked,this.reciveclick.emit(this.filterclicked)}logout(){return b(this,null,function*(){yield this.authService.logout(),this.login.logout(),yield this.router.navigate(["access/login"])})}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Pe),q(Fr))},e.\u0275cmp=pe({type:e,selectors:[["app-navbar"]],inputs:{filterclicked:"filterclicked",group:"group",profileimage:"profileimage",messagesnotify:"messagesnotify",requestsnotify:"requestsnotify",user:"user"},outputs:{reciveclick:"reciveclick"},features:[No],decls:42,vars:5,consts:[[1,"icon","large-stroke",3,"click"],[1,"bi","bi-list"],["id","myTopnav",1,"topnav"],[1,"left-column"],["id","img",1,"displaynotmobile",3,"src"],[1,"middle-column"],["textOne","Studenti","textTwo","Gruppi","toFirst","/userswiper","toSecond","/groupswiper","background","#EEEEEE"],["id","img",1,"displayonlymobile",3,"src"],[1,"right-column"],["routerLink","./search","id","search","name","search"],[1,"bi","bi-search","large-stroke"],["routerLink","./create-group","id","add-group","name","add-group"],[1,"bi","bi-patch-plus-fill"],["id","label-add-group"],["routerLink","./requests","id","accept-request","name","accept-request"],[1,"bi","bi-send-fill"],[1,"badge"],["routerLink","./messages","id","messages","name","messages"],[1,"bi","bi-chat-dots-fill"],["id","filters","name","filters",1,"displayblock",3,"click"],[1,"bi","bi-pencil-fill"],[1,"displaynone"],["id","logout","name","logout",3,"click"],[1,"bi","bi-box-arrow-left","large-stroke-min"],["routerLink","./personal-profile","id","personalprofile","name","personalprofile",1,"display"],[1,"profile",3,"src"]],template:function(i,o){i&1&&(v(0,"a",0),Q("click",function(){return o.mobile()}),U(1,"i",1),_(),v(2,"div",2)(3,"div",3),U(4,"img",4),v(5,"label")(6,"h1"),E(7,"StudyMatch"),_()()(),v(8,"div",5),U(9,"app-segmented-control",6)(10,"img",7),_(),v(11,"div",8)(12,"a",9),U(13,"i",10),_(),v(14,"label"),E(15,"Cerca"),_(),v(16,"a",11),U(17,"i",12),_(),v(18,"label",13),E(19,"Aggiungi un gruppo"),_(),v(20,"a",14)(21,"i",15)(22,"span",16),E(23),_()()(),v(24,"label"),E(25,"Richieste"),_(),v(26,"a",17)(27,"i",18)(28,"span",16),E(29),_()()(),v(30,"label"),E(31,"Messaggi"),_(),v(32,"a",19),Q("click",function(){return o.sendclick()}),U(33,"i",20),_(),v(34,"label",21),E(35,"Filtri"),_(),v(36,"a",22),Q("click",function(){return o.logout()}),U(37,"i",23),_(),v(38,"label"),E(39,"Esci"),_(),v(40,"a",24),U(41,"img",25),_()()()),i&2&&(D(4),L("src",o.imageurl,Me),D(6),L("src",o.imageurl,Me),D(13),he(o.requestsnotify),D(6),he(o.messagesnotify),D(12),L("src",o.user.profileImageURL,Me))},dependencies:[ma,Qf],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.topnav[_ngcontent-%COMP%]{position:fixed;overflow:hidden;display:flex;width:100%;margin-top:1rem;overflow-y:auto}.left-column[_ngcontent-%COMP%], .middle-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%], app-segmented-control[_ngcontent-%COMP%]{display:flex;align-items:center}.left-column[_ngcontent-%COMP%]{justify-content:baseline;flex-direction:row;width:34%;padding-left:1rem}.middle-column[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;width:32%}.right-column[_ngcontent-%COMP%]{justify-content:end;flex-direction:row;width:34%;padding-right:1rem;text-align:center}app-segmented-control[_ngcontent-%COMP%]{justify-content:center;width:90%}img[_ngcontent-%COMP%]{width:4rem}.badge[_ngcontent-%COMP%], .profile[_ngcontent-%COMP%]{border-radius:100%}.profile[_ngcontent-%COMP%]{width:2rem;height:2rem;object-fit:cover;margin:.2rem 0 0 1rem}i[_ngcontent-%COMP%]{position:relative;top:0;margin:1rem;color:#8d8d8d;font-size:1.1rem}a[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#3f3f3f}a[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{transition:.2s;cursor:pointer}.badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-10px;background-color:#007aff;width:auto;min-width:10px;height:auto;min-height:10px;padding:3px 4px 3px 3px;font-size:10px;font-weight:700;text-align:center;color:#fff;box-shadow:0 0 5px #007aff}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}.large-stroke-min[_ngcontent-%COMP%]{-webkit-text-stroke:1.03px}.icon[_ngcontent-%COMP%]{display:none;position:absolute;top:1.45rem;left:.7rem;font-size:1.5rem;z-index:100}.displaynone[_ngcontent-%COMP%], .displayonlymobile[_ngcontent-%COMP%]{display:none!important}.displayonlymobile[_ngcontent-%COMP%]{margin-left:1.5rem}.displayblock[_ngcontent-%COMP%], .displaynotmobile[_ngcontent-%COMP%]{display:block!important}label[_ngcontent-%COMP%]{display:none}.display[_ngcontent-%COMP%]{display:inherit!important}.fade-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInRight ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInRight ease-in .5s;-moz-animation:fadeInRight ease-in .5s;-o-animation:fadeInRight ease-in .5s;-ms-animation:fadeInRight ease-in .5s}.fade-out-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutLeft ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutLeft ease-in .5s;-moz-animation:fadeOutLeft ease-in .5s;-o-animation:fadeOutLeft ease-in .5s;-ms-animation:fadeOutLeft ease-in .5s}@media all and (min-width:750px) and (max-width:900px){.bi-chat-dots-fill[_ngcontent-%COMP%], .bi-send-fill[_ngcontent-%COMP%]{margin:0!important}#accept-request[_ngcontent-%COMP%]{width:2rem}#messages[_ngcontent-%COMP%]{width:2.5rem}}@media screen and (max-width:750px){.topnav.responsive[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{margin:0;width:3rem;height:3rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{width:25%}.middle-column[_ngcontent-%COMP%]{width:50%}.topnav[_ngcontent-%COMP%]{margin:0}.displayonlymobile[_ngcontent-%COMP%], .topnav.responsive[_ngcontent-%COMP%]   .displaynotmobile[_ngcontent-%COMP%], .topnav.responsive[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block!important}.displaynotmobile[_ngcontent-%COMP%], .topnav.responsive[_ngcontent-%COMP%]   .displayblock[_ngcontent-%COMP%], .topnav.responsive[_ngcontent-%COMP%]   .displayonlymobile[_ngcontent-%COMP%], app-segmented-control[_ngcontent-%COMP%]{display:none!important}.topnav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:none}a.icon[_ngcontent-%COMP%]{display:block}.bi-list[_ngcontent-%COMP%], .topnav.responsive[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem}.topnav.responsive[_ngcontent-%COMP%]   .displaynone[_ngcontent-%COMP%], .topnav.responsive[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#464646;margin-top:-4vh}.topnav.responsive[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);background-color:#dbdbdbd0;width:100%;height:100vh;display:flex;flex-direction:column}.topnav.responsive[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%]{margin-top:auto}.right-column[_ngcontent-%COMP%]{padding:1.3rem}.topnav.responsive[_ngcontent-%COMP%]   .right-column[_ngcontent-%COMP%]{margin-bottom:auto;padding:1rem}.topnav.responsive[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%], .topnav.responsive[_ngcontent-%COMP%]   .right-column[_ngcontent-%COMP%]{flex-direction:column;padding:0;margin-right:auto;margin-left:auto}.topnav.responsive[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:5vh}.bi-chat-dots-fill[_ngcontent-%COMP%], .bi-patch-plus-fill[_ngcontent-%COMP%], .bi-pencil-fill[_ngcontent-%COMP%], .bi-send-fill[_ngcontent-%COMP%], .icon[_ngcontent-%COMP%]{margin:0}.topnav.responsive[_ngcontent-%COMP%]   .middle-column[_ngcontent-%COMP%], .topnav.responsive[_ngcontent-%COMP%]   app-segmented-control[_ngcontent-%COMP%]{display:block!important;margin:0 auto;width:80%}.icon[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#707070}a[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#525252}h1[_ngcontent-%COMP%]{margin-top:2.5rem;color:#000}}"]});let t=e;return t})();var P3=["location"],A3=["city"],k3=["faculty"];function R3(t,e){if(t&1){let n=at();v(0,"div",20,1),Q("click",function(){Re(n);let i=Z();return Ne(i.outlinec())}),v(2,"span",9),U(3,"i",21),_(),U(4,"input",22),_()}if(t&2){let n=Z();D(4),Ai("value",n.cityvalue)}}function N3(t,e){if(t&1){let n=at();v(0,"div",23,2),Q("click",function(){Re(n);let i=Z();return Ne(i.outlinef())}),v(2,"span",9),U(3,"i",24),_(),U(4,"input",25),_()}if(t&2){let n=Z();D(4),Ai("value",n.facultyvalue)}}var Rp=(()=>{let e=class e{constructor(r){this.renderer=r,this.outlineb=!1,this.outlinebc=!1,this.outlinebf=!1,this.timevalue_1="",this.timevalue_2="",this.locationvalue="",this.cityvalue="",this.facultyvalue="",window.location.pathname.includes("groupswiper")?this.group=!0:this.group=!1,localStorage.getItem("time")!=null&&(this.timevalue_1=localStorage.getItem("time").split("-")[0],this.timevalue_2=localStorage.getItem("time").split("-")[1]),localStorage.getItem("location")!=null&&(this.locationvalue=localStorage.getItem("location")),localStorage.getItem("city")!=null&&(this.cityvalue=localStorage.getItem("city")),localStorage.getItem("faculty")!=null&&(this.facultyvalue=localStorage.getItem("faculty")),this.renderer.listen("window","click",i=>{var o=document.getElementById("location");this.outlineb==!0&&i.target!==this.location.nativeElement.children[0]&&i.target!==this.location.nativeElement.children[1]&&i.target!==this.location.nativeElement.children[0].children[0]&&(o.classList.remove("outline"),this.outlineb=!1);var s=document.getElementById("city"),a=document.getElementById("faculty");s!=null&&a!=null&&(this.outlinebc==!0&&i.target!==this.city.nativeElement.children[0]&&i.target!==this.city.nativeElement.children[1]&&i.target!==this.city.nativeElement.children[0].children[0]&&(s.classList.remove("outline"),this.outlinebc=!1),this.outlinebf==!0&&i.target!==this.faculty.nativeElement.children[0]&&i.target!==this.faculty.nativeElement.children[1]&&i.target!==this.faculty.nativeElement.children[0].children[0]&&(a.classList.remove("outline"),this.outlinebf=!1))}),isNaN(parseInt(localStorage.getItem("age")))||(this.agevalue=parseInt(localStorage.getItem("age")))}outline(){var r=document.getElementById("location");r.classList.add("outline"),this.outlineb=!0}outlinec(){var r=document.getElementById("city");r.classList.add("outline"),this.outlinebc=!0}outlinef(){var r=document.getElementById("faculty");r.classList.add("outline"),this.outlinebf=!0}captureMouseEvent(r){this.mouseX=r.clientX,this.mouseY=r.clientY}floatlabel(r){this.agevalue=r.target.value;var i=document.getElementById("float-bubble"),o=document.getElementById("age"),s=document.getElementById("age").getBoundingClientRect().x;i.style.display="block",i.style.left=this.mouseX-s+.5+"px",o.setAttribute("disabled",""),setTimeout(()=>{i.classList.remove("fade-in"),i.classList.add("fade-out")},1e3),setTimeout(()=>{i.style.display="none",o.removeAttribute("disabled"),i.classList.remove("fade-out"),i.classList.add("fade-in")},1100)}filter(){var r=document.getElementById("time-1").value,i=document.getElementById("time-2").value,o=document.getElementById("locationsearch").value,s=document.getElementById("citysearch")?.value,a=document.getElementById("facultysearch")?.value,c=document.getElementById("age").value;localStorage.setItem("age",c),localStorage.setItem("location",o),localStorage.setItem("city",s),localStorage.setItem("faculty",a),localStorage.setItem("time",r+"-"+i),window.location.reload()}reset(){localStorage.removeItem("age"),localStorage.removeItem("location"),localStorage.removeItem("city"),localStorage.removeItem("faculty"),localStorage.removeItem("time"),window.location.reload()}};e.\u0275fac=function(i){return new(i||e)(q(Kt))},e.\u0275cmp=pe({type:e,selectors:[["app-filter"]],viewQuery:function(i,o){if(i&1&&(Lo(P3,5),Lo(A3,5),Lo(k3,5)),i&2){let s;ki(s=Ri())&&(o.location=s.first),ki(s=Ri())&&(o.city=s.first),ki(s=Ri())&&(o.faculty=s.first)}},decls:32,vars:7,consts:[["location",""],["city",""],["faculty",""],["id","block",1,"block"],[1,"content"],[1,"time"],["type","time","id","time-1",3,"value"],["type","time","id","time-2",3,"value"],["id","location",1,"searchbox",3,"click"],["type","submit",1,"searchboxicon"],[1,"bi","bi-geo-alt-fill"],["type","text","placeholder","Luogo di frequentazione","id","locationsearch","name","search",3,"value"],["id","city","class","searchbox",3,"click",4,"ngIf"],["id","faculty","class","searchbox",3,"click",4,"ngIf"],[1,"margin-top"],[1,"age"],["for","age"],["id","age","type","range","min","18","max","99",3,"pointermove","change","value"],["id","float-bubble","for","age",1,"float-bubble","fade-in"],[3,"click"],["id","city",1,"searchbox",3,"click"],[1,"bi","bi-building-fill"],["type","text","placeholder","Citt\xE0","id","citysearch","name","search",3,"value"],["id","faculty",1,"searchbox",3,"click"],[1,"bi","bi-backpack-fill"],["type","text","placeholder","Facolt\xE0","id","facultysearch","name","search",3,"value"]],template:function(i,o){if(i&1){let s=at();v(0,"div",3)(1,"div",4)(2,"h3"),E(3,"Informazioni scolastiche"),_(),v(4,"div",5)(5,"p"),E(6,"Dalle"),_(),U(7,"input",6),v(8,"p"),E(9,"alle"),_(),U(10,"input",7),_(),v(11,"div",8,0),Q("click",function(){return Re(s),Ne(o.outline())}),v(13,"span",9),U(14,"i",10),_(),U(15,"input",11),_(),ae(16,R3,5,1,"div",12)(17,N3,5,1,"div",13),v(18,"h3",14),E(19,"Et\xE0"),_(),v(20,"div",15)(21,"label",16),E(22,"18"),_(),v(23,"input",17),Q("pointermove",function(c){return Re(s),Ne(o.captureMouseEvent(c))})("change",function(c){return Re(s),Ne(o.floatlabel(c))}),_(),v(24,"label",16),E(25,"99"),_(),v(26,"label",18),E(27),_()(),v(28,"button",19),Q("click",function(){return Re(s),Ne(o.filter())}),E(29,"Filtra"),_(),v(30,"button",19),Q("click",function(){return Re(s),Ne(o.reset())}),E(31,"Reset"),_()()()}i&2&&(D(7),Ai("value",o.timevalue_1),D(3),Ai("value",o.timevalue_2),D(5),Ai("value",o.locationvalue),D(),L("ngIf",!o.group),D(),L("ngIf",!o.group),D(6),Ai("value",o.agevalue),D(4),he(o.agevalue))},dependencies:[Ke],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.block[_ngcontent-%COMP%]{position:absolute;top:4.5rem;right:4.5rem;background-color:#ffffffd2;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);border-radius:14px;width:25%;height:auto;padding:.3rem 0;filter:drop-shadow(0 10px 20px rgba(0,0,0,.281))}.content[_ngcontent-%COMP%]{width:100%;height:100%;margin:1rem}h3[_ngcontent-%COMP%]{font-weight:600;margin:0;font-size:.95rem}p[_ngcontent-%COMP%]{font-size:.8rem}.margin-top[_ngcontent-%COMP%]{margin-top:1rem}.time[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}input[type=time][_ngcontent-%COMP%]{width:2rem;height:1.5rem;margin:.5rem;border-radius:6px;padding:.1rem .3rem;background-color:#7878801f;border:0;color:#007aff;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;-webkit-user-select:none;user-select:none;box-shadow:none;font-size:.65rem;text-align:center;transition:.1s}input[type=time][_ngcontent-%COMP%]:focus{outline:solid 2px #007aff;transition:.1s}input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{display:block;top:0;right:0;position:absolute;background:0 0}input[type=text][_ngcontent-%COMP%]{width:100%;height:1.5rem;border-radius:0 6px 6px 0;padding:.1rem .3rem;border:0;color:#007aff;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;-webkit-user-select:none;user-select:none;box-shadow:none;text-align:left;outline:0;transition:.1s}.searchbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:85%;border-radius:8px;margin-bottom:.6rem}.searchboxicon[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-size:.7rem;background-color:#7878801f}.searchboxicon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:1rem;color:#787880e5;transition:.3s;margin:0;border-radius:8px 0 0 8px;padding-left:.3rem}.outline[_ngcontent-%COMP%]{outline:solid 2px #007aff;transition:.1s}.age[_ngcontent-%COMP%]{position:relative;width:90%;display:flex;align-items:center;margin-top:.3rem}input[type=range][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;background:#7878801f;width:85%;height:.3rem;border-radius:100px;transition:.1s}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:1.1rem;height:1.1rem;background:#fff;border-radius:100px;cursor:pointer;filter:drop-shadow(0 .5px 4px #0000001c)}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{-webkit-appearance:none;appearance:none;width:1.1rem;height:1.1rem;background:#fff;border-radius:100px;cursor:pointer;filter:drop-shadow(0 .5px 4px #0000001c)}label[_ngcontent-%COMP%]{font-size:.8rem;margin:.1rem}.float-bubble[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{border-radius:10px;transition:.1s}.float-bubble[_ngcontent-%COMP%]{display:none;position:absolute;top:1.25rem;background-color:#6b6b6b4d;color:#00000080;padding:.2rem .4rem}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem .8rem;margin-right:.7rem;margin-top:2rem}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transition:.1s}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .1s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .1s;-moz-animation:fadeIn ease-in .1s;-o-animation:fadeIn ease-in .1s;-ms-animation:fadeIn ease-in .1s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .1s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .1s;-moz-animation:fadeOut ease-in .1s;-o-animation:fadeOut ease-in .1s;-ms-animation:fadeOut ease-in .1s}@media all and (min-width:768px) and (max-width:1200px){.block[_ngcontent-%COMP%]{width:35%;padding:.3rem}}@media all and (min-width:480px) and (max-width:768px){.block[_ngcontent-%COMP%]{width:50%;padding:.4rem}}@media all and (max-width:480px){.block[_ngcontent-%COMP%]{width:70%;padding:.5rem 1.1rem .5rem .5rem}}"]});let t=e;return t})();var F3=t=>({"background-image":t});function L3(t,e){t&1&&U(0,"i",3)}var jP=(()=>{let e=class e{constructor(r){this.renderer=r,this.click=!1,this.url="../../../assets/image.png",this.rejected=new st,this.accepted=new st}ngAfterViewInit(){var r=document.getElementById("card-"+this.number);let i=this.movemouse(this.number),o=this.movetouch(this.number);document.getElementsByClassName("card")[0].classList.add("grab"),window.addEventListener("pointerdown",s=>{s.target==document.getElementsByClassName("card")[0]&&(document.getElementsByClassName("card")[0].classList.remove("grab"),window.addEventListener("mousemove",i),document.getElementsByClassName("cards")[0].classList.add("grabbed"))},!1),window.addEventListener("touchstart",s=>{s.target==document.getElementsByClassName("card")[0]&&window.addEventListener("touchmove",o)},!1),window.addEventListener("pointerup",s=>{let a=document.getElementsByClassName("card")[0];if(window.location.pathname=="/userswiper"&&a!=null){a.classList.add("grab"),document.getElementsByClassName("cards")[0].classList.remove("grabbed"),window.removeEventListener("mousemove",i);var c=200;window.innerWidth>500?c=200:window.innerWidth<=500&&(c=80),r.style.transform!="rotate(5deg) translateX("+c+"px)"&&r.style.transform!="rotate(-5deg) translateX(-"+c+"px)"?setTimeout(()=>{r.style.transform="translateX(0px)",r.classList.remove("red"),r.classList.remove("green")},200):s.clientX>r.getBoundingClientRect().left+r.clientWidth/2?this.accept():s.clientX<r.getBoundingClientRect().left+r.clientWidth/2&&this.reject()}},!1),window.addEventListener("touchend",s=>{if(window.location.pathname=="/userswiper"){window.removeEventListener("touchmove",o);var a=200;window.innerWidth>500?a=200:window.innerWidth<=500&&(a=80),r.style.transform!="rotate(5deg) translateX("+a+"px)"&&r.style.transform!="rotate(-5deg) translateX(-"+a+"px)"?setTimeout(()=>{r.style.transform="translateX(0px)",r.classList.remove("red"),r.classList.remove("green")},200):s.changedTouches[0].clientX>r.getBoundingClientRect().left+r.clientWidth/2?this.accept():s.changedTouches[0].clientX<r.getBoundingClientRect().left+r.clientWidth/2&&this.reject()}},!1)}accept(){var r=document.getElementById("card-"+this.number);r?.classList.add("fade-out"),setTimeout(()=>{this.accepted.emit()},150)}reject(){var r=document.getElementById("card-"+this.number);r?.classList.add("fade-out"),setTimeout(()=>{this.rejected.emit()},150)}movemouse(r){var i=document.getElementById("card-"+r);return function(o){var s=o.clientX,a=i.getBoundingClientRect().left,c=200;window.innerWidth>500?c=200:window.innerWidth<=500&&(c=80),s>a+i.clientWidth/2?s-(a+i.clientWidth/2)<c?(i.style.transform="rotate(5deg) translateX("+(s-(a+i.clientWidth/2))+"px)",i.classList.remove("red"),i.classList.remove("green")):(i.style.transform="rotate(5deg) translateX("+c+"px)",i.classList.remove("red"),i.classList.add("green")):s-(a+i.clientWidth/2)>-c?(i.style.transform="rotate(-5deg) translateX("+(s-(a+i.clientWidth/2))+"px)",i.classList.remove("red"),i.classList.remove("green")):(i.style.transform="rotate(-5deg)  translateX(-"+c+"px)",i.classList.remove("green"),i.classList.add("red"))}}movetouch(r){var i=document.getElementById("card-"+r);return function(o){var s=o.touches[0].clientX,a=i.getBoundingClientRect().left,c=200;window.innerWidth>500?c=200:window.innerWidth<=500&&(c=80),s>a+i.clientWidth/2?s-(a+i.clientWidth/2)<c?(i.style.transform="rotate(5deg) translateX("+(s-(a+i.clientWidth/2))+"px)",i.classList.remove("red"),i.classList.remove("green")):(i.style.transform="rotate(5deg) translateX("+c+"px)",i.classList.remove("red"),i.classList.add("green")):s-(a+i.clientWidth/2)>-c?(i.style.transform="rotate(-5deg) translateX("+(s-(a+i.clientWidth/2))+"px)",i.classList.remove("red"),i.classList.remove("green")):(i.style.transform="rotate(-5deg)  translateX(-"+c+"px)",i.classList.remove("green"),i.classList.add("red"))}}};e.\u0275fac=function(i){return new(i||e)(q(Kt))},e.\u0275cmp=pe({type:e,selectors:[["app-card"]],inputs:{number:"number",user:"user"},outputs:{rejected:"rejected",accepted:"accepted"},decls:7,vars:8,consts:[[1,"card","prevent-select","fade-in",3,"id","ngStyle"],[1,"bottom"],["class","bi bi-patch-check-fill verify",4,"ngIf"],[1,"bi","bi-patch-check-fill","verify"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"p")(3,"b"),E(4),_(),E(5),ae(6,L3,1,0,"i",2),_()()()),i&2&&(L("id","card-"+o.number)("ngStyle",_M(6,F3,"url("+o.user.profileImageURL+")")),D(4),Lt("",o.user.surname," ",o.user.name,""),D(),tt(", ",o.user.age," "),D(),L("ngIf",o.user.verified))},dependencies:[Ke,qM],styles:['@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.card[_ngcontent-%COMP%]{position:relative;background-size:cover;background-position:center;width:20rem;height:30rem;border-radius:28px;transition:.4s;z-index:inherit;filter:drop-shadow(2px 0 10px rgba(0,0,0,.425))}.card[_ngcontent-%COMP%]:after{position:absolute;content:"";width:100%;height:100%;background-color:transparent;border-radius:28px;transition:.5s}.grab[_ngcontent-%COMP%]{cursor:grab}.green[_ngcontent-%COMP%]:after, .red[_ngcontent-%COMP%]:after{content:url("./media/dislike-1-3Q2HBASN.svg");display:flex;justify-content:center;align-items:center;background-color:#3002029d;transition:.4s;box-shadow:0 0 10px red;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.green[_ngcontent-%COMP%]:after{content:url("./media/like-1-C5B22TEW.svg");background-color:#0a360e9d;box-shadow:0 0 10px green}.bottom[_ngcontent-%COMP%]{position:absolute;bottom:1rem;width:100%}.bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none;color:#fff;text-shadow:1px 1px 3px rgba(0,0,0,.623);margin:1rem;font-size:1.2rem}.prevent-select[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none}.verify[_ngcontent-%COMP%]{margin-left:.1rem;margin-top:.2rem;font-size:1.1rem;color:#007aff;text-shadow:0 0 5px #fff}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .5s;-moz-animation:fadeIn ease-in .5s;-o-animation:fadeIn ease-in .5s;-ms-animation:fadeIn ease-in .5s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}@media all and (max-width:700px){.bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}}']});let t=e;return t})();function U3(t,e){t&1&&(v(0,"div",12),U(1,"div",13),_())}function j3(t,e){if(t&1){let n=at();v(0,"app-navbar",14),Q("reciveclick",function(i){Re(n);let o=Z();return Ne(o.reciveclick(i))}),_()}if(t&2){let n=Z();L("group",!1)("requestsnotify",n.numberkeys(n.user.requests))("messagesnotify",n.numberkeys(n.user.matched))("filterclicked",n.filterclicked)("user",n.user)}}function B3(t,e){if(t&1){let n=at();v(0,"app-card",16),Q("accepted",function(){Re(n);let i=Z(2);return Ne(i.handleaccept())})("rejected",function(){Re(n);let i=Z(2);return Ne(i.handlereject())}),_()}if(t&2){let n=Z(2);L("number",n.id)("user",n.actualcard)}}function $3(t,e){if(t&1&&(v(0,"div"),ae(1,B3,1,2,"app-card",15),_()),t&2){let n=e.$implicit,r=e.index,i=Z();D(),L("ngIf",r===i.id&&!i.accepted.includes[n.id]&&!i.rejected.includes[n.id])}}function z3(t,e){t&1&&(v(0,"h4",17),U(1,"i",18),E(2," I possibili match sono finiti..."),_())}function q3(t,e){t&1&&(v(0,"div",19)(1,"p"),E(2,"Esplora il profilo"),_(),U(3,"i",20),_())}function H3(t,e){t&1&&U(0,"i",31)}function G3(t,e){t&1&&(v(0,"p",32),E(1,"In comune con te:"),_())}function W3(t,e){if(t&1&&(v(0,"button"),E(1),_()),t&2){let n=e.$implicit;D(),he(n)}}function K3(t,e){if(t&1&&(v(0,"div",33),ae(1,W3,2,1,"button",8),_()),t&2){let n=Z(3);D(),L("ngForOf",n.comuneThings)}}function Y3(t,e){if(t&1&&(v(0,"div",23)(1,"div",24)(2,"h2"),E(3),ae(4,H3,1,0,"i",25),_(),v(5,"p")(6,"b"),E(7,"Informazioni"),_(),E(8),_(),v(9,"p")(10,"b"),E(11,"Luogo e orario"),_(),E(12),_(),v(13,"p",26),E(14),_(),ae(15,G3,2,0,"p",27)(16,K3,2,1,"div",28),_(),v(17,"div",29),U(18,"img",30),_()()),t&2){let n=Z(2);D(3),Lt("",n.actualcard.surname," ",n.actualcard.name,""),D(),L("ngIf",n.actualcard.verified),D(4),In(": ",n.actualcard.age,", ",n.actualcard.city,", ",n.actualcard.faculty,""),D(4),tt(": ",n.actualcard.locationAndTime,""),D(2),he(n.actualcard.description),D(),L("ngIf",n.comuneThings.length>0),D(),L("ngIf",n.comuneThings.length>0),D(2),L("src",n.actualcard.profileImageURL,Me)}}function Q3(t,e){if(t&1&&(v(0,"div",21),ae(1,Y3,19,11,"div",22),_()),t&2){let n=Z();D(),L("ngIf",n.actualcard!=null)}}var BP=(()=>{let e=class e{constructor(r,i,o,s){this.router=r,this.renderer=i,this.authService=o,this.firestore=s,this.filterclicked=!1,this.scrolling=!1,this.id=0,this.vectorUsers=[],this.isLoading=!0,this.comuneThings=[],this.autenticazione=o,this.db=s,this.renderer.listen("window","click",a=>{if(window.location.pathname.startsWith("/userswiper")){var c=document.getElementsByTagName("app-filter")[0],u=document.getElementsByTagName("app-navbar")[0].lastChild.lastChild.childNodes[8];this.filterclicked==!0&&!c.contains(a.target)&&!u.contains(a.target)&&(c.classList.remove("fade-in"),c.classList.add("fade-out"),setTimeout(()=>{c.style.display="none",c.classList.add("fade-in"),c.classList.remove("fade-out")},200),this.filterclicked=!1)}}),this.renderer.listen("window","wheel",a=>{if(window.location.pathname=="/userswiper"&&this.isLoading==!1)if(a.deltaY>0){var c=document.documentElement.scrollTop?document.documentElement:document.body;c.scrollTo({top:c.scrollTop+window.innerHeight,behavior:"smooth"})}else{var c=document.documentElement.scrollTop?document.documentElement:document.body;c.scrollTo({top:c.scrollTop-window.innerHeight,behavior:"smooth"})}}),this.renderer.listen("window","touchstart",a=>{this.coordstart=a.touches[0].clientY}),this.renderer.listen("window","touchmove",a=>{if(window.location.pathname=="/userswiper"&&this.isLoading==!1){if(a.touches[0].clientY-this.coordstart+100<0){var c=document.documentElement.scrollTop?document.documentElement:document.body;c.scrollTo({top:c.scrollTop+window.innerHeight,behavior:"smooth"})}else if(this.coordstart-a.touches[0].clientY+100<0){var c=document.documentElement.scrollTop?document.documentElement:document.body;c.scrollTo({top:c.scrollTop-window.innerHeight,behavior:"smooth"})}}})}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData(),setTimeout(()=>{document.getElementById("overlay").classList.add("fade-out"),setTimeout(()=>{if(this.isLoading=!1,!("Notification"in window))this.error("Questo dispositivo non supporta le notifiche.");else if(Notification.permission=="default"){let r=document.getElementById("notify");r.style.display="flex"}},200)},500)}catch(r){throw r}})}matchesFilter(r){let i=parseInt(localStorage.getItem("age")||"NaN"),o=localStorage.getItem("time"),s=localStorage.getItem("location"),a=localStorage.getItem("city"),c=localStorage.getItem("faculty");return(isNaN(i)||r.age<i+5&&r.age>i-5)&&(o===null||o==="-"||r.locationAndTime.toLowerCase().indexOf(o.toLowerCase())!=-1)&&(s===null||s===""||r.locationAndTime.toLowerCase().indexOf(s.toLowerCase())!=-1)&&(a===null||a===""||r.city.toLowerCase().indexOf(a.toLowerCase())!=-1)&&(c===null||c===""||r.faculty.toLowerCase().indexOf(c.toLowerCase())!=-1)}findComuneThings(){if(this.comuneThings=[],this.actualcard!=null&&this.user!=null){var r=this.actualcard.locationAndTime.split(",")[0].trim().toLowerCase().replace(/\s+/g,""),i=this.actualcard.locationAndTime.split(",")[1].trim().toLowerCase().replace(/\s+/g,""),o=this.user.locationAndTime.split(",")[0].trim().toLowerCase().replace(/\s+/g,""),s=this.user.locationAndTime.split(",")[1].trim().toLowerCase().replace(/\s+/g,""),a=this.user.city.split(",")[0].trim().toLowerCase().replace(/\s+/g,""),c=this.actualcard.city.trim().toLowerCase().replace(/\s+/g,""),u=this.user.faculty.trim().toLowerCase().replace(/\s+/g,""),d=this.actualcard.faculty.trim().toLowerCase().replace(/\s+/g,"");r==o&&this.comuneThings.push("Luogo: "+this.actualcard.locationAndTime.split(",")[0].trim()),i==s&&this.comuneThings.push("Orario: "+this.actualcard.locationAndTime.split(",")[1].trim()),c==a&&this.comuneThings.push("Citt\xE0: "+this.actualcard.city.trim()),d==u&&this.comuneThings.push("Facolt\xE0: "+this.actualcard.faculty.trim())}}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser());this.user=yield K(this.firestore.getItem("user",r.uid)),this.user&&(this.accepted=this.user.accepted,this.rejected=this.user.rejected);let i=yield K(this.firestore.getItems("user"));this.vectorUsers=i.filter(o=>o.id!==r.uid&&o.completed&&this.accepted.indexOf(o.id)==-1&&this.rejected.indexOf(o.id)==-1&&this.matchesFilter(o)),this.actualcard=this.vectorUsers[0],this.findComuneThings()}catch(r){throw r}})}reciveclick(r){this.filterclicked=r;var i=document.getElementsByTagName("app-filter")[0];this.filterclicked?i.style.display="block":(i.classList.remove("fade-in"),i.classList.add("fade-out"),setTimeout(()=>{i.style.display="none",i.classList.add("fade-in"),i.classList.remove("fade-out")},200))}savedata(){return b(this,null,function*(){try{let r=yield K(this.autenticazione.getUser());yield this.db.updateItem("user",r.uid,{rejected:this.rejected,accepted:this.accepted}),this.user=yield K(this.db.getItem("user",r.uid))}catch(r){throw r}})}deleteUselessInformation(r){return delete r.requests,delete r.matched,r}sendNotification(r){if("Notification"in window&&Notification.permission=="granted"){var i=new Notification("Match!",{lang:"it",body:"Hai appena fatto un match con "+r,icon:"studymatch.ico"});Notification.requestPermission().then(o=>{o==="granted"&&navigator.serviceWorker.ready.then(s=>{s.showNotification("Match!",{lang:"it",body:"Hai appena fatto un match con "+r,icon:"studymatch.ico"})})})}}sendrequest(r){return b(this,null,function*(){try{let i=yield K(this.autenticazione.getUser()),[o,s]=yield Promise.all([K(this.db.getItem("user",i.uid)),K(this.db.getItem("user",r))]),a,c,u,d;o.requests[r]!==void 0?(delete o.requests[r],d=o.matched,u=o.requests,a=s.matched,delete s.matched,a[i.uid]=this.deleteUselessInformation(o),d[r]=this.deleteUselessInformation(s),this.sendNotification(s.surname+" "+s.name),yield this.db.updateItem("user",i.uid,{matched:d,requests:u}),yield this.db.updateItem("user",r,{matched:a})):s.accepted.indexOf(i.uid)!=-1?(a=s.matched,d=o.matched,delete s.matched,a[i.uid]=this.deleteUselessInformation(o),d[r]=this.deleteUselessInformation(s),this.sendNotification(s.surname+" "+s.name),yield this.db.updateItem("user",i.uid,{matched:d}),yield this.db.updateItem("user",r,{matched:a})):(c=s.requests,c[i.uid]=this.deleteUselessInformation(o),yield this.db.updateItem("user",r,{requests:c}))}catch(i){throw i}})}handleaccept(){return b(this,null,function*(){try{yield this.sendrequest(this.vectorUsers[this.id].id),this.accepted.push(this.vectorUsers[this.id].id),yield this.savedata(),this.id++,this.actualcard=this.vectorUsers[this.id],this.findComuneThings()}catch(r){throw r}})}handlereject(){return b(this,null,function*(){try{this.rejected.push(this.vectorUsers[this.id].id),yield this.savedata(),this.id++,this.actualcard=this.vectorUsers[this.id],this.findComuneThings()}catch(r){throw r}})}error(r){let i=document.getElementById("error");i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400)}requestNotifies(r){let i=document.getElementById("notify");r?Notification.requestPermission().then(o=>{setTimeout(()=>{i.classList.add("fade-out-bubble")},100),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},500)}):(setTimeout(()=>{i.classList.add("fade-out-bubble")},100),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},500))}numberkeys(r){return Object.keys(r).length}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Kt),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-userswiper"]],decls:22,vars:7,consts:[["class","overlay","id","overlay",4,"ngIf"],["id","error",1,"error-float","fade-in-bubble"],["id","notify",1,"notify-float","fade-in-bubble"],[1,"bi","bi-bell-fill"],[3,"click"],[3,"group","requestsnotify","messagesnotify","filterclicked","user","reciveclick",4,"ngIf"],[1,"fade-in"],[1,"cards"],[4,"ngFor","ngForOf"],["class","end-match",4,"ngIf"],["class","explore",4,"ngIf"],["class","profile-info",4,"ngIf"],["id","overlay",1,"overlay"],[1,"spinner"],[3,"reciveclick","group","requestsnotify","messagesnotify","filterclicked","user"],["class","middle-card",3,"number","user","accepted","rejected",4,"ngIf"],[1,"middle-card",3,"accepted","rejected","number","user"],[1,"end-match"],[1,"bi","bi-emoji-frown-fill"],[1,"explore"],[1,"bi","bi-chevron-compact-down"],[1,"profile-info"],["class","block",4,"ngIf"],[1,"block"],[1,"left-column"],["class","bi bi-patch-check-fill verify",4,"ngIf"],[1,"descrizione"],["class","small-text",4,"ngIf"],["class","comune",4,"ngIf"],[1,"right-column"],[3,"src"],[1,"bi","bi-patch-check-fill","verify"],[1,"small-text"],[1,"comune"]],template:function(i,o){i&1&&(ae(0,U3,2,0,"div",0),v(1,"div",1)(2,"h6"),E(3,"Errore"),_(),v(4,"p"),E(5),_()(),v(6,"div",2)(7,"p"),U(8,"i",3),E(9," Vuoi ricevere le notifiche?"),_(),v(10,"button",4),Q("click",function(){return o.requestNotifies(!0)}),E(11,"Si"),_(),v(12,"button",4),Q("click",function(){return o.requestNotifies(!1)}),E(13,"No"),_()(),ae(14,j3,1,5,"app-navbar",5),U(15,"app-filter",6),v(16,"div",7),ae(17,$3,2,1,"div",8)(18,z3,3,0,"h4",9)(19,q3,4,0,"div",10),_(),ae(20,Q3,2,1,"div",11),U(21,"router-outlet")),i&2&&(L("ngIf",o.isLoading),D(5),he(o.message),D(9),L("ngIf",o.user!=null),D(3),L("ngForOf",o.vectorUsers),D(),L("ngIf",o.id>=o.vectorUsers.length),D(),L("ngIf",!(o.id>=o.vectorUsers.length)),D(),L("ngIf",!(o.id>=o.vectorUsers.length)))},dependencies:[kt,Ke,ir,kp,Rp,jP],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}app-filter[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:0;width:100%;z-index:98!important}app-navbar[_ngcontent-%COMP%]{position:absolute;z-index:99}.cards[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center;flex-direction:row;z-index:0}app-card[_ngcontent-%COMP%]{margin:1rem}.cards[_ngcontent-%COMP%], .middle-card[_ngcontent-%COMP%]{position:relative}.explore[_ngcontent-%COMP%], .profile-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.explore[_ngcontent-%COMP%]{position:absolute;flex-direction:column;bottom:1rem;font-size:.9rem;color:#b1b1b1;text-shadow:0 0 5px rgba(0,0,0,.116)}.explore[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem}.profile-info[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;background-color:#fafafa;box-shadow:inset 3px 4px 30px #0000003b}.block[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:14px;width:60%;height:70%;padding:1rem 0;box-shadow:3px 4px 30px #0000001a;display:flex;align-items:stretch}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{width:50%;height:100%;display:flex;justify-content:center}.left-column[_ngcontent-%COMP%]{align-items:flex-start;flex-direction:column;margin-left:3rem}.right-column[_ngcontent-%COMP%]{min-height:100%;align-items:center}h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-top:2rem!important}.left-column[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:.7rem}.descrizione[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:left;font-style:italic}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem;margin:.4rem;border-radius:10px;transition:.1s}.right-column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:90%;width:70%;border-radius:20px;object-fit:cover}.end-match[_ngcontent-%COMP%]{color:#0000003b;font-size:2rem;font-weight:500;text-align:center}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffffffa;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;z-index:1000;transition:opacity .5s ease}.spinner[_ngcontent-%COMP%]{border:10px solid #dfdfdf;border-top:10px solid #6d6d6d;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.grabbed[_ngcontent-%COMP%]{cursor:grabbing!important}.small-text[_ngcontent-%COMP%]{margin:0 0 0 .7rem;font-size:.8rem}.comune[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin:.1rem 1rem 1rem .7rem}.comune[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:0}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .2s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .2s;-moz-animation:fadeIn ease-in .2s;-o-animation:fadeIn ease-in .2s;-ms-animation:fadeIn ease-in .2s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .3s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .3s;-moz-animation:fadeOut ease-in .3s;-o-animation:fadeOut ease-in .3s;-ms-animation:fadeOut ease-in .3s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}b[_ngcontent-%COMP%]{font-weight:400}.verify[_ngcontent-%COMP%]{margin-left:.5rem;font-size:1.2rem;color:#007aff}.error-float[_ngcontent-%COMP%], .notify-float[_ngcontent-%COMP%]{display:none;position:absolute;transform:translate(-50%);border-radius:10px;z-index:100;height:4rem;align-items:center;justify-content:center;padding:.5rem}.error-float[_ngcontent-%COMP%]{top:2rem;left:50%;width:14rem;background-color:#fa7979ed;box-shadow:1px 10px 10px #c43b3b3f;flex-direction:column}.error-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-size:.8rem;margin:0}h6[_ngcontent-%COMP%]{color:#fff}.error-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-weight:400;text-align:center}.notify-float[_ngcontent-%COMP%]{bottom:2rem;left:12vw;width:20rem;background-color:#4b4b4bed;box-shadow:2px 4px 10px #0202023f}.notify-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffdc;font-size:.9rem;font-weight:400;margin:0 .5rem 0 0;text-align:left}.comune[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .notify-float[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.notify-float[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:2rem;background-color:#272727c7!important;transition:.5s}.notify-float[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#000000c7!important;transition:.5s;cursor:pointer}@media all and (min-width:1300px) and (max-width:1640px){.notify-float[_ngcontent-%COMP%]{left:14vw}}@media all and (min-width:1070px) and (max-width:1300px){.notify-float[_ngcontent-%COMP%]{left:16vw}}@media all and (min-width:768px) and (max-width:1070px){.block[_ngcontent-%COMP%]{width:80%}.notify-float[_ngcontent-%COMP%]{left:20vw}}@media all and (min-width:480px) and (max-width:768px){.block[_ngcontent-%COMP%]{width:85%;height:auto;flex-direction:column}h2[_ngcontent-%COMP%]{margin-top:1rem!important}.left-column[_ngcontent-%COMP%]{width:90%;height:auto;margin-left:1rem;text-align:left}.error-float[_ngcontent-%COMP%]{top:4rem}.right-column[_ngcontent-%COMP%]{width:100%;height:auto;min-height:50%;margin-left:0;text-align:left}.right-column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%;height:100%;max-height:24rem;margin-bottom:1rem}.notify-float[_ngcontent-%COMP%]{left:50vw}}@media all and (max-width:480px){.block[_ngcontent-%COMP%], .left-column[_ngcontent-%COMP%]{width:90%;height:auto}.block[_ngcontent-%COMP%]{flex-direction:column}h2[_ngcontent-%COMP%]{margin-top:1rem!important}.left-column[_ngcontent-%COMP%]{margin-left:1rem;text-align:left}.error-float[_ngcontent-%COMP%]{top:4rem}.right-column[_ngcontent-%COMP%]{width:100%;height:auto;min-height:50%;margin-left:0;text-align:left}.right-column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:90%;max-height:22.5rem;margin-bottom:1rem}.notify-float[_ngcontent-%COMP%]{left:50vw}}"]});let t=e;return t})();function Z3(t,e){t&1&&U(0,"i",18)}function X3(t,e){if(t&1){let n=at();Jn(0),U(1,"img",11),v(2,"div",12)(3,"h3"),E(4),ae(5,Z3,1,0,"i",13),_(),v(6,"p"),E(7),_(),v(8,"p"),E(9),_(),v(10,"p",14),E(11),_(),v(12,"button",15),Q("click",function(){Re(n);let i=Z().$implicit,o=Z();return Ne(o.accept(i.value.id))}),E(13,"Accetta"),_(),v(14,"button",16),Q("click",function(){Re(n);let i=Z().$implicit,o=Z();return Ne(o.reject(i.value.id))}),U(15,"i",17),_()(),er()}if(t&2){let n=Z().$implicit;D(),L("src",n.value.profileImageURL,Me),D(3),Lt("",n.value.surname," ",n.value.name,""),D(),L("ngIf",n.value.verified),D(2),In("",n.value.age,", ",n.value.city,", ",n.value.faculty,""),D(2),he(n.value.locationAndTime),D(2),he(n.value.description)}}function J3(t,e){if(t&1&&(v(0,"div",9),ae(1,X3,16,9,"ng-container",10),_()),t&2){let n=e.$implicit,r=Z();L("id","profile-"+n.value.id),D(),L("ngIf",!r.accepted.includes[n.value.id]&&!r.rejected.includes[n.value.id])}}function e$(t,e){t&1&&(v(0,"h4",19),E(1,"Nessuna richiesta..."),_())}var $P=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.firestore=o,this.autenticazione=i,this.db=o}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData()}catch(r){throw r}})}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser()),i=yield K(this.db.getItem("user",r.uid));this.user=i,this.requests=i.requests,this.accepted=i.accepted,this.rejected=i.rejected}catch(r){throw r}})}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}savedata(r){return b(this,null,function*(){try{let i=te({},this.requests);(i[r]!=null||i[r]!=null)&&delete i[r];let o=yield K(this.autenticazione.getUser());yield this.db.updateItem("user",o.uid,{rejected:this.rejected,accepted:this.accepted,requests:i});let s=yield K(this.db.getItem("user",o.uid));this.user=s}catch(i){throw i}})}sendNotification(r){if("Notification"in window&&Notification.permission=="granted"){var i=new Notification("Match!",{lang:"it",body:"Hai appena fatto un match con "+r,icon:"studymatch.ico"});Notification.requestPermission().then(o=>{o==="granted"&&navigator.serviceWorker.ready.then(s=>{s.showNotification("Match!",{lang:"it",body:"Hai appena fatto un match con "+r,icon:"studymatch.ico"})})})}}saveMatch(r){return b(this,null,function*(){try{let i=yield K(this.autenticazione.getUser()),o=yield K(this.db.getItem("user",i.uid)),s=yield K(this.db.getItem("user",r)),a=s.accepted,c=s.matched||{},u=o.matched||{};yield delete o.matched,yield delete s.matched,a.indexOf(i.uid)!==-1&&(c[i.uid]=o,u[s.id]=s,this.sendNotification(s.surname+" "+s.name),yield this.db.updateItem("user",r,{matched:c}),yield this.db.updateItem("user",i.uid,{matched:u}))}catch(i){throw i}})}accept(r){var i=this.requests[r].id;document.getElementById("profile-"+i).classList.add("fade-out"),setTimeout(()=>b(this,null,function*(){this.accepted.push(i),yield delete this.requests[r],yield this.savedata(r),yield this.saveMatch(r),window.location.reload()}),300)}reject(r){var i=this.requests[r].id;document.getElementById("profile-"+i).classList.add("fade-out"),setTimeout(()=>b(this,null,function*(){this.rejected.push(i),yield delete this.requests[r],yield this.savedata(r),window.location.reload()}),300)}isEmpty(r){return r!=null?Object.keys(r).length==0:!0}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-requests"]],decls:15,vars:4,consts:[["id","background",1,"background","fade-in"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],[1,"content"],[1,"text"],[1,"profiles"],["class","profile",3,"id",4,"ngFor","ngForOf"],["class","end-request",4,"ngIf"],[1,"profile",3,"id"],[4,"ngIf"],[3,"src"],[1,"information"],["class","bi bi-patch-check-fill verify",4,"ngIf"],[1,"descrizione"],[3,"click"],[1,"x",3,"click"],[1,"bi","bi-x"],[1,"bi","bi-patch-check-fill","verify"],[1,"end-request"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"a",2),Q("click",function(){return o.fadeout("userswiper")}),U(3,"i",3),E(4,"Torna indietro"),_(),v(5,"div",4)(6,"div",5)(7,"h2"),E(8,"Richieste"),_(),v(9,"p"),E(10,"Accetta o rifiuta le richieste di conoscenza"),_()(),v(11,"div",6),ae(12,J3,2,2,"div",7),ea(13,"keyvalue"),_(),ae(14,e$,2,0,"h4",8),_()()()),i&2&&(D(12),L("ngForOf",ta(13,2,o.requests)),D(2),L("ngIf",o.isEmpty(o.requests)))},dependencies:[kt,Ke,ia],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden;min-width:330px}.block[_ngcontent-%COMP%]{min-width:330px;position:relative;background-color:#dbdbdbed;border-radius:14px;width:60%;height:60%;padding:1rem 0 2.5rem}.text[_ngcontent-%COMP%]{margin-top:2.5rem;width:50%;min-width:300px}.content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;text-align:center}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.8rem;font-weight:600}p[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:.8rem;margin:0}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem;margin-top:.7rem;margin-bottom:.7rem;border-radius:10px;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transform:scale(1.02);transition:.1s}.x[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{position:absolute}.x[_ngcontent-%COMP%], .x[_ngcontent-%COMP%]:hover{background-color:transparent}.x[_ngcontent-%COMP%]{top:-.7rem;right:.2rem;color:#858585;font-size:1rem}.x[_ngcontent-%COMP%]:hover{transform:scale(1);color:#a02626}.profiles[_ngcontent-%COMP%]{width:90%;overflow-y:auto;display:flex;flex-wrap:wrap;gap:30px;margin-top:1.7rem}.profile[_ngcontent-%COMP%]{position:relative;background-color:#ffffffe3;border-radius:8px;width:47%;display:flex;align-items:center;min-height:200px}img[_ngcontent-%COMP%]{top:2rem;left:1rem;width:3rem;height:3rem;object-fit:cover;border-radius:100%}.information[_ngcontent-%COMP%]{text-align:left;width:80%;margin-left:5.5rem;margin-right:1rem}h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.descrizione[_ngcontent-%COMP%]{margin-top:.7rem;margin-bottom:1rem}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}.end-request[_ngcontent-%COMP%]{color:#0000003b;font-size:2rem;margin-top:5rem;font-weight:500}.verify[_ngcontent-%COMP%]{margin-left:.5rem;font-size:1.1rem;color:#007aff}@media screen and (max-width:940px){.profiles[_ngcontent-%COMP%]{justify-content:center}.profile[_ngcontent-%COMP%]{width:80%}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-moz-animation:fadeIn ease-in .7s;-o-animation:fadeIn ease-in .7s;-ms-animation:fadeIn ease-in .7s}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-moz-animation:fadefadeInUpIn ease-in .7s;-o-animation:fadeInUp ease-in .7s;-ms-animation:fadeInUp ease-in .7s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-moz-animation:fadeOutUp ease-in .5s;-o-animation:fadeOutUp ease-in .5s;-ms-animation:fadeOutUp ease-in .5s}"]});let t=e;return t})();function t$(t,e){t&1&&U(0,"i",19)}function n$(t,e){if(t&1){let n=at();v(0,"div",10),U(1,"img",11),v(2,"div",12)(3,"h3"),E(4),ae(5,t$,1,0,"i",13),_(),v(6,"p")(7,"b"),E(8,"Informazioni"),_(),E(9),_(),v(10,"p")(11,"b"),E(12,"Luogo e orario"),_(),E(13),_(),v(14,"p",14),E(15),_(),v(16,"a",15)(17,"button",16),E(18),_()(),v(19,"a",17),Q("click",function(){let i=Re(n).$implicit,o=Z();return Ne(o.copy(i.value.telegram))}),v(20,"button"),E(21),_()(),v(22,"a",17),Q("click",function(){let i=Re(n).$implicit,o=Z();return Ne(o.copy(i.value.phone))}),v(23,"button",18),E(24),_()()()()}if(t&2){let n=e.$implicit;D(),L("src",n.value.profileImageURL,Me),D(3),Lt("",n.value.surname," ",n.value.name,""),D(),L("ngIf",n.value.verified),D(4),In(": ",n.value.age,", ",n.value.city,", ",n.value.faculty,""),D(4),tt(": ",n.value.locationAndTime,""),D(2),he(n.value.description),D(),L("href","https://www.instagram.com/"+n.value.instagram.substring(1),Me),D(2),tt("IG: ",n.value.instagram,""),D(3),tt("TG: ",n.value.telegram,""),D(3),he(n.value.phone)}}function r$(t,e){t&1&&(v(0,"h4",20),E(1,"Nessun match ancora fatto..."),_())}var zP=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.firestore=o,this.matched={},this.autenticazione=i,this.db=o}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData()}catch(r){throw r}})}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser()),i=yield K(this.firestore.getItems("user"));if(this.user=i.find(o=>o.id===r.uid),this.user){this.accepted=this.user.accepted,this.matched=this.user.matched;for(let o of i)o.id!==r.uid&&o.accepted.includes(r.uid)&&this.user.accepted.includes(o.id)&&(this.matched[o.id]=o);yield this.firestore.updateItem("user",r.uid,{matched:this.matched})}}catch(r){throw r}})}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}isEmpty(r){return r!=null?Object.keys(r).length==0:!0}correctcopy(){let r=document.getElementById("correct-copy");setTimeout(()=>{r.style.display="flex"},50),setTimeout(()=>{r.classList.add("fade-out-bubble")},2050),setTimeout(()=>{r.classList.remove("fade-out-bubble"),r.style.display="none"},2450)}copy(r){navigator.clipboard.writeText(r),this.correctcopy()}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-messages"]],decls:20,vars:4,consts:[["id","background",1,"background","fade-in"],["id","correct-copy",1,"correct-float","fade-in-bubble"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],[1,"content"],[1,"text"],[1,"profiles"],["class","profile",4,"ngFor","ngForOf"],["class","end-message",4,"ngIf"],[1,"profile"],[3,"src"],[1,"information"],["class","bi bi-patch-check-fill verify",4,"ngIf"],[1,"descrizione"],["target","_blank",3,"href"],[1,"firstButton"],[3,"click"],[1,"lastButton"],[1,"bi","bi-patch-check-fill","verify"],[1,"end-message"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"h6"),E(3,"Contatto copiato"),_(),v(4,"p"),E(5,"Hai copiato il contatto; adesso lo puoi incollare."),_()(),v(6,"div",2)(7,"a",3),Q("click",function(){return o.fadeout("userswiper")}),U(8,"i",4),E(9,"Torna indietro"),_(),v(10,"div",5)(11,"div",6)(12,"h2"),E(13,"Matches"),_(),v(14,"p"),E(15,"Visualizza in questa sezione tutte le persone di cui hai accettato la richiesta o che ti hanno accettato la richiesta. Tramite i loro social puoi contattarli!"),_()(),v(16,"div",7),ae(17,n$,25,13,"div",8),ea(18,"keyvalue"),_(),ae(19,r$,2,0,"h4",9),_()()()),i&2&&(D(17),L("ngForOf",ta(18,2,o.matched)),D(2),L("ngIf",o.isEmpty(o.matched)))},dependencies:[kt,Ke,ia],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden;min-width:330px}.block[_ngcontent-%COMP%]{min-width:330px;position:relative;background-color:#dbdbdbed;border-radius:14px;width:60%;height:60%;padding:1rem 0 2.5rem}.text[_ngcontent-%COMP%]{margin-top:2.5rem;width:50%;min-width:300px}.content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;text-align:center}.return[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{position:absolute}.return[_ngcontent-%COMP%]{top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.8rem;font-weight:600}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-size:.8rem;margin:0}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem}p[_ngcontent-%COMP%]{margin:0 0 1.5rem}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem .8rem;margin:.1rem;border-radius:10px;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transition:.1s}img[_ngcontent-%COMP%]{top:2rem;left:1rem;width:3rem;height:3rem;object-fit:cover;border-radius:100%}.profiles[_ngcontent-%COMP%]{width:90%;overflow-y:auto;display:flex;flex-wrap:wrap;gap:30px;margin-top:1.7rem}.profile[_ngcontent-%COMP%]{position:relative;background-color:#ffffffe3;border-radius:8px;width:47%;display:flex;align-items:center;padding-bottom:1rem;min-height:200px}.information[_ngcontent-%COMP%]{text-align:left;width:80%;margin-left:5.5rem}h3[_ngcontent-%COMP%]{margin-bottom:.5rem}b[_ngcontent-%COMP%]{font-weight:400}.descrizione[_ngcontent-%COMP%]{margin-top:.7rem;margin-bottom:1rem}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}.end-message[_ngcontent-%COMP%]{color:#0000003b;font-size:2rem;margin-top:5rem;font-weight:500}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-weight:400}.correct-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;transform:translate(-50%);border-radius:10px;width:20rem;height:4rem;background-color:#008d0ced;box-shadow:1px 10px 10px #0000002d;justify-content:center;align-items:center;flex-direction:column;z-index:100;padding:.5rem}.verify[_ngcontent-%COMP%]{margin-left:.5rem;font-size:1.1rem;color:#007aff}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-moz-animation:fadeIn ease-in .7s;-o-animation:fadeIn ease-in .7s;-ms-animation:fadeIn ease-in .7s}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-moz-animation:fadefadeInUpIn ease-in .7s;-o-animation:fadeInUp ease-in .7s;-ms-animation:fadeInUp ease-in .7s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-moz-animation:fadeOutUp ease-in .5s;-o-animation:fadeOutUp ease-in .5s;-ms-animation:fadeOutUp ease-in .5s}@media screen and (max-width:940px){.profiles[_ngcontent-%COMP%]{justify-content:center}.profile[_ngcontent-%COMP%]{width:80%}}@media all and (min-width:480px) and (max-width:768px){.correct-float[_ngcontent-%COMP%]{top:4rem}}@media all and (max-width:480px){.correct-float[_ngcontent-%COMP%]{top:4rem}}"]});let t=e;return t})();function i$(t,e){t&1&&U(0,"i",24)}function o$(t,e){if(t&1){let n=at();v(0,"button",25),Q("click",function(){Re(n);let i=Z(2).$implicit,o=Z();return Ne(o.sendrequest(i.id))}),E(1,"Chiedi contatto"),_()}if(t&2){let n=Z(2).$implicit;L("id","button-"+n.id)}}function s$(t,e){if(t&1){let n=at();v(0,"div",26)(1,"a",27)(2,"button",28),E(3),_()(),v(4,"a",29),Q("click",function(){Re(n);let i=Z(2).$implicit,o=Z();return Ne(o.copy(i.telegram))}),v(5,"button"),E(6),_()(),v(7,"a",29),Q("click",function(){Re(n);let i=Z(2).$implicit,o=Z();return Ne(o.copy(i.phone))}),v(8,"button",30),E(9),_()()()}if(t&2){let n=Z(2).$implicit;D(),L("href","https://www.instagram.com/"+n.instagram.substring(1),Me),D(2),tt("IG: ",n.instagram,""),D(3),tt("TG: ",n.telegram,""),D(3),he(n.phone)}}function a$(t,e){t&1&&(v(0,"button",31),E(1,"Richiesta rifiutata"),_())}function c$(t,e){t&1&&(v(0,"button",32),E(1,"Richiesta gi\xE0 inviata"),_())}function l$(t,e){if(t&1&&(v(0,"div",15)(1,"div",16),U(2,"img",17),v(3,"div",18)(4,"h3"),E(5),ae(6,i$,1,0,"i",19),_(),v(7,"p"),E(8),_(),v(9,"p"),E(10),_(),ae(11,o$,2,1,"button",20)(12,s$,10,4,"div",21)(13,a$,2,0,"button",22)(14,c$,2,0,"button",23),_()()()),t&2){let n=Z().$implicit,r=Z();D(2),L("src",n.profileImageURL,Me),D(3),Lt("",n.surname," ",n.name,""),D(),L("ngIf",n.verified),D(2),In("",n.age,", ",n.city,", ",n.faculty,""),D(2),he(n.locationAndTime),D(),L("ngIf",n.matched[r.user.id]==null&&r.user.rejected.indexOf(n.id)==-1&&n.rejected.indexOf(r.user.id)==-1&&n.requests[r.user.id]!=null),D(),L("ngIf",n.matched[r.user.id]!=null&&r.user.rejected.indexOf(n.id)==-1&&n.requests[r.user.id]==null),D(),L("ngIf",(r.user.rejected.indexOf(n.id)!=-1||n.rejected.indexOf(r.user.id)!=-1)&&n.requests[r.user.id]==null),D(),L("ngIf",n.requests[r.user.id]!=null)}}function u$(t,e){if(t&1&&(Jn(0),ae(1,l$,15,12,"div",14),er()),t&2){let n=e.$implicit,r=Z();D(),L("ngIf",n.id!=r.user.id&&(r.search==""||(n==null||n.name==null?null:n.name.toLowerCase().indexOf(r.search==null?null:r.search.toLowerCase()))!=-1||(n==null||n.surname==null?null:n.surname.toLowerCase().indexOf(r.search==null?null:r.search.toLowerCase()))!=-1||((n==null||n.surname==null?null:n.surname.toLowerCase())+" "+(n==null||n.name==null?null:n.name.toLowerCase())).indexOf(r.search==null?null:r.search.toLowerCase())!=-1))}}var Rb=(()=>{let e=class e{constructor(r,i,o,s){this.router=r,this.route=i,this.authService=o,this.firestore=s,this.search="",this.refresh=!1,this.message="",this.autenticazione=o,this.db=s}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData(),this.route.paramMap.subscribe(r=>{r.get("data")!=null?this.search=r.get("data").replace("_"," "):this.search=r.get("data"),document.getElementById("search-field").value=this.search}),this.refreshInterval=setInterval(()=>{this.search=document.getElementById("search-field").value},50)}catch(r){throw r}})}ngOnDestroy(){return b(this,null,function*(){this.refreshInterval&&clearInterval(this.refreshInterval)})}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser());this.user=yield K(this.firestore.getItem("user",r.uid));let i=yield K(this.firestore.getItems("user"));this.users=i.filter(o=>o.completed)}catch(r){throw r}})}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450),this.refresh&&setTimeout(()=>{window.location.reload()},500)}deleteUselessInformation(r){return delete r.requests,delete r.matched,r}sendNotification(r){if("Notification"in window&&Notification.permission=="granted"){var i=new Notification("Match!",{lang:"it",body:"Hai appena fatto un match con "+r,icon:"studymatch.ico"});Notification.requestPermission().then(o=>{o==="granted"&&navigator.serviceWorker.ready.then(s=>{s.showNotification("Match!",{lang:"it",body:"Hai appena fatto un match con "+r,icon:"studymatch.ico"})})})}}sendrequest(r){return b(this,null,function*(){document.getElementById("button-"+r).disabled=!0;try{let i=yield K(this.autenticazione.getUser()),[o,s]=yield Promise.all([K(this.db.getItem("user",i.uid)),K(this.db.getItem("user",r))]),a,c,u,d,h;o.requests[r]!==void 0?(delete o.requests[r],a=o.accepted,h=o.matched,d=o.requests,c=s.matched,a.push(r),c[i.uid]=this.deleteUselessInformation(o),h[r]=this.deleteUselessInformation(s),this.sendNotification(s.surname+" "+s.name),yield this.db.updateItem("user",i.uid,{matched:h,requests:d,accepted:a}),yield this.db.updateItem("user",r,{matched:c}),this.correct("Entrambi vi siete swipati; adesso avete fatto match.")):(a=o.accepted,u=s.requests,u[i.uid]=this.deleteUselessInformation(o),a.push(r),yield this.db.updateItem("user",r,{requests:u}),yield this.db.updateItem("user",o.id,{accepted:a}),this.correct("Richiesta mandata con successo."))}catch(i){throw document.getElementById("button-"+r).disabled=!1,i}})}correct(r){this.message=r,this.refresh=!0;let i=document.getElementById("correct");setTimeout(()=>{i.style.display="flex"},50),setTimeout(()=>{i.classList.add("fade-out-bubble")},2050),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none",window.location.reload()},2450)}correctcopy(){let r=document.getElementById("correct-copy");setTimeout(()=>{r.style.display="flex"},50),setTimeout(()=>{r.classList.add("fade-out-bubble")},2050),setTimeout(()=>{r.classList.remove("fade-out-bubble"),r.style.display="none"},2450)}copy(r){navigator.clipboard.writeText(r),this.correctcopy()}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(rr),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-search"]],decls:23,vars:2,consts:[["id","background",1,"background","fade-in"],["id","correct",1,"correct-float","fade-in-bubble"],["id","correct-copy",1,"correct-float","fade-in-bubble"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],[1,"content"],[1,"search"],[1,"searchform"],[1,"searchicon"],[1,"bi","bi-search"],["type","text","placeholder","Cerca...","name","search","id","search-field"],[1,"profiles"],[4,"ngFor","ngForOf"],["class","profile",4,"ngIf"],[1,"profile"],[1,"group"],[3,"src"],[1,"information"],["class","bi bi-patch-check-fill verify",4,"ngIf"],[3,"id","click",4,"ngIf"],["class","buttons",4,"ngIf"],["disabled","","class","rejected","disabled","",4,"ngIf"],["class","already-requested","disabled","",4,"ngIf"],[1,"bi","bi-patch-check-fill","verify"],[3,"click","id"],[1,"buttons"],["target","_blank",3,"href"],[1,"firstButton"],[3,"click"],[1,"lastButton"],["disabled","","disabled","",1,"rejected"],["disabled","",1,"already-requested"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"h6"),E(3,"Successo"),_(),v(4,"p"),E(5),_()(),v(6,"div",2)(7,"h6"),E(8,"Contatto copiato"),_(),v(9,"p"),E(10,"Hai copiato il contatto; adesso lo puoi incollare."),_()(),v(11,"div",3)(12,"a",4),Q("click",function(){return o.fadeout("userswiper")}),U(13,"i",5),E(14,"Torna indietro"),_(),v(15,"div",6)(16,"div",7)(17,"form",8)(18,"span",9),U(19,"i",10),_(),U(20,"input",11),_()(),v(21,"div",12),ae(22,u$,2,1,"ng-container",13),_()()()()),i&2&&(D(5),he(o.message),D(17),L("ngForOf",o.users))},dependencies:[kt,Ke],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden;min-width:330px}.block[_ngcontent-%COMP%]{position:relative;background-color:#dbdbdbed;border-radius:14px;width:25%;min-width:300px;height:60%;padding:1rem 0 2.5rem}.search[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:.2rem;width:92%}.content[_ngcontent-%COMP%], .searchform[_ngcontent-%COMP%]{width:100%;display:flex}.searchform[_ngcontent-%COMP%]{justify-content:center;margin:1.5rem 0 0}.content[_ngcontent-%COMP%]{height:100%;flex-direction:column;align-items:center;text-align:center}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem;margin-top:.7rem;margin-bottom:.7rem;border-radius:10px;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transform:scale(1.02);transition:.1s}.buttons[_ngcontent-%COMP%], .group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:70%;margin:.2rem 0}.buttons[_ngcontent-%COMP%]   .firstButton[_ngcontent-%COMP%]{margin-top:1rem}.buttons[_ngcontent-%COMP%]   .lastButton[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-bottom:.5rem}h3[_ngcontent-%COMP%]{margin-top:0}.group[_ngcontent-%COMP%]{position:relative;flex-direction:row;width:90%;padding:1rem}img[_ngcontent-%COMP%]{width:3.2rem;height:3.2rem;object-fit:cover;border-radius:100%}.profile[_ngcontent-%COMP%], .profiles[_ngcontent-%COMP%]{display:flex;justify-content:center}.profiles[_ngcontent-%COMP%]{width:95%;overflow-y:auto;flex-wrap:wrap;gap:30px;margin-top:1.7rem;margin-left:.2rem}.profile[_ngcontent-%COMP%]{position:relative;background-color:#ffffffe3;border-radius:8px;width:85%;align-items:center;min-height:200px}.information[_ngcontent-%COMP%]{text-align:left;width:70%;margin-left:2rem}p[_ngcontent-%COMP%]{font-size:.8rem;margin:0}input[type=text][_ngcontent-%COMP%]{height:30px;width:70%;margin:0;padding-left:.2rem;border-radius:0 8px 8px 0;border:0;background-color:#7878801f;transition:.1s;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}input[type=text][_ngcontent-%COMP%]:focus{outline:0}.searchicon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:10%;font-size:.7rem;background-color:#7878801f;color:#787880e5;transition:.3s;margin:0;border-radius:8px 0 0 8px;padding-left:.3rem}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;margin:0}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-size:.8rem;font-weight:400;margin:0}.correct-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;transform:translate(-50%);border-radius:10px;width:20rem;height:4rem;background-color:#008d0ced;box-shadow:1px 10px 10px #0000002d;justify-content:center;align-items:center;flex-direction:column;z-index:100;padding:.5rem}.verify[_ngcontent-%COMP%]{position:absolute;margin-top:.1rem;margin-left:.2rem;font-size:1.1rem;color:#007aff}.already-requested[_ngcontent-%COMP%]:hover, .rejected[_ngcontent-%COMP%]:hover{transform:none;cursor:not-allowed}.rejected[_ngcontent-%COMP%], .rejected[_ngcontent-%COMP%]:hover{background-color:#ce0303}.already-requested[_ngcontent-%COMP%], .already-requested[_ngcontent-%COMP%]:hover{background-color:green}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-moz-animation:fadeIn ease-in .7s;-o-animation:fadeIn ease-in .7s;-ms-animation:fadeIn ease-in .7s}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-moz-animation:fadefadeInUpIn ease-in .7s;-o-animation:fadeInUp ease-in .7s;-ms-animation:fadeInUp ease-in .7s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-moz-animation:fadeOutUp ease-in .5s;-o-animation:fadeOutUp ease-in .5s;-ms-animation:fadeOutUp ease-in .5s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}@media all and (min-width:1070px) and (max-width:1300px){.block[_ngcontent-%COMP%]{width:30%}}@media all and (min-width:768px) and (max-width:1070px){.block[_ngcontent-%COMP%]{width:40%}}@media all and (min-width:480px) and (max-width:768px){.block[_ngcontent-%COMP%]{width:60%}.correct-float[_ngcontent-%COMP%]{top:4rem}p[_ngcontent-%COMP%]{font-size:1.05rem!important}button[_ngcontent-%COMP%]{font-size:.8rem!important}}@media all and (max-width:480px){.correct-float[_ngcontent-%COMP%]{top:4rem}p[_ngcontent-%COMP%]{font-size:1.05rem!important}button[_ngcontent-%COMP%]{font-size:.8rem!important}}"]});let t=e;return t})();function d$(t,e){t&1&&U(0,"i",7)}function f$(t,e){if(t&1&&(v(0,"div",1)(1,"div",2),U(2,"img",3),_(),v(3,"div",4)(4,"h2"),E(5),ae(6,d$,1,0,"i",5),_(),v(7,"p")(8,"b"),E(9,"Informazioni"),_(),E(10),_(),v(11,"p")(12,"b"),E(13,"Luogo e orario"),_(),E(14),_(),v(15,"p",6),E(16),_(),v(17,"div")(18,"button"),E(19),_(),v(20,"button"),E(21),_(),v(22,"button"),E(23),_()()()()),t&2){let n=Z();D(2),L("src",n.user.profileImageURL,Me),D(3),Lt("",n.user.surname," ",n.user.name,""),D(),L("ngIf",n.user.verified),D(4),In(": ",n.user.age,", ",n.user.city,", ",n.user.faculty,""),D(4),tt(": ",n.user.locationAndTime,""),D(2),he(n.user.description),D(3),he(n.user.instagram),D(2),he(n.user.telegram),D(2),he(n.user.phone)}}var qP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=pe({type:e,selectors:[["app-profile"]],inputs:{user:"user"},decls:1,vars:1,consts:[["class","profile",4,"ngIf"],[1,"profile"],[1,"left-column"],[1,"fade-in",3,"src"],[1,"right-column"],["class","bi bi-patch-check-fill verify",4,"ngIf"],[1,"descrizione"],[1,"bi","bi-patch-check-fill","verify"]],template:function(i,o){i&1&&ae(0,f$,24,12,"div",0),i&2&&L("ngIf",o.user!=null)},dependencies:[Ke],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.profile[_ngcontent-%COMP%]{display:flex;align-items:stretch;justify-content:center;width:100%;height:100%}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.left-column[_ngcontent-%COMP%]{align-items:center;min-height:100%;width:40%;margin-left:4rem}.right-column[_ngcontent-%COMP%]{width:50%;margin-right:4rem;align-items:baseline;flex-direction:column}.left-column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:70%;border-radius:20px;object-fit:cover}h2[_ngcontent-%COMP%]{margin:.5rem;font-weight:700}p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.descrizione[_ngcontent-%COMP%]{margin-top:1rem;min-height:40%;margin-bottom:1rem;text-align:left}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem .8rem;margin:.3rem;border-radius:10px;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transition:.1s}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in 1.1s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in 1.1s;-moz-animation:fadeIn ease-in 1.1s;-o-animation:fadeIn ease-in 1.1s;-ms-animation:fadeIn ease-in 1.1s}b[_ngcontent-%COMP%]{font-weight:400}.verify[_ngcontent-%COMP%]{margin-left:.5rem;font-size:1.2rem;color:#007aff}@media all and (min-width:480px) and (max-width:900px){.profile[_ngcontent-%COMP%]{flex-direction:column;align-items:center;height:90%;margin-top:1rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{width:90%;min-height:45%;align-items:center;justify-content:center;margin:0}.left-column[_ngcontent-%COMP%]{margin-bottom:1rem!important}.right-column[_ngcontent-%COMP%]{margin-top:2rem!important}}@media all and (max-width:480px){.profile[_ngcontent-%COMP%]{flex-direction:column;align-items:center;height:90%;margin-top:1rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{width:90%;min-height:45%;align-items:center;justify-content:center;margin:0}.left-column[_ngcontent-%COMP%]{margin-bottom:1rem!important}.right-column[_ngcontent-%COMP%]{margin-top:2rem!important}}@media all and (max-height:500px){.profile[_ngcontent-%COMP%]{flex-direction:column;align-items:center;height:90%;margin-top:1rem}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{width:90%;min-height:45%;align-items:center;justify-content:center;margin:0}.left-column[_ngcontent-%COMP%]{margin-bottom:1rem}.right-column[_ngcontent-%COMP%]{margin-top:1rem}.descrizione[_ngcontent-%COMP%]{display:none}}"]});let t=e;return t})();var HP=(()=>{let e=class e{constructor(){this.qrcodeSrc=""}ngOnInit(){setTimeout(()=>this.qrcodeSrc="http://api.qrserver.com/v1/create-qr-code/?data=https://studymatch-99924.firebaseapp.com/userswiper/search/"+this.name,300)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=pe({type:e,selectors:[["app-qr-code"]],inputs:{name:"name"},decls:7,vars:1,consts:[[1,"qr"],[1,"image"],[3,"src"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"h2"),E(2,"Il tuo QR code"),_(),v(3,"p"),E(4,"Fallo scannerizzare per far arrivare direttamente al tuo profilo StudyMatch"),_(),v(5,"div",1),U(6,"img",2),_()()),i&2&&(D(6),L("src",o.qrcodeSrc,Me))},styles:[".qr[_ngcontent-%COMP%]{position:relative;height:100%;overflow-y:auto}h2[_ngcontent-%COMP%]{margin:0}p[_ngcontent-%COMP%]{margin:1rem 1rem 2rem;font-size:.9rem}.image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1rem;border-radius:20px;background-color:#fff;width:fit-content;margin:auto}"]});let t=e;return t})();function m$(t,e){if(t&1&&U(0,"app-qr-code",17),t&2){let n=Z();L("name",n.name+"_"+n.surname)}}var Nb=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.firestore=o,this.slideIndex=1,this.autenticazione=i,this.db=o,this.showSlides(this.slideIndex),window.location.pathname=="/userswiper/personal-profile"?this.to="/userswiper":window.location.pathname=="/groupswiper/personal-profile"&&(this.to="/groupswiper")}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData()}catch(r){throw r}})}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser());this.id=r.uid,this.user=yield K(this.firestore.getItem("user",this.id)),this.user&&(this.surname=this.user.surname,this.name=this.user.name,this.age=this.user.age,this.location_time=this.user.locationAndTime,this.description=this.user.description,this.instagram=this.user.instagram,this.telegram=this.user.telegram,this.phone=this.user.phone,this.profileImageURL=this.user.profileImageURL)}catch(r){throw r}})}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}fadeoutint(){var r=document.getElementById("active");r.getAttribute("name")=="profile"?(r.firstElementChild.classList.remove("fade-in-left"),r.firstElementChild.className+=" fade-out-right"):r.getAttribute("name")=="qr"&&(r.firstElementChild.classList.remove("fade-in-right"),r.firstElementChild.className+=" fade-out-left")}plusSlides(r){this.fadeoutint(),setTimeout(()=>{var i=document.getElementById("active");i.getAttribute("name")=="profile"?(i.firstElementChild.classList.remove("fade-out-right"),i.firstElementChild.className+=" fade-in-left"):i.getAttribute("name")=="qr"&&(i.firstElementChild.classList.remove("fade-out-left"),i.firstElementChild.className+=" fade-in-right"),this.showSlides(this.slideIndex+=r)},450)}currentSlide(r){this.fadeoutint(),setTimeout(()=>{var i=document.getElementById("active");i.getAttribute("name")=="profile"?(i.firstElementChild.classList.remove("fade-out-right"),i.firstElementChild.className+=" fade-in-left"):i.getAttribute("name")=="qr"&&(i.firstElementChild.classList.remove("fade-out-left"),i.firstElementChild.className+=" fade-in-right"),this.showSlides(this.slideIndex=r)},450)}showSlides(r){let i,o=document.getElementsByClassName("mySlides");setTimeout(()=>{let s=document.getElementsByClassName("dot");for(r>o.length&&(this.slideIndex=1),r<1&&(this.slideIndex=o.length),i=0;i<o.length;i++)o.item(i).style.display="none",o.item(i).id="none";for(i=0;i<s.length;i++)s[i].className=s[i].className.replace(" active","");o.item(this.slideIndex-1).style.display="block",o.item(this.slideIndex-1).id="active",s[this.slideIndex-1].className+=" active"},0)}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-personal-profile"]],decls:19,vars:2,consts:[["id","background",1,"background","fade-in"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],[1,"content"],[1,"slideshow-container"],["name","profile",1,"mySlides"],["id","profile",1,"fade-in-left",3,"user"],["name","qr",1,"mySlides"],["id","qrcode","class","fade-in-right",3,"name",4,"ngIf"],[1,"buttons"],[1,"prev",3,"click"],[1,"bi","bi-chevron-left","large-stroke"],[1,"next",3,"click"],[1,"bi","bi-chevron-right","large-stroke"],[1,"dots"],[1,"dot",3,"click"],["id","qrcode",1,"fade-in-right",3,"name"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"a",2),Q("click",function(){return o.fadeout(o.to)}),U(3,"i",3),E(4,"Torna indietro"),_(),v(5,"div",4)(6,"div",5)(7,"div",6),U(8,"app-profile",7),_(),v(9,"div",8),ae(10,m$,1,1,"app-qr-code",9),_()(),v(11,"div",10)(12,"a",11),Q("click",function(){return o.plusSlides(-1)}),U(13,"i",12),_(),v(14,"a",13),Q("click",function(){return o.plusSlides(1)}),U(15,"i",14),_()(),v(16,"div",15)(17,"span",16),Q("click",function(){return o.currentSlide(1)}),_(),v(18,"span",16),Q("click",function(){return o.currentSlide(2)}),_()()()()()),i&2&&(D(8),L("user",o.user),D(2),L("ngIf",o.name!=null&&o.surname!=null))},dependencies:[Ke,qP,HP],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;background-color:#0000009c;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden;min-width:310px}.block[_ngcontent-%COMP%]{min-width:310px;position:relative;background-color:#dbdbdbe8;border-radius:14px;width:51%;height:70%;padding:1rem 0}.content[_ngcontent-%COMP%]{width:100%;height:95%;display:flex;flex-direction:column;align-items:center;text-align:center;margin-top:1.5rem}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#0000009c;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}.mySlides[_ngcontent-%COMP%]{display:none;height:100%}.slideshow-container[_ngcontent-%COMP%]{position:relative;width:100%;height:88%;margin:auto}.dots[_ngcontent-%COMP%]{text-align:center}.dot[_ngcontent-%COMP%]{cursor:pointer;height:10px;width:10px;margin:0 4px;background-color:#bbb;border-radius:50%;display:inline-block;transition:background-color .6s ease}.next[_ngcontent-%COMP%], .prev[_ngcontent-%COMP%]{display:none;position:absolute;font-size:1.3rem}.prev[_ngcontent-%COMP%]{left:1rem}.next[_ngcontent-%COMP%]{right:1rem}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}.dot[_ngcontent-%COMP%]:hover{background-color:#444}.active[_ngcontent-%COMP%]{background-color:#717171}app-profile[_ngcontent-%COMP%], app-qr-code[_ngcontent-%COMP%]{display:block;height:100%}.buttons[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto;bottom:10%}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-moz-animation:fadeIn ease-in .7s;-o-animation:fadeIn ease-in .7s;-ms-animation:fadeIn ease-in .7s}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-moz-animation:fadefadeInUpIn ease-in .7s;-o-animation:fadeInUp ease-in .7s;-ms-animation:fadeInUp ease-in .7s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-moz-animation:fadeOutUp ease-in .5s;-o-animation:fadeOutUp ease-in .5s;-ms-animation:fadeOutUp ease-in .5s}.fade-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInRight ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInRight ease-in .5s;-moz-animation:fadeInRight ease-in .5s;-o-animation:fadeInRight ease-in .5s;-ms-animation:fadeInRight ease-in .5s}.fade-in-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInLeft ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInLeft ease-in .5s;-moz-animation:fadeInLeft ease-in .5s;-o-animation:fadeInLeft ease-in .5s;-ms-animation:fadeInLeft ease-in .5s}.fade-out-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutRight ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutRight ease-in .5s;-moz-animation:fadeOutRight ease-in .5s;-o-animation:fadeOutRight ease-in .5s;-ms-animation:fadeOutRight ease-in .5s}.fade-out-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutLeft ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutLeft ease-in .5s;-moz-animation:fadeOutLeft ease-in .5s;-o-animation:fadeOutLeft ease-in .5s;-ms-animation:fadeOutLeft ease-in .5s}@media all and (min-width:1620px) and (max-width:1910px){.block[_ngcontent-%COMP%]{width:61%}}@media all and (min-width:1320px) and (max-width:1620px){.block[_ngcontent-%COMP%]{width:60%}}@media all and (min-width:900px) and (max-width:1320px){.block[_ngcontent-%COMP%]{width:70%}}@media screen and (max-width:750px){.next[_ngcontent-%COMP%], .prev[_ngcontent-%COMP%]{display:inline}}@media all and (min-width:480px) and (max-width:900px){.block[_ngcontent-%COMP%]{width:70%}}@media all and (max-width:480px){.block[_ngcontent-%COMP%]{width:70%}}@media all and (max-height:650px){.block[_ngcontent-%COMP%]{height:85%}}"]});let t=e;return t})();var g$=(t,e,n,r,i)=>({"image-more":t,"display-none":e,oneImage:n,twoImages:r,threeImages:i});function y$(t,e){if(t&1&&(v(0,"p"),E(1),_()),t&2){let n=Z(2);D(),tt("+",n.imagevector.length-5,"")}}function _$(t,e){if(t&1&&(v(0,"div",3),U(1,"img",4),ae(2,y$,2,1,"p",5),_()),t&2){let n=e.$implicit,r=e.index,i=Z();L("id","img-"+r)("ngClass",_f(4,g$,r==5,r>=6,i.imagevector.length==1,i.imagevector.length==2,i.imagevector.length==3)),D(),L("src",n,Me),D(),L("ngIf",r==5)}}var GP=(()=>{let e=class e{constructor(r){this.renderer=r,this.click=!1,this.rejected=new st,this.accepted=new st}ngAfterViewInit(){var r=document.getElementById("card-"+this.number);let i=this.movemouse(this.number),o=this.movetouch(this.number);document.getElementsByClassName("card")[0].classList.add("grab"),window.addEventListener("pointerdown",s=>{s.target==document.getElementsByClassName("card")[0]&&(document.getElementsByClassName("card")[0].classList.remove("grab"),window.addEventListener("mousemove",i),document.getElementsByClassName("cards")[0].classList.add("grabbed"))},!1),window.addEventListener("touchstart",s=>{s.target==document.getElementsByClassName("card")[0]&&window.addEventListener("touchmove",o)},!1),window.addEventListener("pointerup",s=>{let a=document.getElementsByClassName("card")[0];if(window.location.pathname=="/groupswiper"&&a!=null){a.classList.add("grab"),document.getElementsByClassName("cards")[0].classList.remove("grabbed"),window.removeEventListener("mousemove",i);var c=200;window.innerWidth>500?c=200:window.innerWidth<=500&&(c=80),r.style.transform!="rotate(5deg) translateX("+c+"px)"&&r.style.transform!="rotate(-5deg) translateX(-"+c+"px)"?setTimeout(()=>{r.style.transform="translateX(0px)",r.classList.remove("red"),r.classList.remove("green")},200):s.clientX>r.getBoundingClientRect().left+r.clientWidth/2?this.accept():s.clientX<r.getBoundingClientRect().left+r.clientWidth/2&&this.reject()}},!1),window.addEventListener("touchend",s=>{if(window.location.pathname=="/groupswiper"){window.removeEventListener("touchmove",o);var a=200;window.innerWidth>500?a=200:window.innerWidth<=500&&(a=80),r.style.transform!="rotate(5deg) translateX("+a+"px)"&&r.style.transform!="rotate(-5deg) translateX(-"+a+"px)"?setTimeout(()=>{r.style.transform="translateX(0px)",r.classList.remove("red"),r.classList.remove("green")},200):s.changedTouches[0].clientX>r.getBoundingClientRect().left+r.clientWidth/2?this.accept():s.changedTouches[0].clientX<r.getBoundingClientRect().left+r.clientWidth/2&&this.reject()}},!1)}accept(){var r=document.getElementById("card-"+this.number);r?.classList.add("fade-out"),setTimeout(()=>{this.accepted.emit()},150)}reject(){var r=document.getElementById("card-"+this.number);r?.classList.add("fade-out"),setTimeout(()=>{this.rejected.emit()},150)}movemouse(r){var i=document.getElementById("card-"+r);return function(o){var s=o.clientX,a=i.getBoundingClientRect().left,c=200;window.innerWidth>500?c=200:window.innerWidth<=500&&(c=80),s>a+i.clientWidth/2?s-(a+i.clientWidth/2)<c?(i.style.transform="rotate(5deg) translateX("+(s-(a+i.clientWidth/2))+"px)",i.classList.remove("red"),i.classList.remove("green")):(i.style.transform="rotate(5deg) translateX("+c+"px)",i.classList.remove("red"),i.classList.add("green")):s-(a+i.clientWidth/2)>-c?(i.style.transform="rotate(-5deg) translateX("+(s-(a+i.clientWidth/2))+"px)",i.classList.remove("red"),i.classList.remove("green")):(i.style.transform="rotate(-5deg)  translateX(-"+c+"px)",i.classList.remove("green"),i.classList.add("red"))}}movetouch(r){var i=document.getElementById("card-"+r);return function(o){var s=o.touches[0].clientX,a=i.getBoundingClientRect().left,c=200;window.innerWidth>500?c=200:window.innerWidth<=500&&(c=80),s>a+i.clientWidth/2?s-(a+i.clientWidth/2)<c?(i.style.transform="rotate(5deg) translateX("+(s-(a+i.clientWidth/2))+"px)",i.classList.remove("red"),i.classList.remove("green")):(i.style.transform="rotate(5deg) translateX("+c+"px)",i.classList.remove("red"),i.classList.add("green")):s-(a+i.clientWidth/2)>-c?(i.style.transform="rotate(-5deg) translateX("+(s-(a+i.clientWidth/2))+"px)",i.classList.remove("red"),i.classList.remove("green")):(i.style.transform="rotate(-5deg)  translateX(-"+c+"px)",i.classList.remove("green"),i.classList.add("red"))}}};e.\u0275fac=function(i){return new(i||e)(q(Kt))},e.\u0275cmp=pe({type:e,selectors:[["app-card-g"]],inputs:{number:"number",imagevector:"imagevector"},outputs:{rejected:"rejected",accepted:"accepted"},decls:3,vars:2,consts:[[1,"card","prevent-select","fade-in",3,"id"],[1,"images"],["class","image",3,"id","ngClass",4,"ngFor","ngForOf"],[1,"image",3,"id","ngClass"],["id","img",3,"src"],[4,"ngIf"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1),ae(2,_$,3,10,"div",2),_()()),i&2&&(L("id","card-"+o.number),D(2),L("ngForOf",o.imagevector))},dependencies:[Mf,kt,Ke],styles:['@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.card[_ngcontent-%COMP%]{position:relative;background-size:cover;width:20rem;height:30rem;background-color:#e6e6e6;border-radius:28px;display:flex;justify-content:center;filter:drop-shadow(2px 0 10px rgba(0,0,0,.425))}.card[_ngcontent-%COMP%]:after{position:absolute;content:"";width:100%;height:100%;background-color:transparent;border-radius:28px;transition:.4s}.card[_ngcontent-%COMP%], .red[_ngcontent-%COMP%]:after{align-items:center;transition:.4s}.red[_ngcontent-%COMP%]:after{content:url("./media/dislike-1-3Q2HBASN.svg");background-color:#3002029d}.green[_ngcontent-%COMP%]:after, .images[_ngcontent-%COMP%], .red[_ngcontent-%COMP%]:after{display:flex;justify-content:center}.green[_ngcontent-%COMP%]:after{content:url("./media/like-1-C5B22TEW.svg");align-items:center;background-color:#0a360e9d;transition:.4s}.images[_ngcontent-%COMP%]{position:absolute;flex-wrap:wrap;margin:1rem}.image[_ngcontent-%COMP%]{position:relative;width:44.2%;height:8rem;margin:.5rem}.oneImage[_ngcontent-%COMP%]{width:90%;height:16rem}.twoImages[_ngcontent-%COMP%]{width:90%;height:12rem}.threeImages[_ngcontent-%COMP%]{width:90%;height:8rem}.image-more[_ngcontent-%COMP%]:after, img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:10px}.image-more[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;background-color:#00000086;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.image-more[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;top:40%;right:45%;z-index:100;color:#fff;font-weight:500;margin:auto}img[_ngcontent-%COMP%]{object-fit:cover;box-shadow:1px 1px 10px #00000038}.prevent-select[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none}.grab[_ngcontent-%COMP%]{cursor:grab}.display-none[_ngcontent-%COMP%]{display:none}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .1s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .1s;-moz-animation:fadeIn ease-in .1s;-o-animation:fadeIn ease-in .1s;-ms-animation:fadeIn ease-in .1s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}']});let t=e;return t})();var w$=(t,e,n,r,i)=>({"image-more":t,"display-none":e,oneImage:n,twoImages:r,threeImages:i});function b$(t,e){t&1&&(v(0,"div",8),U(1,"div",9),_())}function C$(t,e){if(t&1){let n=at();v(0,"app-navbar",10),Q("reciveclick",function(i){Re(n);let o=Z();return Ne(o.reciveclick(i))}),_()}if(t&2){let n=Z();L("group",!0)("requestsnotify",n.requestnotify)("messagesnotify",n.messagenotify)("filterclicked",n.filterclicked)("user",n.user)}}function I$(t,e){if(t&1){let n=at();v(0,"app-card-g",12),Q("accepted",function(){Re(n);let i=Z(2);return Ne(i.handleaccept())})("rejected",function(){Re(n);let i=Z(2);return Ne(i.handlereject())}),_()}if(t&2){let n=Z(2);L("number",n.id)("imagevector",n.vectorImage[n.id])}}function E$(t,e){if(t&1&&(v(0,"div"),ae(1,I$,1,2,"app-card-g",11),_()),t&2){let n=e.$implicit,r=e.index,i=Z();D(),L("ngIf",r===i.id&&!i.accepted.includes[n.id]&&!i.rejected.includes[n.id])}}function x$(t,e){t&1&&(v(0,"h4",13),U(1,"i",14),E(2," I possibili gruppi sono finiti..."),_())}function M$(t,e){t&1&&(v(0,"div",15)(1,"p"),E(2,"Esplora il gruppo"),_(),U(3,"i",16),_())}function T$(t,e){if(t&1&&(v(0,"button"),E(1),_()),t&2){let n=e.$implicit;D(),he(n)}}function D$(t,e){if(t&1&&(v(0,"div",26)(1,"p",27),E(2,"In comune con te:"),_(),ae(3,T$,2,1,"button",4),_()),t&2){let n=Z(3);D(3),L("ngForOf",n.comuneThings)}}function O$(t,e){if(t&1&&(v(0,"p"),E(1),_()),t&2){let n=Z(4);D(),tt("+",n.vectorImage.length-n.nummax,"")}}function S$(t,e){if(t&1&&(v(0,"div",28),U(1,"img",29),ae(2,O$,2,1,"p",30),_()),t&2){let n=e.$implicit,r=e.index,i=Z(3);L("ngClass",_f(3,w$,r==i.nummax,r>=i.nummax+1,i.vectorImage[i.id].length==1,i.vectorImage[i.id].length==2,i.vectorImage[i.id].length==3)),D(),L("src",n,Me),D(),L("ngIf",r==i.nummax)}}function P$(t,e){if(t&1&&(v(0,"div",19)(1,"div",20)(2,"h2"),E(3),_(),v(4,"p")(5,"b"),E(6,"Et\xE0 media"),_(),E(7),_(),v(8,"p")(9,"b"),E(10,"Luogo e orari"),_(),E(11),_(),v(12,"p",21),E(13),_(),ae(14,D$,4,1,"div",22),_(),v(15,"div",23)(16,"div",24),ae(17,S$,3,9,"div",25),_()()()),t&2){let n=Z(2);D(3),he(n.actualcard.name),D(4),tt(": ",n.actualcard.medium_age,""),D(4),tt(": ",n.actualcard.locationAndTime,""),D(2),he(n.actualcard.description),D(),L("ngIf",n.comuneThings.length>0),D(3),L("ngForOf",n.vectorImage[n.id])}}function A$(t,e){if(t&1&&(v(0,"div",17),ae(1,P$,18,6,"div",18),_()),t&2){let n=Z();D(),L("ngIf",n.actualcard!=null)}}var WP=(()=>{let e=class e{constructor(r,i,o){this.renderer=r,this.authService=i,this.firestore=o,this.filterclicked=!1,this.scrolling=!1,this.id=0,this.nummax=5,this.vectorGroups=[],this.vectorImage=[],this.isLoading=!0,this.comuneThings=[],this.messagenotify=0,this.requestnotify=0,this.autenticazione=i,this.db=o,this.renderer.listen("window","click",s=>{if(window.location.pathname.startsWith("/groupswiper")){var a=document.getElementsByTagName("app-filter")[0],c=document.getElementsByTagName("app-navbar")[0].lastChild.lastChild.childNodes[8];this.filterclicked==!0&&!a.contains(s.target)&&!c.contains(s.target)&&(a.classList.remove("fade-in"),a.classList.add("fade-out"),setTimeout(()=>{a.style.display="none",a.classList.add("fade-in"),a.classList.remove("fade-out")},200),this.filterclicked=!1)}}),this.renderer.listen("window","wheel",s=>{if(window.location.pathname=="/groupswiper"&&this.isLoading==!1)if(s.deltaY>0){var a=document.documentElement.scrollTop?document.documentElement:document.body;a.scrollTo({top:a.scrollTop+window.innerHeight,behavior:"smooth"})}else{var a=document.documentElement.scrollTop?document.documentElement:document.body;a.scrollTo({top:a.scrollTop-window.innerHeight,behavior:"smooth"})}}),this.renderer.listen("window","touchstart",s=>{this.coordstart=s.touches[0].clientY}),this.renderer.listen("window","touchmove",s=>{if(window.location.pathname=="/groupswiper"&&this.isLoading==!1){if(s.touches[0].clientY-this.coordstart+100<0){var a=document.documentElement.scrollTop?document.documentElement:document.body;a.scrollTo({top:a.scrollTop+window.innerHeight,behavior:"smooth"})}else if(this.coordstart-s.touches[0].clientY+100<0){var a=document.documentElement.scrollTop?document.documentElement:document.body;a.scrollTo({top:a.scrollTop-window.innerHeight,behavior:"smooth"})}}}),window.innerHeight<=800?this.nummax=3:this.nummax=5}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData(),setTimeout(()=>{document.getElementById("overlay").classList.add("fade-out")},500),setTimeout(()=>{this.isLoading=!1},700)}catch(r){throw r}})}matchesFilter(r){let i=parseInt(localStorage.getItem("medium_age")||"NaN"),o=localStorage.getItem("group_time"),s=localStorage.getItem("grouplocation");return(isNaN(i)||r.age<i+5&&r.age>i-5)&&(o===null||o==="-"||r.locationAndTime.toLowerCase().indexOf(o.toLowerCase())!=-1)&&(s===null||s==="undefined"||r.locationAndTime.toLowerCase().indexOf(s.toLowerCase())!=-1)}findComuneThings(){if(this.actualcard!=null&&this.user!=null){var r=this.actualcard.locationAndTime.split(",")[0].trim().toLowerCase().replace(/\s+/g,""),i=this.actualcard.locationAndTime.split(",")[1].trim().toLowerCase().replace(/\s+/g,""),o=this.user.locationAndTime.split(",")[0].trim().toLowerCase().replace(/\s+/g,""),s=this.user.locationAndTime.split(",")[1].trim().toLowerCase().replace(/\s+/g,"");r==o&&this.comuneThings.push("Luogo: "+this.actualcard.locationAndTime.split(",")[0].trim().replace(/\s+/g,"")),i==s&&this.comuneThings.push("Orario: "+this.actualcard.locationAndTime.split(",")[1].trim().replace(/\s+/g,""))}}getImages(r){return b(this,null,function*(){let i=[];for(let o of r){let s=[];for(let a of o.members){let c=yield K(this.firestore.getItem("user",a));s.push(c.profileImageURL)}i.push(s)}return i})}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser());this.user=yield K(this.firestore.getItem("user",r.uid)),this.user&&(this.accepted=this.user.accepted_groups,this.rejected=this.user.rejected_groups,yield this.number_requests(this.user),yield this.findNumOfGroups(this.user));let i=yield K(this.firestore.getItems("group"));i!=null?(this.vectorGroups=i.filter(o=>this.accepted.indexOf(o.id)==-1&&this.rejected.indexOf(o.id)==-1&&this.matchesFilter(o)),this.actualcard=this.vectorGroups[0],this.vectorImage=yield this.getImages(this.vectorGroups),this.findComuneThings()):this.vectorGroups=[]}catch(r){throw r}})}reciveclick(r){this.filterclicked=r;var i=document.getElementsByTagName("app-filter")[0];this.filterclicked?i.style.display="block":(i.classList.remove("fade-in"),i.classList.add("fade-out"),setTimeout(()=>{i.style.display="none",i.classList.add("fade-in"),i.classList.remove("fade-out")},200))}savedata(){return b(this,null,function*(){try{let r=yield K(this.autenticazione.getUser());yield this.db.updateItem("user",r.uid,{rejected_groups:this.rejected,accepted_groups:this.accepted}),this.user=yield K(this.db.getItem("user",r.uid))}catch(r){throw r}})}sendrequest(r){return b(this,null,function*(){try{let i=yield K(this.autenticazione.getUser()),[o,s]=yield Promise.all([K(this.db.getItem("user",i.uid)),K(this.db.getItem("group",r))]),a;a=s.requests,a[i.uid]=o,yield this.db.updateItem("group",r,{requests:a})}catch(i){throw i}})}handleaccept(){return b(this,null,function*(){try{yield this.sendrequest(this.vectorGroups[this.id].id),this.accepted.push(this.vectorGroups[this.id].id),this.id++,this.actualcard=this.vectorGroups[this.id],this.findComuneThings(),yield this.savedata()}catch(r){throw r}})}handlereject(){return b(this,null,function*(){try{this.rejected.push(this.vectorGroups[this.id].id),this.id++,this.actualcard=this.vectorGroups[this.id],this.findComuneThings(),yield this.savedata()}catch(r){throw r}})}numberkeys(r){return Object.keys(r).length}find_number_requests(r){return new Promise(i=>b(this,null,function*(){let o=0;for(let s of r.accepted_groups){let a=yield K(this.firestore.getItem("group",s));a.members.indexOf(r.id)!=-1&&(o+=this.numberkeys(a.requests))}i(o)}))}find_number_groups(r){return new Promise(i=>b(this,null,function*(){let o=0;for(let s of r.accepted_groups)(yield K(this.firestore.getItem("group",s))).members.indexOf(r.id)!=-1&&(o+=1);i(o)}))}number_requests(r){return b(this,null,function*(){yield this.find_number_requests(r).then(i=>{this.requestnotify=i}).catch(i=>{this.requestnotify=0})})}findNumOfGroups(r){return b(this,null,function*(){yield this.find_number_groups(r).then(i=>{this.messagenotify=i}).catch(i=>{this.messagenotify=0})})}};e.\u0275fac=function(i){return new(i||e)(q(Kt),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-groupswiper"]],decls:9,vars:6,consts:[["class","overlay","id","overlay",4,"ngIf"],[3,"group","requestsnotify","messagesnotify","filterclicked","user","reciveclick",4,"ngIf"],[1,"fade-in"],[1,"cards"],[4,"ngFor","ngForOf"],["class","end-match",4,"ngIf"],["class","explore",4,"ngIf"],["class","profile-info",4,"ngIf"],["id","overlay",1,"overlay"],[1,"spinner"],[3,"reciveclick","group","requestsnotify","messagesnotify","filterclicked","user"],["class","middle-card",3,"number","imagevector","accepted","rejected",4,"ngIf"],[1,"middle-card",3,"accepted","rejected","number","imagevector"],[1,"end-match"],[1,"bi","bi-emoji-frown-fill"],[1,"explore"],[1,"bi","bi-chevron-compact-down"],[1,"profile-info"],["class","block",4,"ngIf"],[1,"block"],[1,"left-column"],[1,"descrizione"],["class","comune",4,"ngIf"],[1,"right-column"],[1,"images"],["class","image",3,"ngClass",4,"ngFor","ngForOf"],[1,"comune"],[1,"small-text"],[1,"image",3,"ngClass"],[3,"src"],[4,"ngIf"]],template:function(i,o){i&1&&(ae(0,b$,2,0,"div",0)(1,C$,1,5,"app-navbar",1),U(2,"app-filter",2),v(3,"div",3),ae(4,E$,2,1,"div",4)(5,x$,3,0,"h4",5)(6,M$,4,0,"div",6),_(),ae(7,A$,2,1,"div",7),U(8,"router-outlet")),i&2&&(L("ngIf",o.isLoading),D(),L("ngIf",o.user!=null),D(3),L("ngForOf",o.vectorGroups),D(),L("ngIf",o.id>=o.vectorGroups.length),D(),L("ngIf",!(o.id>=o.vectorGroups.length)),D(),L("ngIf",!(o.id>=o.vectorGroups.length)))},dependencies:[Mf,kt,Ke,ir,kp,Rp,GP],styles:['@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}app-filter[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:0;width:100%;z-index:98!important}app-navbar[_ngcontent-%COMP%]{position:absolute;z-index:99}.cards[_ngcontent-%COMP%]{position:relative;display:flex;height:100%;justify-content:center;align-items:center;flex-direction:row;z-index:0}app-card[_ngcontent-%COMP%]{margin:1rem}.middle-card[_ngcontent-%COMP%]{z-index:100}.explore[_ngcontent-%COMP%], .profile-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.explore[_ngcontent-%COMP%]{position:absolute;flex-direction:column;bottom:1rem;font-size:.9rem;color:#b1b1b1;text-shadow:0 0 5px rgba(0,0,0,.116)}.explore[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem}.profile-info[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;background-color:#fafafa;box-shadow:inset 3px 4px 30px #0000003b}.block[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:14px;width:60%;height:70%;padding:1rem 0 2rem;box-shadow:3px 4px 30px #0000001a;display:flex;align-items:stretch}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center}.left-column[_ngcontent-%COMP%]{align-items:flex-start;flex-direction:column;width:60%;margin-left:3rem}.right-column[_ngcontent-%COMP%]{width:40%;min-height:100%;align-items:center}.left-column[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], button[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:.7rem}h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-top:2rem!important}.descrizione[_ngcontent-%COMP%]{text-align:left;margin-bottom:2rem;font-style:italic}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem;border-radius:10px;transition:.1s}.small-text[_ngcontent-%COMP%]{margin:0 0 0 .7rem;font-size:.8rem}.images[_ngcontent-%COMP%]{position:absolute;width:auto;display:flex;flex-wrap:wrap;margin:0 1rem 1rem}.oneImage[_ngcontent-%COMP%]{width:100%!important;height:16rem!important}.threeImages[_ngcontent-%COMP%], .twoImages[_ngcontent-%COMP%]{width:100%!important;height:12rem!important}.threeImages[_ngcontent-%COMP%]{height:7rem!important}.image[_ngcontent-%COMP%]{position:relative;width:44.2%;height:8rem;margin:.5rem}.image-more[_ngcontent-%COMP%]:after, img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:10px}.image-more[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;background-color:#00000086;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.image-more[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;top:40%;right:45%;z-index:100;color:#fff;font-weight:500;margin:auto}img[_ngcontent-%COMP%]{object-fit:cover;box-shadow:0 0 10px #00000054}.end-match[_ngcontent-%COMP%]{color:#0000003b;font-size:2rem;font-weight:500;text-align:center}.grabbed[_ngcontent-%COMP%]{cursor:grabbing!important}.display-none[_ngcontent-%COMP%]{display:none}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffffffa;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;z-index:1000;transition:opacity .5s ease}.spinner[_ngcontent-%COMP%]{border:10px solid #dfdfdf;border-top:10px solid #6d6d6d;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 2s linear infinite}b[_ngcontent-%COMP%]{font-weight:400}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .2s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .2s;-moz-animation:fadeIn ease-in .2s;-o-animation:fadeIn ease-in .2s;-ms-animation:fadeIn ease-in .2s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .3s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .3s;-moz-animation:fadeOut ease-in .3s;-o-animation:fadeOut ease-in .3s;-ms-animation:fadeOut ease-in .3s}@media all and (min-width:768px) and (max-width:1070px){.block[_ngcontent-%COMP%]{width:80%}}@media all and (min-width:480px) and (max-width:768px){.block[_ngcontent-%COMP%]{width:85%;flex-direction:column}.left-column[_ngcontent-%COMP%]{width:100%;height:60%;margin-left:2rem;text-align:left}.right-column[_ngcontent-%COMP%]{width:100%;height:40%;margin-top:1rem;min-height:50%;margin-left:0;text-align:left}}@media all and (max-width:480px){.block[_ngcontent-%COMP%]{width:90%;flex-direction:column}.left-column[_ngcontent-%COMP%]{width:100%;height:50%;margin-left:1rem;text-align:left}.right-column[_ngcontent-%COMP%]{width:100%;height:55%;margin-top:1rem;min-height:50%;margin-left:0;text-align:left}}']});let t=e;return t})();function k$(t,e){if(t&1){let n=at();v(0,"div",10),U(1,"img",11),v(2,"div",12)(3,"h3"),E(4),_(),v(5,"p"),E(6),_(),v(7,"p"),E(8),_(),v(9,"p",13),E(10),_(),v(11,"button",14),Q("click",function(){Re(n);let i=Z().$implicit,o=Z();return Ne(o.accept(i.value.id,i.value.age))}),E(12,"Accetta"),_(),v(13,"button",15),Q("click",function(){Re(n);let i=Z().$implicit,o=Z();return Ne(o.reject(i.value.id))}),U(14,"i",16),_()()()}if(t&2){let n=Z().$implicit;L("id","profile-"+n.value.id),D(),L("src",n.value.profileImageURL,Me),D(3),Lt("",n.value.surname," ",n.value.name,""),D(2),In("",n.value.age,", ",n.value.city,", ",n.value.faculty,""),D(2),he(n.value.locationAndTime),D(2),tt("Richiesta per ",n.value.namegroup,""),D(),L("id","request-button-"+n.value.id)}}function R$(t,e){if(t&1&&(Jn(0),ae(1,k$,15,10,"div",9),er()),t&2){let n=e.$implicit,r=Z();D(),L("ngIf",r.requests!=null&&n!=null)}}function N$(t,e){t&1&&(v(0,"h4",17),E(1,"Nessuna richiesta..."),_())}var KP=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.firestore=o,this.groups={},this.requests={},this.autenticazione=i,this.db=o}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData()}catch(r){throw r}})}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser()),i=yield K(this.db.getItem("user",r.uid));this.user=i;for(let o of this.user.accepted_groups){let s=yield K(this.db.getItem("group",o));if(s.members.indexOf(this.user.id)!=-1){this.groups[s.id]=s;for(let a in s.requests)this.requests[a+","+s.id]={id:a+","+s.id,profileImageURL:s.requests[a].profileImageURL,surname:s.requests[a].surname,name:s.requests[a].name,age:s.requests[a].age,locationAndTime:s.requests[a].locationAndTime,city:s.requests[a].city,faculty:s.requests[a].faculty,namegroup:s.name}}}}catch(r){throw r}})}savedata(r){return b(this,null,function*(){try{yield this.db.updateItem("group",r,{medium_age:this.groups[r].medium_age,members:this.groups[r].members,rejected:this.groups[r].rejected,requests:this.groups[r].requests})}catch(i){throw i}})}sendNotification(){if("Notification"in window&&Notification.permission=="granted"){var r=new Notification("Nuovo membro del gruppo!",{lang:"it",body:"E' stato appena accettato un nuovo membro nel gruppo ",icon:"studymatch.ico"});Notification.requestPermission().then(i=>{i==="granted"&&navigator.serviceWorker.ready.then(o=>{o.showNotification("Nuovo membro del gruppo!",{lang:"it",body:"E' stato appena accettato un nuovo membro nel gruppo ",icon:"studymatch.ico"})})})}}accept(r,i){let[o,s]=r.split(",");document.getElementById("profile-"+r).classList.add("fade-out"),setTimeout(()=>b(this,null,function*(){this.groups[s].members.push(o),this.groups[s].medium_age=Math.floor((this.groups[s].medium_age+i)/2),delete this.groups[s].requests[o],delete this.requests[r],this.sendNotification(),yield this.savedata(s),window.location.reload()}),300)}reject(r){let[i,o]=r.split(",");document.getElementById("profile-"+r).classList.add("fade-out"),setTimeout(()=>b(this,null,function*(){this.groups[o].rejected.push(i),delete this.groups[o].requests[i],delete this.requests[r],yield this.savedata(o),window.location.reload()}),300)}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}isEmpty(r){return r!=null?Object.keys(r).length==0:!0}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-requests-g"]],decls:15,vars:4,consts:[["id","background",1,"background","fade-in"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],[1,"content"],[1,"text"],[1,"profiles"],[4,"ngFor","ngForOf"],["class","end-request",4,"ngIf"],["class","profile fade-in-up",3,"id",4,"ngIf"],[1,"profile","fade-in-up",3,"id"],[3,"src"],[1,"information"],[1,"namegroup"],[3,"click","id"],[1,"x",3,"click"],[1,"bi","bi-x"],[1,"end-request"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"a",2),Q("click",function(){return o.fadeout("groupswiper")}),U(3,"i",3),E(4,"Torna indietro"),_(),v(5,"div",4)(6,"div",5)(7,"h2"),E(8,"Richieste accesso al gruppo"),_(),v(9,"p"),E(10,"Accetta o rifiuta le richieste per entrare ad un tuo gruppo in cui partecipi."),_()(),v(11,"div",6),ae(12,R$,2,1,"ng-container",7),ea(13,"keyvalue"),_(),ae(14,N$,2,0,"h4",8),_()()()),i&2&&(D(12),L("ngForOf",ta(13,2,o.requests)),D(2),L("ngIf",o.isEmpty(o.requests)))},dependencies:[kt,Ke,ia],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden;min-width:330px}.block[_ngcontent-%COMP%]{min-width:330px;position:relative;background-color:#dbdbdbed;border-radius:14px;width:60%;height:60%;padding:1rem 0 2.5rem}.text[_ngcontent-%COMP%]{margin-top:2.5rem;width:50%;min-width:300px}.content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;text-align:center}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.8rem;font-weight:600}p[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:.8rem;margin:0}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem;margin-top:.7rem;margin-bottom:.7rem;border-radius:10px;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transform:scale(1.02);transition:.1s}.x[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{position:absolute}.x[_ngcontent-%COMP%], .x[_ngcontent-%COMP%]:hover{background-color:transparent}.x[_ngcontent-%COMP%]{top:-.7rem;right:.2rem;color:#858585;font-size:1rem}.x[_ngcontent-%COMP%]:hover{transform:scale(1);color:#a02626}.profiles[_ngcontent-%COMP%]{width:90%;overflow-y:auto;display:flex;flex-wrap:wrap;gap:30px;margin-top:1.7rem}.profile[_ngcontent-%COMP%]{position:relative;background-color:#ffffffe3;border-radius:8px;width:47%;display:flex;align-items:center;min-height:200px}img[_ngcontent-%COMP%]{top:2rem;left:1rem;width:3rem;height:3rem;object-fit:cover;border-radius:100%}.information[_ngcontent-%COMP%]{text-align:left;width:80%;margin-left:5.5rem;margin-right:1rem}h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.descrizione[_ngcontent-%COMP%]{margin-bottom:1rem}.namegroup[_ngcontent-%COMP%]{color:#a3a3a3}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}.end-request[_ngcontent-%COMP%]{color:#0000003b;font-size:2rem;margin-top:5rem;font-weight:500}@media screen and (max-width:940px){.profiles[_ngcontent-%COMP%]{justify-content:center}.profile[_ngcontent-%COMP%]{width:80%}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-moz-animation:fadeIn ease-in .7s;-o-animation:fadeIn ease-in .7s;-ms-animation:fadeIn ease-in .7s}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-moz-animation:fadefadeInUpIn ease-in .7s;-o-animation:fadeInUp ease-in .7s;-ms-animation:fadeInUp ease-in .7s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-moz-animation:fadeOutUp ease-in .5s;-o-animation:fadeOutUp ease-in .5s;-ms-animation:fadeOutUp ease-in .5s}"]});let t=e;return t})();function F$(t,e){if(t&1&&(Jn(0),v(1,"div",11)(2,"div",12)(3,"h3"),E(4),_(),v(5,"p")(6,"b"),E(7,"Et\xE0 media"),_(),E(8),_(),v(9,"p")(10,"b"),E(11,"Luogo e orario"),_(),E(12),_(),v(13,"p",13),E(14),_(),v(15,"p",14),E(16),_(),v(17,"a",15)(18,"button",16),E(19,"Telegram"),_()(),v(20,"a",15)(21,"button"),E(22),_()(),v(23,"a",15)(24,"button",17),E(25,"Whatsapp"),_()()()(),er()),t&2){let n=e.$implicit,r=e.index,i=Z(2);D(4),he(n.name),D(4),tt(": ",n.medium_age,""),D(4),tt(": ",n.locationAndTime,""),D(2),he(i.members[r]),D(2),he(n.description),D(),L("href",n.telegram,Me),D(3),L("href","https://www.instagram.com/"+n.instagram.substring(1),Me),D(2),he(n.instagram),D(),L("href",n.phone,Me)}}function L$(t,e){if(t&1&&(v(0,"div",9),ae(1,F$,26,9,"ng-container",10),_()),t&2){let n=Z();D(),L("ngForOf",n.accepted)}}function V$(t,e){t&1&&(v(0,"h4",18),E(1,"Nessuna gruppo..."),_())}var YP=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.firestore=o,this.accepted=[],this.members=[],this.autenticazione=i,this.db=o}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData()}catch(r){throw r}})}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser()),i=yield K(this.firestore.getItems("user"));if(this.user=i.find(o=>o.id===r.uid),this.user)for(let o of this.user.accepted_groups){let s=[],a=yield K(this.firestore.getItem("group",o));if(a.members.indexOf(this.user.id)!=-1){this.accepted.push(a);for(let c of a.members)if(s.length<=3){let u=yield K(this.firestore.getItem("user",c));s.push(u.name)}else{s.push("+"+(s.length-3));break}this.members.push(s)}}}catch(r){throw r}})}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}correctcopy(){let r=document.getElementById("correct-copy");setTimeout(()=>{r.style.display="flex"},50),setTimeout(()=>{r.classList.add("fade-out-bubble")},2050),setTimeout(()=>{r.classList.remove("fade-out-bubble"),r.style.display="none"},2450)}copy(r){navigator.clipboard.writeText(r),this.correctcopy()}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-messages-g"]],decls:18,vars:2,consts:[["id","background",1,"background","fade-in"],["id","correct-copy",1,"correct-float","fade-in-bubble"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],[1,"content"],[1,"text"],["class","profiles fade-in",4,"ngIf"],["class","end-messages",4,"ngIf"],[1,"profiles","fade-in"],[4,"ngFor","ngForOf"],[1,"profile"],[1,"information"],[1,"people"],[1,"descrizione"],["target","_blank",3,"href"],[1,"firstButton"],[1,"lastButton"],[1,"end-messages"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"h6"),E(3,"Contatto copiato"),_(),v(4,"p"),E(5,"Hai copiato il contatto; adesso lo puoi incollare."),_()(),v(6,"div",2)(7,"a",3),Q("click",function(){return o.fadeout("groupswiper")}),U(8,"i",4),E(9,"Torna indietro"),_(),v(10,"div",5)(11,"div",6)(12,"h2"),E(13,"Messaggi gruppi"),_(),v(14,"p"),E(15,"Visualizza in questa sezione tutti i gruppi che hai creato o che ti hanno accettato la richiesta. Tramite i loro social puoi contattarli!"),_()(),ae(16,L$,2,1,"div",7)(17,V$,2,0,"h4",8),_()()()),i&2&&(D(16),L("ngIf",o.accepted!=null&&o.members!=null),D(),L("ngIf",o.accepted.length<=0))},dependencies:[kt,Ke],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden;min-width:330px}.block[_ngcontent-%COMP%]{min-width:330px;position:relative;background-color:#dbdbdbed;border-radius:14px;width:60%;height:60%;padding:1rem 0 2.5rem}.text[_ngcontent-%COMP%]{margin-top:2.5rem;width:50%;min-width:300px}.content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;text-align:center}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.8rem;font-weight:600}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-size:.8rem;margin:0}p[_ngcontent-%COMP%]{margin:0 0 1.5rem}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem .8rem;margin:.2rem;border-radius:10px;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transition:.1s}.profiles[_ngcontent-%COMP%]{width:90%;overflow-y:auto;display:flex;flex-wrap:wrap;gap:30px;margin-top:1.7rem}.profile[_ngcontent-%COMP%]{position:relative;background-color:#ffffffe3;border-radius:8px;width:47%;display:flex;align-items:center;padding-bottom:1.3rem;min-height:200px}.information[_ngcontent-%COMP%]{text-align:left;width:100%;margin-left:1.2rem}h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.descrizione[_ngcontent-%COMP%]{margin-bottom:1rem}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}b[_ngcontent-%COMP%]{font-weight:400}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-weight:400}.correct-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;transform:translate(-50%);border-radius:10px;width:20rem;height:4rem;background-color:#008d0ced;box-shadow:1px 10px 10px #0000002d;justify-content:center;align-items:center;flex-direction:column;z-index:100;padding:.5rem}.people[_ngcontent-%COMP%]{color:#a3a3a3;margin-bottom:.5rem}.end-messages[_ngcontent-%COMP%]{color:#0000003b;font-size:2rem;margin-top:5rem;font-weight:500}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-moz-animation:fadeIn ease-in .7s;-o-animation:fadeIn ease-in .7s;-ms-animation:fadeIn ease-in .7s}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp ease-in .9s;-webkit-animation:_ngcontent-%COMP%_fadeInUp ease-in .9s;-moz-animation:fadefadeInUpIn ease-in .9s;-o-animation:fadeInUp ease-in .9s;-ms-animation:fadeInUp ease-in .9s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-moz-animation:fadeOutUp ease-in .5s;-o-animation:fadeOutUp ease-in .5s;-ms-animation:fadeOutUp ease-in .5s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}@media screen and (max-width:940px){.profiles[_ngcontent-%COMP%]{justify-content:center}.profile[_ngcontent-%COMP%]{width:80%}}@media all and (min-width:480px) and (max-width:768px){.correct-float[_ngcontent-%COMP%]{top:4rem}}@media all and (max-width:480px){.correct-float[_ngcontent-%COMP%]{top:4rem}}"]});let t=e;return t})();function U$(t,e){if(t&1){let n=at();v(0,"button",20),Q("click",function(){Re(n);let i=Z(2).$implicit,o=Z();return Ne(o.sendrequest(i.id))}),E(1,"Richiedi contatto"),_()}if(t&2){let n=Z(2).$implicit;L("id","button-"+n.id)}}function j$(t,e){if(t&1&&(v(0,"div",21)(1,"a",22)(2,"button",23),E(3,"Telegram"),_()(),v(4,"a",22)(5,"button"),E(6),_()(),v(7,"a",22)(8,"button",24),E(9,"Whatsapp"),_()()()),t&2){let n=Z(2).$implicit;D(),L("href",n.telegram,Me),D(3),L("href","https://www.instagram.com/"+n.instagram.substring(1),Me),D(2),he(n.instagram),D(),L("href",n.phone,Me)}}function B$(t,e){t&1&&(v(0,"button",25),E(1,"Richiesta rifiutata"),_())}function $$(t,e){t&1&&(v(0,"button",26),E(1,"Richiesta gi\xE0 inviata"),_())}function z$(t,e){if(t&1&&(v(0,"div",14)(1,"div",15)(2,"h3"),E(3),_(),v(4,"p"),E(5),_(),ae(6,U$,2,1,"button",16)(7,j$,10,4,"div",17)(8,B$,2,0,"button",18)(9,$$,2,0,"button",19),_()()),t&2){let n=Z().$implicit,r=Z();D(3),he(n.name),D(2),Lt("",n.medium_age,", ",n.locationAndTime,""),D(),L("ngIf",n.members.indexOf(r.user.id)==-1&&r.user.rejected_groups.indexOf(n.id)==-1&&n.rejected.indexOf(r.user.id)==-1&&n.requests[r.user.id]==null),D(),L("ngIf",n.members.indexOf(r.user.id)!=-1&&r.user.rejected_groups.indexOf(n.id)==-1&&n.rejected.indexOf(r.user.id)==-1&&n.requests[r.user.id]==null),D(),L("ngIf",r.user.rejected_groups.indexOf(n.id)!=-1||n.rejected.indexOf(r.user.id)!=-1&&n.requests[r.user.id]==null),D(),L("ngIf",n.requests[r.user.id]!=null)}}function q$(t,e){if(t&1&&(Jn(0),ae(1,z$,10,7,"div",13),er()),t&2){let n=e.$implicit,r=Z();D(),L("ngIf",r.search==""||(n==null||n.name==null?null:n.name.toLowerCase().indexOf(r.search==null?null:r.search.toLowerCase()))!=-1)}}var QP=(()=>{let e=class e{constructor(r,i,o,s){this.router=r,this.route=i,this.authService=o,this.firestore=s,this.search="",this.refresh=!1,this.autenticazione=o,this.db=s}ngOnInit(){return b(this,null,function*(){try{yield this.loadUserData(),this.route.paramMap.subscribe(r=>{this.search=r.get("data"),document.getElementById("search-field").value=this.search}),this.refreshInterval=setInterval(()=>{this.search=document.getElementById("search-field").value},50)}catch(r){throw r}})}ngOnDestroy(){return b(this,null,function*(){this.refreshInterval&&clearInterval(this.refreshInterval)})}loadUserData(){return b(this,null,function*(){try{let r=yield K(this.authService.getUser());this.user=yield K(this.firestore.getItem("user",r.uid)),this.groups=yield K(this.firestore.getItems("group"))}catch(r){throw r}})}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}sendrequest(r){return b(this,null,function*(){document.getElementById("button-"+r).disabled=!0;try{let i=yield K(this.autenticazione.getUser()),[o,s]=yield Promise.all([K(this.db.getItem("user",i.uid)),K(this.db.getItem("group",r))]),a,c;a=o.accepted_groups,c=s.requests,c[i.uid]=o,a.push(r),yield this.db.updateItem("user",i.uid,{accepted_groups:a}),yield this.db.updateItem("group",r,{requests:c}),this.correct()}catch(i){throw document.getElementById("button-"+r).disabled=!1,i}})}correct(){this.refresh=!0;let r=document.getElementById("correct");setTimeout(()=>{r.style.display="flex"},50),setTimeout(()=>{r.classList.add("fade-out-bubble")},2050),setTimeout(()=>{r.classList.remove("fade-out-bubble"),r.style.display="none",window.location.reload()},2450)}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(rr),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-search-g"]],decls:18,vars:1,consts:[["id","background",1,"background","fade-in"],["id","correct",1,"correct-float","fade-in-bubble"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],[1,"content"],[1,"search"],[1,"searchform"],[1,"searchicon"],[1,"bi","bi-search"],["type","text","placeholder","Cerca gruppo...","name","search","id","search-field"],[1,"profiles"],[4,"ngFor","ngForOf"],["class","profile",4,"ngIf"],[1,"profile"],[1,"information"],[3,"id","click",4,"ngIf"],["class","buttons",4,"ngIf"],["class","rejected",4,"ngIf"],["class","already-requested","disabled","",4,"ngIf"],[3,"click","id"],[1,"buttons"],["target","_blank",3,"href"],[1,"firstButton"],[1,"lastButton"],[1,"rejected"],["disabled","",1,"already-requested"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"h6"),E(3,"Contatto richiesto"),_(),v(4,"p"),E(5,"Contatto richiesto correttamente"),_()(),v(6,"div",2)(7,"a",3),Q("click",function(){return o.fadeout("groupswiper")}),U(8,"i",4),E(9,"Torna indietro"),_(),v(10,"div",5)(11,"div",6)(12,"form",7)(13,"span",8),U(14,"i",9),_(),U(15,"input",10),_()(),v(16,"div",11),ae(17,q$,2,1,"ng-container",12),_()()()()),i&2&&(D(17),L("ngForOf",o.groups))},dependencies:[kt,Ke],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden;min-width:330px}.block[_ngcontent-%COMP%]{position:relative;background-color:#dbdbdbed;border-radius:14px;width:25%;min-width:300px;height:60%;padding:1rem 0 2.5rem}.search[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:.2rem;width:93%}.content[_ngcontent-%COMP%], .searchform[_ngcontent-%COMP%]{width:100%;display:flex}.searchform[_ngcontent-%COMP%]{justify-content:center;margin:1.5rem 0 0}.content[_ngcontent-%COMP%]{height:100%;flex-direction:column;align-items:center;text-align:center}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;margin:.2rem;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:0;width:auto;padding:.5rem;margin-top:.7rem;margin-bottom:.7rem;border-radius:10px;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transform:scale(1.02);transition:.1s}.x[_ngcontent-%COMP%], .x[_ngcontent-%COMP%]:hover{background-color:transparent}.x[_ngcontent-%COMP%]{position:absolute;top:-.7rem;right:.2rem;color:#858585;font-size:1rem}.x[_ngcontent-%COMP%]:hover{transform:scale(1);color:#a02626}.profiles[_ngcontent-%COMP%]{width:95%;overflow-y:auto;display:flex;flex-wrap:wrap;gap:30px;margin-top:1.7rem;margin-left:.2rem;justify-content:center}.profile[_ngcontent-%COMP%]{position:relative;background-color:#ffffffe3;border-radius:8px;width:80%;display:flex;align-items:center;padding-bottom:.8rem;min-height:150px}.information[_ngcontent-%COMP%]{text-align:left;margin-left:.8rem}p[_ngcontent-%COMP%]{font-size:.8rem;margin:0}h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.people[_ngcontent-%COMP%]{color:#a3a3a3}input[type=text][_ngcontent-%COMP%]{height:30px;width:70%;margin:0;padding-left:.2rem;border-radius:0 8px 8px 0;border:0;background-color:#7878801f;transition:.1s;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}input[type=text][_ngcontent-%COMP%]:focus{outline:0}.searchicon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:10%;font-size:.7rem;background-color:#7878801f;color:#787880e5;transition:.3s;margin:0;border-radius:8px 0 0 8px;padding-left:.3rem}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;margin:0}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-size:.8rem;font-weight:400;margin:0}.correct-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;transform:translate(-50%);border-radius:10px;width:20rem;height:4rem;background-color:#008d0ced;box-shadow:1px 10px 10px #0000002d;justify-content:center;align-items:center;flex-direction:column;z-index:100;padding:.5rem}.buttons[_ngcontent-%COMP%]   .firstButton[_ngcontent-%COMP%]{margin-top:1rem}.buttons[_ngcontent-%COMP%]   .lastButton[_ngcontent-%COMP%]{margin-bottom:.5rem}.already-requested[_ngcontent-%COMP%]:hover, .rejected[_ngcontent-%COMP%]:hover{transform:none;cursor:not-allowed}.rejected[_ngcontent-%COMP%], .rejected[_ngcontent-%COMP%]:hover{background-color:#ce0303}.already-requested[_ngcontent-%COMP%], .already-requested[_ngcontent-%COMP%]:hover{background-color:green}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-moz-animation:fadeIn ease-in .7s;-o-animation:fadeIn ease-in .7s;-ms-animation:fadeIn ease-in .7s}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-moz-animation:fadefadeInUpIn ease-in .7s;-o-animation:fadeInUp ease-in .7s;-ms-animation:fadeInUp ease-in .7s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-moz-animation:fadeOutUp ease-in .5s;-o-animation:fadeOutUp ease-in .5s;-ms-animation:fadeOutUp ease-in .5s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}@media all and (min-width:1070px) and (max-width:1300px){.block[_ngcontent-%COMP%]{width:30%}}@media all and (min-width:768px) and (max-width:1070px){.block[_ngcontent-%COMP%]{width:40%}}@media all and (min-width:480px) and (max-width:768px){.block[_ngcontent-%COMP%]{width:60%}.correct-float[_ngcontent-%COMP%]{top:4rem}p[_ngcontent-%COMP%]{font-size:1.05rem!important}button[_ngcontent-%COMP%]{font-size:.8rem!important}}@media all and (max-width:480px){.correct-float[_ngcontent-%COMP%]{top:4rem}p[_ngcontent-%COMP%]{font-size:1.05rem!important}button[_ngcontent-%COMP%]{font-size:.8rem!important}}"]});let t=e;return t})();var ZP=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.firestore=o,this.autenticazione=i,this.db=o}fadeout(r){var i=document.getElementById("background"),o=document.getElementById("block");i.classList.remove("fade-in"),i.className+=" fade-out",o.classList.remove("fade-in"),o.className+=" fade-out-up",setTimeout(()=>{this.router.navigateByUrl(r)},450)}savedata(){return b(this,null,function*(){let r=document.getElementById("nome").value,i=document.getElementById("contacts").value,o=document.getElementById("lfo").value,s=document.getElementById("descrizione").value;if(!r||!i||!o||!s)throw new Error("Qualche campo \xE8 vuoto.");if(r.length>=30)throw new Error("Nome troppo lungo. (Max 30 caratteri)");if(/^[\s\S]+, \d\d-\d\d$/.test(o)){if(!/^https:\/\/t\.me\/[^\s,]+,\s@[\w.]+,\shttps:\/\/chat\.whatsapp\.com\/[^\s,]+$/.test(i))throw new Error("I contatti devono essere nella forma: http://t.me/..., @..., http://chat.whatsapp.com/...")}else throw new Error("Il luogo e l'orario devono essere nella forma: luogo, ora-ora.");let[a,c]=o.split(",")[1].split("-").map(Number);if(a<0||a>=24||c<0||c>24)throw new Error("La fascia oraria non \xE8 valida (supera le 23 o va a meno di 00)");let[u,d,h]=i.split(",").map(String),m=yield K(this.authService.getUser()),y=yield K(this.firestore.getItem("user",m.uid)),M=yield this.db.addItemWOid("group",{name:r,medium_age:y.age,telegram:u,instagram:d.trim(),phone:h.trim(),locationAndTime:o,description:s,members:[m.uid],rejected:[],requests:{}});y.accepted_groups.push(M.id),yield this.db.updateItem("user",y.id,{accepted_groups:y.accepted_groups}),yield this.db.updateItem("group",M.id,{id:M.id})})}fadeoutsv(r){return b(this,null,function*(){document.getElementById("create-button").disabled=!0;try{yield this.savedata(),this.correct("Gruppo creato correttamente"),setTimeout(()=>{let i=document.getElementById("background"),o=document.getElementById("block");i&&o&&(i.classList.remove("fade-in"),i.classList.add("fade-out"),o.classList.remove("fade-in"),o.classList.add("fade-out-up"),setTimeout(()=>{this.router.navigateByUrl(r),setTimeout(()=>{window.location.reload()},100)},450))},300)}catch(i){document.getElementById("create-button").disabled=!1,this.error(i.message)}})}error(r){let i=document.getElementById("error");i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400)}correct(r){let i=document.getElementById("correct");i.style.display="flex",this.message=r,setTimeout(()=>{i.classList.add("fade-out-bubble")},2e3),setTimeout(()=>{i.classList.remove("fade-out-bubble"),i.style.display="none"},2400)}};e.\u0275fac=function(i){return new(i||e)(q(ve),q(Pe),q(Ye))},e.\u0275cmp=pe({type:e,selectors:[["app-create-group"]],decls:32,vars:2,consts:[["id","background",1,"background","fade-in"],["id","error",1,"error-float","fade-in-bubble"],["id","correct",1,"correct-float","fade-in-bubble"],["id","block",1,"block","fade-in-up"],[1,"return",3,"click"],[1,"bi","bi-arrow-left","large-stroke"],[1,"text"],[1,"inputs"],[1,"column"],["type","text","placeholder","Nome gruppo","id","nome"],["type","text","placeholder","Luogo e fascia oraria","id","lfo"],["type","text","placeholder","Telegram link, Instagram amministratore da contattare, Whatsapp link","id","contacts"],["placeholder","Descrizione","id","descrizione","maxlength","200"],["type","button","id","create-button",1,"larger-button",3,"click"]],template:function(i,o){i&1&&(v(0,"div",0)(1,"div",1)(2,"h6"),E(3,"Errore"),_(),v(4,"p"),E(5),_()(),v(6,"div",2)(7,"h6"),E(8,"Completata creazione"),_(),v(9,"p"),E(10),_()(),v(11,"div",3)(12,"a",4),Q("click",function(){return o.fadeout("groupswiper")}),U(13,"i",5),E(14,"Torna indietro"),_(),v(15,"form")(16,"div",6)(17,"h2"),E(18,"Creazione gruppo"),_(),v(19,"p"),E(20,"Crea un gruppo inserendo le seguenti informazioni a cui poi potrai far aggiungere le persone tramite una richiesta!"),_()(),v(21,"div",7)(22,"div",8)(23,"div"),U(24,"input",9)(25,"input",10),_(),v(26,"div"),U(27,"input",11),_(),v(28,"div"),U(29,"textarea",12),_()()(),v(30,"button",13),Q("click",function(){return o.fadeoutsv("groupswiper")}),E(31,"Crea"),_()()()()),i&2&&(D(5),he(o.message),D(5),he(o.message))},styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-1%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-1%)}}@keyframes _ngcontent-%COMP%_fadeInBubble{0%{opacity:0;transform:translate(-50%) translateY(-3%)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOutBubble{0%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(3%)}}@keyframes _ngcontent-%COMP%_fadeInRight{0%{opacity:0;transform:translate(-1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(1%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(1%)}}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-1%)}}@keyframes _ngcontent-%COMP%_fadeInFifty{0%{opacity:0;transform:translateY(-51%)}to{opacity:1;transform:translateY(-50%)}}.background[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;background-color:#000000a6;width:100%;height:100%;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-y:auto;overflow-x:hidden}.background[_ngcontent-%COMP%], .block[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{min-width:330px}.block[_ngcontent-%COMP%]{position:relative;background-color:#dbdbdbed;border-radius:14px;width:60%;padding:1rem 0 2.5rem}.text[_ngcontent-%COMP%]{margin-top:2.5rem;width:50%;min-width:300px}form[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;text-align:center}.inputs[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:row}.return[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}.bi-arrow-left[_ngcontent-%COMP%]{margin-right:10px}.large-stroke[_ngcontent-%COMP%]{-webkit-text-stroke:1.1px}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.8rem;font-weight:600}p[_ngcontent-%COMP%]{margin:0 0 1.5rem}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{transition:.2s}a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none;font-weight:350}a[_ngcontent-%COMP%]:hover{color:#000;cursor:pointer}input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:.8rem;background-color:#ffffff8f}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{height:35px;width:290px;margin:.2rem;padding-left:.2rem;border-radius:8px;border:solid 1px #d9d9d9;transition:.1s;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}input[type=file][_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-weight:300;padding:.5rem;width:90%;border-radius:19px;display:inline-block;cursor:pointer;transition:.2s}input[type=file][_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]:hover + label[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:solid 1px #007aff;transform:scale(1.02);transition:.1s}#lfo[_ngcontent-%COMP%], #nome[_ngcontent-%COMP%]{width:45%}#eta[_ngcontent-%COMP%]{width:20%}#contacts[_ngcontent-%COMP%]{width:92%}#descrizione[_ngcontent-%COMP%]{width:92%;height:5rem;resize:none}button[_ngcontent-%COMP%]{border-radius:19px;background-color:#007aff;color:#fff;border:0;width:200px;height:35px;margin-top:.7rem;margin-bottom:.7rem;transition:.1s}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0664c9;transform:scale(1.02);transition:.1s}.column[_ngcontent-%COMP%]{width:100%;margin:.1rem}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{display:none;position:absolute;top:2rem;left:50%;transform:translate(-50%);border-radius:10px;z-index:100;justify-content:center;align-items:center;flex-direction:column;padding:.5rem}.error-float[_ngcontent-%COMP%]{width:18rem;height:7rem;background-color:#fa7979ed;box-shadow:1px 10px 10px #c43b3b3f}h6[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;margin:0}.correct-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffc7;font-size:.8rem;font-weight:400;margin:.1rem}.correct-float[_ngcontent-%COMP%]{width:20rem;height:4rem;background-color:#008d0ced;box-shadow:1px 10px 10px #0c0c0c18}@media all and (min-width:1024px) and (max-width:1500px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}.column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (min-width:768px) and (max-width:1024px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}h2[_ngcontent-%COMP%]{margin-top:1.5rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (min-width:480px) and (max-width:768px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}h2[_ngcontent-%COMP%]{margin-top:1.5rem}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{top:4rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (max-width:480px){.inputs[_ngcontent-%COMP%]{flex-direction:column;width:95%}h2[_ngcontent-%COMP%]{margin-top:1.5rem}.correct-float[_ngcontent-%COMP%], .error-float[_ngcontent-%COMP%]{top:4rem}button[_ngcontent-%COMP%], i[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem!important}.column[_ngcontent-%COMP%]{margin:0;width:100%}}@media all and (max-height:500px){.background[_ngcontent-%COMP%]{justify-content:flex-start}}@media all and (max-height:750px){.background-opened[_ngcontent-%COMP%]{justify-content:flex-start!important}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeIn ease-in .7s;-moz-animation:fadeIn ease-in .7s;-o-animation:fadeIn ease-in .7s;-ms-animation:fadeIn ease-in .7s}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-webkit-animation:_ngcontent-%COMP%_fadeInUp ease-in .7s;-moz-animation:fadefadeInUpIn ease-in .7s;-o-animation:fadeInUp ease-in .7s;-ms-animation:fadeInUp ease-in .7s}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOut ease-in .5s;-moz-animation:fadeOut ease-in .5s;-o-animation:fadeOut ease-in .5s;-ms-animation:fadeOut ease-in .5s}.fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutUp ease-in .5s;-moz-animation:fadeOutUp ease-in .5s;-o-animation:fadeOutUp ease-in .5s;-ms-animation:fadeOutUp ease-in .5s}.fade-in-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeInBubble ease-in .5s;-moz-animation:fadeInBubble ease-in .5s;-o-animation:fadeInBubble ease-in .5s;-ms-animation:fadeInBubble ease-in .5s}.fade-out-bubble[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-webkit-animation:_ngcontent-%COMP%_fadeOutBubble ease-in .5s;-moz-animation:fadeOutBubble ease-in .5s;-o-animation:fadeOutBubble ease-in .5s;-ms-animation:fadeOutBubble ease-in .5s}"]});let t=e;return t})();var Sn=(()=>{let e=class e{constructor(r,i,o){this.authService=r,this.router=i,this.logged=o}canActivate(r,i){return this.logged.isAuthenticated()?!0:(this.router.navigate(["access/login"]),!1)}};e.\u0275fac=function(i){return new(i||e)(V(Pe),V(ve),V(Fr))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Fb=(()=>{let e=class e{constructor(r,i,o){this.authService=r,this.router=i,this.logged=o}canActivate(r,i){return this.logged.isRegistered()?!0:(this.router.navigate(["access/register"]),!1)}};e.\u0275fac=function(i){return new(i||e)(V(Pe),V(ve),V(Fr))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var H$=[{path:"userswiper",component:BP,children:[{path:"requests",component:$P,canActivate:[Sn]},{path:"messages",component:zP,canActivate:[Sn]},{path:"search",component:Rb,canActivate:[Sn]},{path:"search/:data",component:Rb,canActivate:[Sn]},{path:"personal-profile",component:Nb,canActivate:[Sn]}],canActivate:[Sn]},{path:"groupswiper",component:WP,children:[{path:"requests",component:KP,canActivate:[Sn]},{path:"messages",component:YP,canActivate:[Sn]},{path:"search",component:QP,canActivate:[Sn]},{path:"create-group",component:ZP,canActivate:[Sn]},{path:"personal-profile",component:Nb,canActivate:[Sn]}],canActivate:[Sn]},{path:"access",component:WT,children:[{path:"login",component:KS},{path:"register",component:YS,children:[{path:"complete-profile",component:FP,canActivate:[Fb]},{path:"end-complete-profile",component:LP,canActivate:[Fb]}]},{path:"**",redirectTo:"/login"}]},{path:"**",redirectTo:"/access/login"}],_n=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({imports:[q0.forRoot(H$),q0]});let t=e;return t})();var XP=(()=>{let e=class e{constructor(r){this.router=r,this.title="StudyMatch"}};e.\u0275fac=function(i){return new(i||e)(q(ve))},e.\u0275cmp=pe({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){i&1&&U(0,"router-outlet")},dependencies:[ir]});let t=e;return t})();var JP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({imports:[gn,_n]});let t=e;return t})();var eA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({imports:[gn,_n,JP]});let t=e;return t})();var tA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({imports:[gn,_n]});let t=e;return t})();var nA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({imports:[gn,_n,tA]});let t=e;return t})();var rA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({imports:[gn,_n]});let t=e;return t})();var iA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({imports:[gn,_n]});let t=e;return t})();var oA={apiKey:"AIzaSyBIwDasolZhudDZZaVa2vyJyryW3ERI_sE",authDomain:"studymatch-99924.firebaseapp.com",databaseURL:"https://studymatch-99924-default-rtdb.europe-west1.firebasedatabase.app",projectId:"studymatch-99924",storageBucket:"studymatch-99924.appspot.com",messagingSenderId:"794596806953",appId:"1:794596806953:web:a3f75286cb4fb546e5e738",measurementId:"G-ENMF1ZHQ5T"};var bu="Service workers are disabled or not supported by this browser";function G$(t){return _o(()=>mi(new Error(t)))}var hc=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=G$(bu);else{let r=ks(e,"controllerchange").pipe(oe(()=>e.controller)),i=_o(()=>se(e.controller)),o=pr(i,r);this.worker=o.pipe(pt(d=>!!d)),this.registration=this.worker.pipe(ze(()=>e.getRegistration()));let u=ks(e,"message").pipe(oe(d=>d.data)).pipe(pt(d=>d&&d.type)).pipe(Lm());u.connect(),this.events=u}}postMessage(e,n){return this.worker.pipe(Dt(1),mt(r=>{r.postMessage(te({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(pt(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(Dt(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(pt(n=>n.nonce===e),Dt(1),oe(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},cA=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,this.pushManager=null,this.subscriptionChanges=new We,!r.isEnabled){this.messages=vo,this.notificationClicks=vo,this.subscription=vo;return}this.messages=this.sw.eventsOfType("PUSH").pipe(oe(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(oe(o=>o.data)),this.pushManager=this.sw.registration.pipe(oe(o=>o.pushManager));let i=this.pushManager.pipe(ze(o=>o.getSubscription()));this.subscription=Rs(i,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(bu));let i={userVisibleOnly:!0},o=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return i.applicationServerKey=s,this.pushManager.pipe(ze(a=>a.subscribe(i)),Dt(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(bu));let r=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(Dt(1),ze(r)).toPromise()}decodeBase64(r){return atob(r)}};e.\u0275fac=function(i){return new(i||e)(V(hc))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),lA=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=vo,this.unrecoverable=vo;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(bu));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(bu));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};e.\u0275fac=function(i){return new(i||e)(V(hc))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();var sA=new ne("");function W$(t,e,n,r){return()=>{if(!(Tf(r)&&"serviceWorker"in navigator&&n.enabled!==!1))return;let i=t.get(De),o=t.get(tr);i.runOutsideAngular(()=>{let a=navigator.serviceWorker,c=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",c),o.onDestroy(()=>{a.removeEventListener("controllerchange",c)})});let s;if(typeof n.registrationStrategy=="function")s=n.registrationStrategy();else{let[a,...c]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=se(null);break;case"registerWithDelay":s=aA(+c[0]||0);break;case"registerWhenStable":let u=Te(t.get(tr).whenStable());s=c[0]?Rs(u,aA(+c[0])):u;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}i.runOutsideAngular(()=>s.pipe(Dt(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function aA(t){return se(null).pipe(Rm(t))}function K$(t,e){return new hc(Tf(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var wu=class{};function Y$(t,e={}){return ef([cA,lA,{provide:sA,useValue:t},{provide:wu,useValue:e},{provide:hc,useFactory:K$,deps:[wu,Ot]},{provide:na,useFactory:W$,deps:[mn,sA,wu,Ot],multi:!0}])}var uA=(()=>{let e=class e{static register(r,i={}){return{ngModule:e,providers:[Y$(r,i)]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({providers:[cA,lA]});let t=e;return t})();var dA=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ke({type:e,bootstrap:[XP]}),e.\u0275inj=Ae({providers:[Pe,Ye],imports:[gn,_n,eA,rA,iA,nA,u1.initializeApp(oA),WS,d1,RP,uA.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]});let t=e;return t})();eT().bootstrapModule(dA,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
